if (self.CavalryLogger) { CavalryLogger.start_js(["SWdtu"]); }

__d("MNTButton2JSInstance",["DataStore","DOM","EventListener","cx","MNTActions"],(function(a,b,c,d,e,f,g,h,i,j){__p&&__p();var k=Object.freeze({ENABLED:"enabled",DISABLED:"disabled",PRESSED:"pressed"});function a(a,b){"use strict";this.mouseDownListener={},this.$1=function(a){var b=[];"enabled"in a&&(this.enabled=a.enabled,this.$4(),b.push("enabled"));return b}.bind(this),g.set(a,"instance",this),this.$1=this.$1.bind(this),this.action="action"in b?b.action:null,this.enabled=b.enabled,this.rootElement=a,this.states=b.states,this.setAttributes=this.$1,this.mouseDownListener=i.listen(a,"mousedown",this.$2.bind(this)),"action"in b&&b.action!==null&&(this.actionListener=i.listen(a,"click",this.$3.bind(this)))}a.prototype.$3=function(){"use strict";var a=b("MNTActions");this.enabled&&this.action instanceof Object&&a.performAction(this.action)};a.prototype.$2=function(){"use strict";if(!this.enabled)return;this.$5(k.PRESSED);this.mouseUpListener=i.listen(document.body,"mouseup",this.$6.bind(this))};a.prototype.$6=function(){"use strict";this.mouseUpListener instanceof Object&&(this.mouseUpListener.remove(),this.mouseUpListener=null,this.$4())};a.prototype.$4=function(){"use strict";this.$5(this.enabled||!this.enabled&&!(k.DISABLED in this.states)?k.ENABLED:k.DISABLED)};a.prototype.$5=function(a){"use strict";__p&&__p();if(!(a in this.states))return;a=this.states[a];var b=this.states.enabled,c=this.rootElement.getElementsByClassName("_335k"),d=this.rootElement.getElementsByClassName("_4ake");if(c.length>0){var e=a.image||b.image;Object.keys(e).forEach(function(a){c[0].style.setProperty(a,e[a])})}d.length>0&&(a.content!==null?d[0].firstChild instanceof HTMLElement?h.replace(d[0].firstChild,a.content):h.appendContent(d[0],a.content):d[0].firstChild instanceof HTMLElement&&h.remove(d[0].firstChild))};e.exports=a}),null);
__d("MPagesContextClickLogging",["Banzai","DOM","MLegacyDataStore","destroyOnUnload"],(function(a,b,c,d,e,f,g,h,i,j){__p&&__p();var k="page-context-item-link",l="page_context_item_tap";a={init:function(a){__p&&__p();a=h.listen(a,"click",k,function(a){a=a.getNode(k);a=i.get(a);var b={};for(var c in a){if(c==="flyout")continue;b[c]=a[c]}g.post(l,b)});j(a.remove.bind(a))},initWithData:function(a,b){a=h.listen(a,"click",null,function(a){g.post(l,b)});j(a.remove.bind(a))}};e.exports=a}),null);
__d("MReactionUnitViewportTracking",["DOM","MarauderLogger","MLegacyDataStore","MViewportTracking","Stratcom","ge"],(function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";__p&&__p();var m,n="reaction-unit-logging";m=babelHelpers.inherits(o,j);m&&m.prototype;o.prototype.getDataFromConfig=function(a){this.$MReactionUnitViewportTracking1=[k.listen("m:jewel:flyout:open",null,function(a){a.getData().jewel==="notifications"&&this.startRecordingTimeTrackingData()}.bind(this)),k.listen("m:jewel:flyout:close",null,function(a){a.getData().jewel==="notifications"&&this.stopRecordingTimeTrackingData()}.bind(this)),k.listen("unload",null,function(){this.stopRecordingTimeTrackingData()}.bind(this))],this.isTimeTrackingEnabled=!0};o.prototype.getAllStories=function(){var a=l("notifications_flyout");return!a?[]:g.scry(a,"div",n)};o.prototype.getTimeout=function(){return 1};o.prototype.getDataToLog=function(a){return i.get(a).logging_data};o.prototype.getMinSizeToBeVisible=function(a){return 0};o.prototype.getStoryID=function(a){return a.id};o.prototype.getTimetrackingDataToLog=function(a){__p&&__p();var b={};Object.assign(b,i.get(a.story).logging_data);b.unit_type=b.interacted_story_type;delete b.interacted_story_type;b.first_appear_time=a.evp_ts/1e3;b.vpvd_time_delta=Math.round(a.vpvd);var c=this.getAllStories();b.unit_count=c.length;b.unit_position=c.indexOf(a.story);return b};o.prototype.sendDataToLog=function(a){if(!a.vpvd_time_delta)return;h.log("reaction_unit_impression","reaction_units",a)};o.prototype.onUnload=function(){this.startRecordingTimeTrackingData()};function o(){m.apply(this,arguments)}e.exports.init=function(a){new o().init(a)}}),null);
__d("MReactionLogging",["MarauderLogger","MLegacyDataStore","MReactionUnitViewportTracking","Stratcom"],(function(a,b,c,d,e,f,g,h,i,j){__p&&__p();var k="reaction_logging",l=[];function a(a){i.init(a);if(l.length)return;l=[j.listen("click",k,function(a){a=a.getNode(k);a instanceof HTMLElement&&m(a)}),j.listen("reaction-unit-expiration",null,function(a){g.log("reaction_unit_did_timeout","reaction_units",a.getData())})]}function m(a){a=h.get(a).logging_data;g.log("reaction_unit_interaction","guide_cards_null_state",a)}e.exports={init:a}}),null);
__d("XTodayReactionController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ajax/today/reaction/",{cursor:{type:"String"},id:{type:"String"},lat:{type:"Float"},"long":{type:"Float"}})}),null);
__d("MReactionUnitExpirations",["MLocationPrompt","MRequest","Stratcom","XTodayReactionController","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g,h,i,j,k){__p&&__p();var l={},m=[],n=1e3*60*10;function a(){if(m.length)return;m=[i.listen(g.STRATCOM_UPDATE,null,function(a){p(a.getData().position.coords)})];k(o,n)}function b(a,b,c){l[a]={unit_type:c,expiration:b},b.radius&&g.getCoords()&&q(a,g.getCoords())}function o(){var a=Date.now()/1e3;for(var b in l)a>l[b].expiration.timestamp&&r(b);k(o,n)}function p(a){if(!a||a.latitude===undefined||a.longitude===undefined)return;for(var b in l)q(b,a)}function q(a,b){var c=l[a].expiration;c.radius&&s(c.latitude,c.longitude,b.latitude,b.longitude)>c.radius&&r(a,b)}function r(a){var b=j.getURIBuilder().setString("id",a),c=g.getCoords();c&&b.setFloat("lat",c.latitude).setFloat("long",c.longitude);i.invoke("reaction-unit-expiration",null,{unit_type:l[a].unit_type});new h(b.getURI().toString()).send();delete l[a]}function s(a,b,c,d){var e=6371e3,f=t(c-a);d=t(d-b);b=Math.sin(f/2)*Math.sin(f/2)+Math.cos(t(a))*Math.cos(t(c))*Math.sin(d/2)*Math.sin(d/2);f=2*Math.atan2(Math.sqrt(b),Math.sqrt(1-b));a=e*f;return a}function t(a){return a*(Math.PI/180)}e.exports={init:a,updateUnitExpiration:b}}),null);