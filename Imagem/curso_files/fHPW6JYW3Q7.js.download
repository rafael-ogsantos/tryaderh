if (self.CavalryLogger) { CavalryLogger.start_js(["wMPeU"]); }

__d("MVideoAutoplayPlayerBase",["EventEmitter"],(function(a,b,c,d,e,f,g){__p&&__p();var h;b=babelHelpers.inherits(a,g);h=b&&b.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.wasVisible=!1,b}a.prototype.isVisible=function(){"use strict";throw new Error("Should be overridden")};a.prototype.getDistanceToViewport=function(){"use strict";throw new Error("Should be overridden")};a.prototype.playWithoutUnmute=function(a){"use strict";throw new Error("Should be overridden")};a.prototype.prepareForPlay=function(){"use strict";throw new Error("Should be overridden")};a.prototype.pause=function(a){"use strict";throw new Error("Should be overridden")};a.prototype.isAutoplayable=function(){"use strict";throw new Error("Should be overridden")};a.prototype.getDOMPosition=function(){"use strict";throw new Error("Should be overridden")};a.prototype.isLooping=function(){"use strict";throw new Error("Should be overridden")};a.prototype.isState=function(a){"use strict";throw new Error("Should be overridden")};a.prototype.setLastActionReason=function(a){"use strict";throw new Error("Should be overridden")};e.exports=a}),null);
__d("MVideoPlayerApiEvents",[],(function(a,b,c,d,e,f){a=["volumeChange","stateChange","fullscreenChange","destroyed","prepare"];e.exports=a}),null);
__d("oz-player/loggings/OzLoggingUtils",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,b,c){a=a.getOperationLogger(b).start();try{b=c(a);return b}catch(b){a.setError(b);throw b}finally{a.log()}}function b(a,b,c,d,e){__p&&__p();d===void 0&&(d=function(){});e===void 0&&(e=function(){});var f=b.getOperationLogger(c).start();d(f);return a.then(function(a){e(f);f.log();return a})["catch"](function(a){f.setError(a);e(f);f.log();throw a})}e.exports={executeOperationAndLog:a,monitorPromiseAndLogOperation:b}}),null);
__d("oz-player/loggings/OzMultiDestinationPerfLogger",["oz-player/loggings/OzOperationLoggerBase","oz-player/loggings/OzPerfLoggerProviderBase"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;a=babelHelpers.inherits(k,h);i=a&&a.prototype;function k(a){i.constructor.call(this),this.$OzMultiDestinationPerfLoggerProvider1=a}k.prototype.createOperationLogger=function(a){var b=new l(a,this.$OzMultiDestinationPerfLoggerProvider1.map(function(b){return b.getOperationLogger(a)}));return b};k.prototype.createLoggerProvider=function(){return new k(this.$OzMultiDestinationPerfLoggerProvider1)};b=babelHelpers.inherits(l,g);j=b&&b.prototype;function l(a,b){j.constructor.call(this,a),this.$OzMultiDestinationOperationLogger1=b}l.prototype.start=function(){j.start.call(this);this.$OzMultiDestinationOperationLogger1.forEach(function(a){return a.start()});return this};l.prototype.setResult=function(a){j.setResult.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setResult(a)});return this};l.prototype.setError=function(a){j.setError.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setError(a)});return this};l.prototype.setType=function(a){j.setType.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setType(a)});return this};l.prototype.setClientTimeEnd=function(a){j.setClientTimeEnd.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setClientTimeEnd(a)});return this};l.prototype.setClientTimeBegin=function(a){j.setClientTimeBegin.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setClientTimeBegin(a)});return this};l.prototype.setTimeToRequestSent=function(a){j.setTimeToRequestSent.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setTimeToRequestSent(a)});return this};l.prototype.setReason=function(a){j.setReason.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setReason(a)});return this};l.prototype.setResource=function(a){j.setResource.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setResource(a)});return this};l.prototype.setSegmentStartTime=function(a){j.setSegmentStartTime.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setSegmentStartTime(a)});return this};l.prototype.setSegmentEndTime=function(a){j.setSegmentEndTime.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setSegmentEndTime(a)});return this};l.prototype.setLength=function(a){j.setLength.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setLength(a)});return this};l.prototype.setPriorityFloat=function(a){j.setPriorityFloat.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setPriorityFloat(a)});return this};l.prototype.setInitiator=function(a){j.setInitiator.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setInitiator(a)});return this};l.prototype.setPreloadTime=function(a){j.setPreloadTime.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setPreloadTime(a)});return this};l.prototype.setConcluder=function(a){j.setConcluder.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setConcluder(a)});return this};l.prototype.setPreviousRepresentationID=function(a){j.setPreviousRepresentationID.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setPreviousRepresentationID(a)});return this};l.prototype.setRepresentationID=function(a){j.setRepresentationID.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setRepresentationID(a)});return this};l.prototype.setState=function(a){j.setState.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setState(a)});return this};l.prototype.log=function(){j.log.call(this),this.$OzMultiDestinationOperationLogger1.forEach(function(a){return a.log()})};e.exports={OzMultiDestinationPerfLoggerProvider:k}}),null);
__d("oz-player/media_source/OzMediaErrorProvider",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){this.$1=a}a.prototype.getMediaErrorName=function(){var a=this.$1.error;return a&&a.message?this.$2(a.message):null};a.prototype.getErrorCode=function(){var a=this.$1.error;return a&&a.code?a.code:null};a.prototype.$2=function(a){a=a.split(":")[0];return a||""};e.exports=a}),null);
__d("oz-player/shims/OzDeferred",["Deferred"],(function(a,b,c,d,e,f){"use strict";e.exports=b("Deferred")}),null);
__d("oz-player/shims/OzEventListener",["EventListener"],(function(a,b,c,d,e,f){"use strict";e.exports=b("EventListener")}),null);
__d("oz-player/shims/OzMaybeNativePromise",["Promise","MOzExperiments","MaybeNativePromise"],(function(a,b,c,d,e,f,g,h){"use strict";g.resolve(),e.exports=h.use_native_promise?b("MaybeNativePromise"):g}),null);
__d("oz-player/shims/OzSubscriptionsHandler",["SubscriptionsHandler"],(function(a,b,c,d,e,f){"use strict";e.exports=b("SubscriptionsHandler")}),null);
__d("oz-player/states/OzObservedSourceBufferState",["oz-player/shims/OzEventListener","oz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();function a(a){this.$2=new h(),this.$3=[],this.$4=function(){var a=[];for(var b=0;b<this.$1.buffered.length;b++)a.push({startTime:this.$1.buffered.start(b),endTime:this.$1.buffered.end(b)});this.$3=a}.bind(this),this.$1=a,this.$2.addSubscriptions(g.listen(this.$1,"updateend",this.$4),g.listen(this.$1,"error",this.$4))}a.prototype.getBufferedRanges=function(){return this.$3};a.prototype.addEventListener=function(event,a){return g.listen(this.$1,"updateend",a)};a.prototype.destroy=function(){this.$2.release(),this.$2.engage()};e.exports=a}),null);
__d("oz-player/utils/ozConcatArrayBuffer",[],(function(a,b,c,d,e,f){"use strict";a=function(a,b){var c=new Uint8Array(a.byteLength+b.byteLength);c.set(new Uint8Array(a),0);c.set(new Uint8Array(b),a.byteLength);return c.buffer};e.exports=a}),null);
__d("oz-player/media_source/SourceBufferManager",["oz-player/loggings/OzLoggingUtils","oz-player/shims/OzDeferred","oz-player/shims/OzEventListener","oz-player/shims/OzMaybeNativePromise","oz-player/shims/OzSubscriptionsHandler","oz-player/states/OzObservedSourceBufferState","oz-player/utils/ozConcatArrayBuffer"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m){"use strict";__p&&__p();var n=g.monitorPromiseAndLogOperation;function a(a,b,c){__p&&__p();this.$2=null,this.$3=new k(),this.$5=!1,this.$6=[],this.$10=function(){this.$2&&this.$2.resolve(),this.$2=null}.bind(this),this.$11=function(){__p&&__p();var a=this.$2;if(a){var b=new Error("SourceBuffer append error");b.name="source_buffer_append";setTimeout(function(){var c=this.$8.getErrorCode();c!==null&&(b.status=c);c=this.$8.getMediaErrorName();c!=null&&(b.name=c);a.reject(b);this.$2=null}.bind(this),0)}}.bind(this),this.$1=a,this.$9=b,this.$3.addSubscriptions(i.listen(this.$1,"updateend",this.$10),i.listen(this.$1,"error",this.$11)),this.$7=new l(this.$1),this.$8=c}a.prototype.queueData=function(a,b,c){b===void 0&&(b=null);c===void 0&&(c=0);var d=new h(j);this.$6.push({data:a,deferred:d,loggerProvider:b,appendTarget:c});a=d.getPromise();this.$5||this.$12();return a};a.prototype.cancelOperationAndCleanQueue=function(){__p&&__p();var a=this.$13();this.$6.forEach(function(b){b=b.deferred;b.reject(a)});this.$6=[];this.$1.abort();var b=j.resolve(),c=this.$2;c&&(c.reject(a),b=c.getPromise()["catch"](function(){}));this.$4&&(this.$4.reject(a),this.$4=null);return b};a.prototype.getSourceBufferState=function(){return this.$7};a.prototype.clearRange=function(a,b){this.$1.remove(a,b)};a.prototype.$14=function(){var a=this.$2=new h(j);return a.getPromise()};a.prototype.$15=function(a,b){__p&&__p();if(this.$2!==null)return j.reject(this.$16("cannot have concurrent appends"));var c=function(){var c=this.$2=new h(j);try{this.$1.appendBuffer(a)}catch(a){this.$2=null,c.reject(a)}c=c.getPromise();b&&n(c,b,"append",function(b){b.setLength(a.byteLength)});return c}.bind(this);if(!this.$9.getBool("sbm_waits_for_update_end",!1))return c();return this.$1.updating?this.$14().then(c):c()};a.prototype.$12=function(){__p&&__p();if(this.$5)return j.reject(this.$16("Another unit of queued data is being appended."));var a=this.$6.shift();if(!a){this.$5=!1;return j.resolve()}var b=a.data,c=a.deferred,d=a.loggerProvider;a=a.appendTarget;this.$5=!0;a=b instanceof ReadableStream?this.$17(b,d,a):this.$15(b,d);return a["catch"](function(a){c.reject(a)}).then(function(){c.resolve(),this.$5=!1,this.$12()}.bind(this))};a.prototype.$17=function(a,b,c){__p&&__p();var d=new ArrayBuffer(0),e=a.getReader(),f=function(){__p&&__p();var a=new h(j);this.$4=a;e.read().then(function(b){a.resolve(b),this.$4=null}.bind(this))["catch"](function(b){a.reject(b),this.$4=null}.bind(this));return a.getPromise().then(function(a){__p&&__p();var e=a.done;a=a.value;if(e)return d.byteLength>0?this.$15(d,b):j.resolve();e=a;c>0&&(a instanceof Uint8Array&&(a=a.buffer),d=m(d,a),e=d);if(e&&e.byteLength>=c){d=new ArrayBuffer(0);return this.$15(e,b).then(f)}return f()}.bind(this))}.bind(this);return f()};a.prototype.$16=function(a){a=new Error(a);a.name="invariant_violation";return a};a.prototype.$13=function(){var a=new Error("operation is cancelled");a.name="cancelled";return a};a.prototype.destroy=function(){this.$2&&this.$2.reject(this.$13()),this.$2=null,this.$3.release(),this.$3=new k(),this.$7.destroy()};a.prototype.getDebug=function(){return{SourceBuffer:this.$1}};e.exports=a}),null);
__d("oz-player/media_source/MediaSourceManager",["oz-player/loggings/OzLoggingUtils","oz-player/loggings/OzMultiDestinationPerfLogger","oz-player/shims/OzDeferred","oz-player/shims/OzEventListener","oz-player/shims/OzMaybeNativePromise","oz-player/shims/OzSubscriptionsHandler","oz-player/media_source/OzMediaErrorProvider","oz-player/media_source/SourceBufferManager"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){"use strict";__p&&__p();var o=g.monitorPromiseAndLogOperation,p=h.OzMultiDestinationPerfLoggerProvider;function a(a,b,c){c===void 0&&(c=new p([])),this.$2=null,this.$4=new l(),this.$6=[],this.$7=[],this.$9=!1,this.$12=function(){this.$13()||(this.$9=!1);if(!this.$14())return;var a=this.$7.shift();a&&(a(this.$3),this.$9=!0)}.bind(this),this.$5=c,this.$10=b,this.$1=a,this.$3=new MediaSource(),this.$1.src=window.URL.createObjectURL(this.$3),this.$8=new m(this.$1),o(this.$11(),this.$5,"media_source_open")}a.prototype.$11=function(){if(this.$3.readyState==="open")return k.resolve();var a=new i(k);this.$4.addSubscriptions(j.listen(this.$3,"sourceopen",function(){a.resolve(),this.$12()}.bind(this)));return a.getPromise()};a.prototype.createSourceBufferManager=function(a,b){b===void 0&&(b=!1);return this.$11().then(function(){var c=this.$3.addSourceBuffer(a);b&&!isNaN(this.$3.duration)&&(c.appendWindowEnd=this.$3.duration);this.$6.push(c);this.$4.addSubscriptions(j.listen(c,"updateend",this.$12));return new n(c,this.$10,this.$8)}.bind(this))};a.prototype.getMediaSource=function(){return this.$3};a.prototype.notifyEndOfStream=function(){this.$7.push(function(a){return a.endOfStream()}),this.$12()};a.prototype.updateDuration=function(a){this.$7.push(function(b){b.duration=a}),this.$12()};a.prototype.detach=function(){this.$1.removeAttribute("src");for(var a=0;a<this.$3.sourceBuffers.length;a++){var b=this.$3.sourceBuffers[a];this.$3.removeSourceBuffer(b)}this.$4.release();this.$4.engage();this.$7=[];this.$9=!1};a.prototype.$14=function(){return!this.$13()&&this.$3.readyState==="open"&&!this.$9};a.prototype.$13=function(){return this.$6.some(function(a){return a.updating})};e.exports=a}),null);
__d("oz-player/shims/ozvariant",["invariant"],(function(a,b,c,d,e,f){e.exports=b("invariant")}),null);
__d("VideoPlayerLoggerEvent",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({AUTOPLAY_PREFERENCE_CHANGED:"autoplay_preference_changed",END_STALL_TIME:"end_stall_time",AUTOPLAY_PREFERENCE_STATUS:"autoplay_preference_status",ERROR_ALERT_SHOWN:"video_error_alert_shown",COMMERCIAL_BREAK_OFFSCREEN:"commercial_break_offscreen",COMMERCIAL_BREAK_ONSCREEN:"commercial_break_onscreen",NOT_AUTOPLAYING:"not_autoplaying",VIDEO_CHANNEL_NO_RELATED_VIDEO:"video_channel_no_related_video",VIDEO_ORIENTATION_CHANGED:"video_orientation_changed",AD_BREAK_STARTING_INDICATOR:"ad_break_starting_indicator",AD_BREAK_NON_INTERRUPTIVE_AD_START:"ad_break_non_interruptive_ad_start",AD_BREAK_NON_INTERRUPTIVE_AD_CLICK:"ad_break_non_interruptive_ad_click",AD_BREAK_PRE_ROLL_AD_START:"ad_break_pre_roll_ad_start",AD_BREAK_TAP_ON_TRAILER:"ad_break_tap_on_trailer",AD_BREAK_TAP_START_FROM_TRAILER:"ad_break_tap_start_from_trailer",ASSETS_LOADED:"assets_loaded",BUFFERED:"buffered",CANCELLED_REQUESTED_PLAYING:"cancelled_requested_playing",CAPTION_CHANGE:"caption_change",CAROUSEL_CHANGE:"carousel_change",CHROMECAST_AVAILABILITY_CHECKED:"chromecast_availabilty_checked",CHROMECAST_CAST_CLICKED:"chromecast_button_clicked",CHROMECAST_CAST_CONNECTED:"chromecast_connected",CHROMECAST_CAST_DISABLED:"chromecast_button_disabled",CHROMECAST_CAST_DISCONNECTED:"chromecast_disconnected",CHROMECAST_CAST_RECONNECTED:"chromecast_reconnected",CHROMECAST_CAST_VISIBLE:"chromecast_button_visible",CHROMECAST_NOT_SUPPORTED:"chromecast_not_supported",CLICK:"click",DISPLAYED:"displayed",ENTERED_FALLBACK:"entered_fallback",ENTERED_FS:"entered_fs",ENTERED_HD:"entered_hd",ERROR:"error",EXITED_FS:"exited_fs",EXITED_HD:"exited_hd",FINISHED_LOADING:"finished_loading",FINISHED_PLAYING:"finished_playing",HEADSET_CONNECTED:"headset_connected",HEADSET_DISCONNECTED:"headset_disconnected",HEART_BEAT:"heart_beat",HOST_ERROR:"host_error",HTTP_STATUS_UPDATE:"http_status_update",IMPRESSION:"impression",INVALID_URL:"invalid_url",MUTED:"muted",NO_SURFACE_UPDATE:"no_surface_update",PAUSED:"paused",PLAY_REQUESTED:"play_requested",PLAY_REQUESTED_OOB:"play_requested_oob",PLAYER_ALLOCATED:"player_allocated",PLAYER_FORMAT_CHANGED:"player_format_changed",PLAYER_LOADED:"player_loaded",PLAYING_LIVE_STARTED:"playing_live_started",PLAYING_LIVE_STOPPED:"playing_live_stopped",POP_FAILOVER:"pop_failover",PROGRESS:"progress",QUALITY_CHANGE:"quality_change",R2D2_SUMMARY:"r2d2_summary",R2D2_EVENT_VALIDATION:"r2d2_event_validation",READY_TO_PLAY:"ready_to_play",REPLAYED:"replayed",REPRESENTATION_ENDED:"representation_ended",REPRESENTATION_FIRST_ENDED:"representation_first_ended",REQUESTED:"requested",REQUESTED_PLAYING:"requested_playing",SCRUBBED:"scrubbed",SEEKED:"seeked",SPLASH_DISPLAYED:"splash_displayed",STALE:"stale",STARTED_PLAYING:"started_playing",STARTED_RECEIVING_BYTES:"started_receiving_bytes",STOPPED_PLAYING:"stopped_playing",STREAM_RESET:"stream_reset",SURFACE_UPDATED:"surface_updated",SWITCHED_IMPLEMENTATION:"switched_implementation",UNMUTED:"unmuted",UNPAUSED:"unpaused",VIDEO_CHAINING_IMPRESSION:"video_chaining_impression",VIDEO_CHAINING_TAP:"video_chaining_tap",VIDEO_CLICKED_WITHIN_PLAYER:"video_clicked_within_player",VIDEO_PLAYER_SERVICE_DISCONNECTED:"video_player_service_disconnected",VIDEO_PLAYER_SERVICE_RECONNECTED:"video_player_service_reconnected",VIDEO_PLAYER_SERVICE_UNAVAILABLE:"video_player_service_unavailable",VIDEO_PLAYING:"video_playing",VIDEO_SKIP_AD:"video_skip_ad",VOLUME_CHANGED:"volume_changed",VOLUME_DECREASE:"volume_decrease",VOLUME_INCREASE:"volume_increase",WATCH_AND_SCROLL_CHANNEL_ENTERED:"watch_and_scroll_channel_entered",WATCH_AND_SCROLL_EXITED:"watch_and_scroll_exited",WATCH_AND_SCROLL_ICON_HIGHLIGHTED:"watch_and_scroll_icon_highlighted",WATCH_AND_SCROLL_ICON_UNHIGHLIGHTED:"watch_and_scroll_icon_unhighlighted",WATCH_AND_SCROLL_PAUSED:"watch_and_scroll_paused",LIVE_SEGMENT_LOAD_ERROR:"live_segment_load_error",MANIFEST_DATA_TYPE_ERROR:"manifest_data_type_error",MANIFEST_LOAD_ERROR:"manifest_load_error",PLAYER_WARNING:"player_warning",PLAYHEAD_FELL_BEHIND_ERROR:"playhead_fell_behind_error",STREAM_SEGMENT_LOAD_ERROR:"stream_segment_load_error",UNEXPECTED_SEGMENT_ERROR:"unexpected_segment_error",NETWORK_TIMEOUT:"network_timeout",VIDEO_LOGGING_SESSION_TIMEOUT:"video_logging_session_timeout",COMPLETION:"completion",VIEW:"view",PLAYED_FOR_THREE_SECONDS:"played_for_three_seconds",GUIDE_ENTERED:"guide_entered",GUIDE_EXITED:"guide_exited",HEADING_RESET:"heading_reset",SPHERICAL_FALLBACK_ENTERED:"spherical_fallback_entered",SPHERICAL_VIDEO_FALLBACK_CTA_CLICKED:"spherical_video_fallback_cta_clicked",VIEWPORT_ROTATED:"viewport_rotated",VIEWPORT_ZOOMED:"viewport_zoomed",BANZAI_OAUTH_GK_ERROR:"banzai_oauth_gk_error",BANZAI_OAUTH_PARSE_ERROR:"banzai_oauth_parse_error",BANZAI_OAUTH_SESSION_ERROR:"banzai_oauth_session_error",VIEWABILITY_CHANGED:"viewability_changed",PLAYER_SEEK:"player_seek"})}),null);
__d("R2D2VideoMetadata",["uuid"],(function(a,b,c,d,e,f,g){__p&&__p();var h=1e3,i=10;function a(a){"use strict";this.$1=a.video_id,this.$2=a.ad_client_token,this.$3=a.player_origin,this.$4=a.player_instance_key,this.$6=parseInt(a.playback_duration*h,i),this.$5=g()}a.prototype.toJSON=function(){"use strict";return{video_id:this.$1,ad_client_token:this.$2,player_origin:this.$3,player_instance_key:this.$4,r2d2_session_id:this.$5,duration_ms:this.getDurationMs()}};a.prototype.getVideoId=function(){"use strict";return this.$1};a.prototype.getDurationMs=function(){"use strict";return parseInt(this.$6,i)};a.prototype.setDurationMs=function(a){"use strict";this.$6=a};e.exports=a}),null);
__d("R2D2VideoEventValidationSummary",[],(function(a,b,c,d,e,f){__p&&__p();function a(){"use strict";this.$2=0,this.$1=new Map()}a.prototype.addEvent=function(event){"use strict";this.$1.has(event)||this.$1.set(event,0);var a=this.$1.get(event);this.$1.set(event,a+1);this.$2++};a.prototype.getEvents=function(){"use strict";return this.$1};a.prototype.getEventsCount=function(){"use strict";return this.$2};a.prototype.toJSON=function(){"use strict";var a={},b=[];this.$1.forEach(function(c,d){a[d]=c,b.push(d)});return{events_count:JSON.stringify(a),events_name:"['"+b.join("','")+"']"}};e.exports=a}),null);
__d("R2D2VideoWatchTimeSegment",[],(function(a,b,c,d,e,f){__p&&__p();function a(a,b){"use strict";this.$1=a,this.$2=b}a.prototype.getStartTimeMs=function(){"use strict";return this.$1};a.prototype.getEndTimeMs=function(){"use strict";return this.$2};e.exports=a}),null);
__d("R2D2VideoState",["R2D2VideoWatchTimeSegment"],(function(a,b,c,d,e,f,g){__p&&__p();function a(a,b){"use strict";this.$1=a,this.$2=b,this.reset()}a.prototype.startPlaying=function(a){"use strict";this.$3||(this.$3=!0,this.$6=a,this.$4||(this.$7=a))};a.prototype.stopPlaying=function(a){"use strict";this.$3&&(this.$3=!1,this.addPlaySegment(this.$6,a),this.$4||this.addPlaySegmentWithSound(this.$7,a))};a.prototype.addPlaySegmentHelper=function(a,b,c){"use strict";__p&&__p();if(b>=c)return;c=new g(b,c);var d=!1;for(var e=0;e<a.length;e++)if(a[e].getStartTimeMs()>b){a.splice(e,0,c);d=!0;break}d||a.push(c)};a.prototype.addPlaySegment=function(a,b){"use strict";this.addPlaySegmentHelper(this.$8,a,b)};a.prototype.addPlaySegmentWithSound=function(a,b){"use strict";this.addPlaySegmentHelper(this.$9,a,b)};a.prototype.setFinishedPlaying=function(){"use strict";this.$5=!0};a.prototype.getFinishedPlaying=function(){"use strict";return this.$5};a.prototype.setMuted=function(a){"use strict";this.$4||(this.$4=!0,this.$3&&this.addPlaySegmentWithSound(this.$7,a))};a.prototype.setUnmuted=function(a){"use strict";this.$4&&(this.$4=!1,this.$7=a)};a.prototype.getVideoId=function(){"use strict";return this.$1};a.prototype.getDurationMs=function(){"use strict";return this.$2};a.prototype.setDurationMs=function(a){"use strict";this.$2=a};a.prototype.getWatchedSegments=function(){"use strict";return this.$8};a.prototype.getWatchedSegmentsWithSound=function(){"use strict";return this.$9};a.prototype.reset=function(){"use strict";this.$3=!1,this.$4=!0,this.$5=!1,this.$6=0,this.$7=0,this.$8=[],this.$9=[]};e.exports=a}),null);
__d("R2D2VideoSession",["R2D2VideoState","R2D2VideoEventValidationSummary"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i=1e3,j=90*60*1e3;function a(a,b,c){"use strict";this.$4=new g(a.getVideoId(),a.getDurationMs()),this.$5=b,this.$6=c,this.$7=a,this.$8=[],this.$3=!1,this.$9=new h()}a.prototype.addEvent=function(event,a){"use strict";if(this.$10(event,a))return;this.$11(a);this.$5.processEvent(event,a,this.$4);this.$2=new Date();this.$3=!0;this.$9.addEvent(event);this.$12(event,a)};a.prototype.$11=function(a){"use strict";a=a.playback_duration*i;this.$7.setDurationMs(a);this.$4.setDurationMs(a)};a.prototype.$12=function(event,a){"use strict";var b={};b.Name=event;b.ClientTime=new Date();b.seq_num=a.seq_num;b.video_time_position=a.video_time_position;a.video_last_start_time_position!==undefined&&(b.video_last_start_time_position=a.video_last_start_time_position);this.$8.push(b)};a.prototype.$10=function(event,a){"use strict";if(this.$8.length<1)return!1;var b=this.$8[this.$8.length-1];return b.Name===event&&b.video_time_position==a.video_time_position};a.prototype.hasUpdates=function(){"use strict";return this.$3};a.prototype.hasExpired=function(){"use strict";return this.$2.getTime()<=Date.now()-j};a.prototype.recalculateDelta=function(){"use strict";var a=this.$6.getVideoStateSummary(this.$4),b=this.$6.calculateDelta(a,this.$1);this.$8.forEach(function(a){b.addDebugInfo(a)});this.$8=[];this.$1=a;this.$3=!1;return b};a.prototype.getMetadata=function(){"use strict";return this.$7};a.prototype.getDebugInfo=function(){"use strict";return this.$8};a.prototype.getEventValidationSummary=function(){"use strict";return this.$9};a.prototype.getStateVideoDurationMsForTesting=function(){"use strict";return this.$4.getDurationMs()};e.exports=a}),null);
__d("R2D2VideoStateMachine",["VideoPlayerLoggerEvent"],(function(a,b,c,d,e,f,g){__p&&__p();var h=1e3;function a(){"use strict"}a.prototype.processEvent=function(event,a,b){"use strict";__p&&__p();switch(event){case g.STARTED_PLAYING:case g.UNPAUSED:b.startPlaying(a.video_time_position*h);break;case g.FINISHED_PLAYING:b.stopPlaying(a.video_time_position*h);b.setFinishedPlaying();break;case g.PAUSED:b.stopPlaying(a.video_time_position*h);break;case g.MUTED:b.setMuted(a.video_time_position*h);break;case g.UNMUTED:b.setUnmuted(a.video_time_position*h);break}};e.exports=a}),null);
__d("R2D2FinishCountMetric",[],(function(a,b,c,d,e,f){__p&&__p();var g="finish_count";a.prototype.compute=function(a){"use strict";return a.getFinishedPlaying()?1:0};a.prototype.computeDelta=function(a,b){"use strict";return a-b};a.prototype.getMetricName=function(){"use strict";return g};function a(){"use strict"}e.exports=a}),null);
__d("R2D2UniqueTimeSpentMetric",[],(function(a,b,c,d,e,f){__p&&__p();var g="unique_time_spent_ms";a.prototype.compute=function(a){"use strict";return this.$1(a)};a.prototype.computeDelta=function(a,b){"use strict";return a-b};a.prototype.getMetricName=function(){"use strict";return g};a.prototype.$1=function(a){"use strict";__p&&__p();var b=0,c=0;a=a.getWatchedSegments();for(var d=0;d<a.length;d++){var e=a[d],f=e.getEndTimeMs();if(f>b){f=Math.max(b,e.getStartTimeMs());c+=e.getEndTimeMs()-f;b=e.getEndTimeMs()}}f=10;return parseInt(c,f)};function a(){"use strict"}e.exports=a}),null);
__d("R2D2PlayCountMetric",["R2D2UniqueTimeSpentMetric"],(function(a,b,c,d,e,f,g){__p&&__p();var h="play_count";a.prototype.compute=function(a){"use strict";var b=new g();return a.getWatchedSegments().length>0&&b.compute(a)>0?1:0};a.prototype.computeDelta=function(a,b){"use strict";return a-b};a.prototype.getMetricName=function(){"use strict";return h};function a(){"use strict"}e.exports=a}),null);
__d("R2D2VideoPlayRetention0to15s",[],(function(a,b,c,d,e,f){__p&&__p();var g="video_play_retention_0_to_15s",h=15,i=0,j=1e3;a.prototype.compute=function(a){"use strict";__p&&__p();var b=new Array(h-i+1);b.fill(0);a=a.getWatchedSegments();var c=10;for(var d=0;d<a.length;d++){var e=parseInt(a[d].getStartTimeMs()/j,c),f=parseInt(a[d].getEndTimeMs()/j,c);for(var e=e;e<=f;e++)if(e>=i&&e<=h)b[e-i]=1;else if(e>h)break}return b};a.prototype.computeDelta=function(a,b){"use strict";var c=[];if(a.length!==b.length)return c;for(var d=0;d<a.length;d++)c.push(a[d]-b[d]);return c};a.prototype.getMetricName=function(){"use strict";return g};function a(){"use strict"}e.exports=a}),null);
__d("R2D2VideoStateSummary",[],(function(a,b,c,d,e,f){__p&&__p();function a(){"use strict";this.$2=[],this.$1=new Map()}a.prototype.getMetricValue=function(a){"use strict";a=this.$1.get(a);return a===null||a===undefined?null:a};a.prototype.setMetricValue=function(a,b){"use strict";b!==null&&this.$1.set(a,b)};a.prototype.toJSON=function(){"use strict";var a={};this.$1.forEach(function(b,c){a[c]=this.$3(b)}.bind(this));if(this.$2.length>0){var b="Debug Details";a[b]=JSON.stringify(this.$2)}return a};a.prototype.addDebugInfo=function(a){"use strict";this.$2.push(a)};a.prototype.$3=function(a){"use strict";return Array.isArray(a)?"["+a.toString()+"]":a};e.exports=a}),null);
__d("R2D2MetricsHelper",[],(function(a,b,c,d,e,f){__p&&__p();a={isPercentageCovered:function(a,b,c){if(b===0)return!1;for(var d=0;d<c.length;d++){var e=c[d];if(e.getStartTimeMs()<=b*a&&e.getEndTimeMs()>=b*a)return!0}return!1}};e.exports=a}),null);
__d("R2D2ViewCountPercentage",["R2D2MetricsHelper"],(function(a,b,c,d,e,f,g){__p&&__p();var h="view_count_";function a(a){"use strict";this.percentFactor=a}a.prototype.compute=function(a){"use strict";return g.isPercentageCovered(this.percentFactor/100,a.getDurationMs(),a.getWatchedSegments())?1:0};a.prototype.computeDelta=function(a,b){"use strict";return a-b};a.prototype.getMetricName=function(){"use strict";return h+this.percentFactor};e.exports=a}),null);
__d("R2D2ViewCount100Metric",["R2D2ViewCountPercentage"],(function(a,b,c,d,e,f,g){var h,i=100;b=babelHelpers.inherits(a,g);h=b&&b.prototype;function a(){"use strict";h.constructor.call(this,i)}e.exports=a}),null);
__d("R2D2ViewCount25Metric",["R2D2ViewCountPercentage"],(function(a,b,c,d,e,f,g){var h,i=25;b=babelHelpers.inherits(a,g);h=b&&b.prototype;function a(){"use strict";h.constructor.call(this,i)}e.exports=a}),null);
__d("R2D2ViewCount50Metric",["R2D2ViewCountPercentage"],(function(a,b,c,d,e,f,g){var h,i=50;b=babelHelpers.inherits(a,g);h=b&&b.prototype;function a(){"use strict";h.constructor.call(this,i)}e.exports=a}),null);
__d("R2D2ViewCount75Metric",["R2D2ViewCountPercentage"],(function(a,b,c,d,e,f,g){var h,i=75;b=babelHelpers.inherits(a,g);h=b&&b.prototype;function a(){"use strict";h.constructor.call(this,i)}e.exports=a}),null);
__d("R2D2ViewCount95Metric",["R2D2ViewCountPercentage"],(function(a,b,c,d,e,f,g){var h,i=95;b=babelHelpers.inherits(a,g);h=b&&b.prototype;function a(){"use strict";h.constructor.call(this,i)}e.exports=a}),null);
__d("R2D2ViewCountMetric",["R2D2UniqueTimeSpentMetric"],(function(a,b,c,d,e,f,g){__p&&__p();var h="view_count",i=3e3,j=.97;a.prototype.compute=function(a){"use strict";var b=new g();return b.compute(a)>=i||a.getDurationMs()>0&&b.compute(a)>=a.getDurationMs()*j?1:0};a.prototype.computeDelta=function(a,b){"use strict";return a-b};a.prototype.getMetricName=function(){"use strict";return h};function a(){"use strict"}e.exports=a}),null);
__d("R2D2ViewCountRetentionGraphMetric",["R2D2ViewCountMetric"],(function(a,b,c,d,e,f,g){__p&&__p();var h="retention_graph",i=4,j=40,k=1e3,l=10;a.prototype.computeDelta=function(a,b){"use strict";if(a.length!==b.length)return[];var c=[];for(var d=0;d<a.length;d++)c.push(a[d]-b[d]);return c};a.prototype.getMetricName=function(){"use strict";return h};a.prototype.compute=function(a){"use strict";__p&&__p();var b=a.getDurationMs();if(isNaN(b)||b<=0)return[];b=new g().compute(a);var c=a.getDurationMs(),d=parseInt(((c-1)/(k*i)+1)*i,l);d=Math.min(d,j);var e=new Array(d+1);e.fill(0);if(b==0)return e;b=a.getWatchedSegments();for(var a=0;a<b.length;a++){var f=b[a],h=parseInt(d*f.getStartTimeMs()/c,l);f=parseInt(d*f.getEndTimeMs()/c,l);if(h<=f&&h>=0&&f<=d)for(var h=h;h<=f;h++)e[h]=1}return e};function a(){"use strict"}e.exports=a}),null);
__d("R2D2UniqueTimeSpentWithSoundMetric",[],(function(a,b,c,d,e,f){__p&&__p();var g="unique_time_spent_with_sound_ms";a.prototype.compute=function(a){"use strict";return this.$1(a)};a.prototype.computeDelta=function(a,b){"use strict";return a-b};a.prototype.getMetricName=function(){"use strict";return g};a.prototype.$1=function(a){"use strict";__p&&__p();var b=0,c=0;a=a.getWatchedSegmentsWithSound();for(var d=0;d<a.length;d++){var e=a[d],f=e.getEndTimeMs();if(f>b){f=Math.max(b,e.getStartTimeMs());c+=e.getEndTimeMs()-f;b=e.getEndTimeMs()}}f=10;return parseInt(c,f)};function a(){"use strict"}e.exports=a}),null);
__d("R2D2ViewCountWithSoundMetric",["R2D2UniqueTimeSpentWithSoundMetric"],(function(a,b,c,d,e,f,g){__p&&__p();var h="view_count_with_sound_on",i=3e3,j=.97;a.prototype.compute=function(a){"use strict";var b=new g();return b.compute(a)>=i||a.getDurationMs()>0&&b.compute(a)>=a.getDurationMs()*j?1:0};a.prototype.computeDelta=function(a,b){"use strict";return a-b};a.prototype.getMetricName=function(){"use strict";return h};function a(){"use strict"}e.exports=a}),null);
__d("R2D2VideoStateSummaryCalculator",["R2D2FinishCountMetric","R2D2PlayCountMetric","R2D2UniqueTimeSpentMetric","R2D2VideoPlayRetention0to15s","R2D2VideoStateSummary","R2D2ViewCount100Metric","R2D2ViewCount25Metric","R2D2ViewCount50Metric","R2D2ViewCount75Metric","R2D2ViewCount95Metric","R2D2ViewCountMetric","R2D2ViewCountRetentionGraphMetric","R2D2ViewCountWithSoundMetric"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){__p&&__p();function a(){"use strict";this.$1=[new i(),new h(),new q(),new j(),new g(),new r(),new m(),new n(),new o(),new p(),new l(),new s()]}a.prototype.getVideoStateSummary=function(a){"use strict";var b=new k();this.$1.forEach(function(c){return b.setMetricValue(c.getMetricName(),c.compute(a))});return b};a.prototype.calculateDelta=function(a,b){"use strict";__p&&__p();var c=new k();this.$1.forEach(function(d){var e=a.getMetricValue(d.getMetricName());if(b!==undefined){var f=b.getMetricValue(d.getMetricName());e=d.computeDelta(e,f)}c.setMetricValue(d.getMetricName(),e)});return c};e.exports=a}),null);
__d("R2D2Logger",["Banzai","R2D2VideoMetadata","R2D2VideoSession","R2D2VideoStateMachine","R2D2VideoStateSummaryCalculator","VideoPlayerStateBasedLoggingEvents","gkx"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m){__p&&__p();var n=10*1e3,o="video_player",p="r2d2_summary",q="r2d2_event_validation";function a(a){"use strict";this.$4=a,this.$2=new k(),this.$1=new Map()}a.prototype.setScriptPath=function(a){"use strict";this.$3=a};a.prototype.$5=function(a,b){"use strict";return a+":"+b};a.prototype.addEvent=function(event,a){"use strict";if(this.shouldNotLogEvent(event))return;var b=this.$5(a.player_instance_key,a.video_id),c=this.$1.get(b);c==null&&(c=new i(new h(a),new j(),this.$2),this.$1.set(b,c));c.addEvent(event,a);setTimeout(function(){return this.$6()}.bind(this),n)};a.prototype.$6=function(){"use strict";var a=[];this.$1.forEach(function(b,c){var d=null;b.hasUpdates()?d=this.createR2D2SummaryLoggingData(b.getMetadata(),b.recalculateDelta(),p):b.hasExpired()&&(a.push(c),d=this.createR2D2SummaryLoggingData(b.getMetadata(),b.getEventValidationSummary(),q));d!==null&&g.post(o,d)}.bind(this));a.forEach(function(a){this.$1["delete"](a)}.bind(this))};a.prototype.createR2D2SummaryLoggingData=function(a,b,event){"use strict";a=Object.assign(a.toJSON(),b.toJSON());return{event:event,logData:a,scriptPath:this.$3,source:this.$4}};a.prototype.shouldLogForR2D2=function(){"use strict";return m("676938")};a.prototype.shouldNotLogEvent=function(event){"use strict";var a=new Set(l.StateBasedLoggingEventNames);return!a.has(event)};e.exports=a}),null);
__d("VideoPlayerLoggerErrorStates",[],(function(a,b,c,d,e,f){e.exports={PLAYBACK_FAILURE:"playback_failure",PLAYER_FAILURE:"player_failure"}}),null);
__d("VideoPlayerLoggerErrors",[],(function(a,b,c,d,e,f){e.exports={ENTERED_FALLBACK:"entered_fallback",ERROR_CALLING_FLASH:"error_calling_flash"}}),null);
__d("VideoPlayerLoggerFallbackReasons",[],(function(a,b,c,d,e,f){e.exports={TIMEOUT:"timeout",FLASH_ERROR:"flash_error",FLASH_UNAVAILABLE:"flash_unavailable"}}),null);
__d("VideoPlayerLoggerPlayerStates",[],(function(a,b,c,d,e,f){e.exports={STARTED:"started",UNPAUSED:"unpaused"}}),null);
__d("VideoPlayerLoggerSource",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ADS:"ads",ANIMATED_IMAGE_SHARE:"animated_image_share",ASSET:"asset",BALLOT:"ballot",BROADCAST_REQUEST_ATTACHMENT:"broadcast_request_attachment",CAMERA_POST:"camera_post",CANDIDATE_VIDEOS:"candidate_videos",CHAINED:"chained",CHAINED_SUGGESTION:"chained_suggestion",CHANNEL:"channel",CONTINUE_WATCHING_RECOMMENDATION:"continue_watching_recommendation",EMBEDDED:"embedded",EMBEDDED_PAGE_PLUGIN:"embedded_page_plugin",EMBEDDED_VIDEO:"embedded_video",EMBEDDED_VIDEO_FROM_UFI:"embedded_video_from_ufi",EMBEDDED_VIDEO_PREVIEW:"embedded_video_preview",GAMEROOM_LIVE_VIDEO_HERO_BANNER:"gameroom_live_video_hero_banner",GAMEROOM_LIVE_VIDEO_TAB:"gameroom_live_video_tab",GAMEROOM_LIVE_VIDEO_THUMBNAIL:"gameroom_live_video_thumbnail",GAMES_VIDEO_LIVE_RECOMMENDATION:"games_video_live_recommendation",GAMES_VIDEO_HOME:"games_video_home",GAMES_VIDEO_HOME_HERO:"games_video_home_hero",GAMES_VIDEO_HOME_STREAMER_HUB:"games_video_home_streamer_hub",GAMES_VIDEO_SINGLE_GAME:"games_video_single_game",GAMES_VIDEO_SEARCH_UNIT:"games_video_search_unit",GAMES_VIDEO_SOCIAL_PLUGIN:"games_video_social_plugin",GAMES_VIDEO_HUB:"games_video_hub",GAMES_VIDEO_HUB_REDIRECT_NOTIFICATION:"games_video_hub_redirect_notification",GAMES_VIDEO_HUB_REDIRECT_UNKNOWN:"games_video_hub_redirect_unknown",GROUP_LIVE_VIDEO_MODULE:"group_live_video_module",HTML5:"html5",INLINE:"inline",INSIGHTS:"insights",INTERN_CURATION:"intern_curation",INTERN_EXAMPLE:"intern_example",ISSUES_MODULE:"issues_module",LIVE_BEEPER:"live_beeper",LIVE_CONTROL_PANEL:"live_control_panel",LIVE_MAP:"live_map",LIVE_MAP_LISTVIEW:"live_map_listview",LIVE_MAP_SIDEBAR:"live_map_sidebar",LIVE_MAP_TOOLTIP:"live_map_tooltip",LIVE_MAP_TOOLTIP_FROM_LISTVIEW:"live_map_tooltip_from_listview",LIVE_MAP_TOOLTIP_FROM_MAP:"live_map_tooltip_from_map",LIVE_MAP_TOOLTIP_FROM_WEBGL:"live_map_tooltip_from_webgl",LIVE_VIDEO_BROADCAST:"live_video_broadcast",LIVE_VIDEO_PREVIEW:"live_video_preview",LIVING_ROOM:"living_room",LIVING_ROOM_COMMENTATING:"living_room_commentating",LIVING_ROOM_RECAP_FULLSCREEN:"living_room_recap_fullscreen",LIVING_ROOM_RECAP_INLINE:"living_room_recap_inline",LOOKBACK:"lookback",MEDIA_COLLAGE:"media_collage",MEMORY_LEAK_TEST:"memory_leak_test",MESSAGING:"messaging",MISC:"misc",MOBILE:"mobile",NOT_SPECIFIED_PLEASE_FIX:"not_specified_please_fix",OFFERS_DETAIL:"offers_detail",PAGE_LIVE_VIDEO_MODULE:"page_live_video_module",PAGES_FINCH_MAIN_VIDEO:"pages_finch_main_video",PAGES_FINCH_THUMBNAIL_VIDEO:"pages_finch_thumbnail_video",PAGES_FINCH_TRAILER:"pages_finch_trailer",PAGES_VIDEO_SET:"pages_video_set",PAGES_MESSAGING_VIDEO:"pages_messaging_video",PAGES_COVER:"pages_cover",PAGES_TIMELINE_PAGES_COVER:"pages_timeline_pages_cover",PAGES_COVER_HOVER:"pages_cover_hover",PAGES_HOME_HERO:"pages_home_hero",VIDEO_PAGE_SPOTLIGHT_UNIT:"video_page_spotlight_unit",VIDEO_PAGE_VIDEO_LIST:"video_page_video_list",PERMALINK:"permalink",PROFILE_OVERVIEW:"profile_overview",PROFILE_COVER:"profile_cover",PROFILE_VIDEO:"profile_video",PROFILE_VIDEO_HOVERCARD:"profile_video_hovercard",PROFILE_VIDEO_THUMB:"profile_video_thumb",REPORT_FLOW:"report_flow",REVIEW:"review",SEARCH_LIVE_VIDEO_MODULE:"search_live_video_module",SERP_VIDEOS_TAB:"serp_videos_tab",SLIDESHOW:"slideshow",SNOWLIFT:"snowlift",SRT_REVIEW:"srt_review",TAHOE:"tahoe",TOPIC_CHANNEL_LIVING_ROOM:"topic_channel_living_room",TOPIC_GAMING:"topic_gaming",TRAILER_OG_ATTACHMENT:"trailer_og_attachment",TRAILER_TIMELINE_COLLECTIONS:"trailer_timeline_collections",TRAILER_TIMELINE_UNIT:"trailer_timeline_unit",TRIVIA_GAME_ADMIN_DASHBOARD:"trivia_game_admin_dashboard",TV:"tv",USER_VIDEO_TAB:"user_video_tab",VIDEO_COPYRIGHT_PREVIEW:"video_copyright_preview",VIDEO_HOME_INLINE:"video_home_inline",VIDEO_HOME_EXPLORE:"discover",VIDEO_HOME_WATCHLIST:"watchlist",VIDEO_INLINE_CHAINING:"video_inline_chaining",VIDEOHUB_FEATURED:"videohub_featured",VIDEOHUB_LIVE:"videohub_live",VIDEOHUB_PLAYLIST:"videohub_playlist",WATCH_SCROLL:"watch_scroll",UFI_COMMENT_ATTACHMENT:"ufi_comment_attachment",LIVE_AUTOPLAY_WATCH_AND_SCROLL:"live_autoplay_watch_and_scroll",GAMES_VIDEO_STREAMER_SEARCH_UNIT:"games_video_streamer_unit",GAMES_STREAMER_DASHBOARD:"games_streamer_dashboard",ADS_PREVIEW:"ads_preview",VIDEO_PAGE_UNSPECIFIED:"video_page_unspecified",SPOTLIGHT_LIVE:"spotlight_live",SPOTLIGHT_FEATURED:"spotlight_featured",SPOTLIGHT_POPULAR:"spotlight_popular",SPOTLIGHT_UNKNOWN:"spotlight_unknown",VIDEOS_CARD:"videos_card",VIDEOS_TAB:"videos_tab",PLAYLISTS_TAB:"playlists_tab",PLAYLISTS_CARD:"playlists_card",PLAYLIST_PAGE:"playlist_page",CIVIC_PROPOSAL:"civic_proposal"})}),null);
__d("VideoPlayerLogger",["Banzai","FBLogger","R2D2Logger","VideoPlayerExperiments","VideoPlayerHTML5Experiments","VideoPlayerLoggerErrors","VideoPlayerLoggerErrorStates","VideoPlayerLoggerEvent","VideoPlayerLoggerFallbackReasons","VideoPlayerLoggerPlayerStates","VideoPlayerLoggerSource","invariant","performanceAbsoluteNow"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){"use strict";__p&&__p();var t=k.useBanzaiVitalForLive,u=k.discerningAbandonStallLogging,v="video_player",w=5e3,x=function(){return k.useMonotonicallyIncreasingTimers?s():Date.now()};function a(a,b){this.$2=a,this.$3=null,this.$6={},this.$4=b,this.$8=0,this.$9=0,this.$10=0,this.$11=0,this.$7=[],this.$19=0,this.$20=0,this.$12=0,this.$27=!1,this.$16=!1,this.$29(),this.$30(),this.$28=new i(this.$2)}a.prototype.updateSource=function(a){this.$2=a};a.prototype.getSource=function(){return this.$2};a.prototype.logEvent=function(event,a){__p&&__p();a=babelHelpers["extends"]({},a,this.$4);a.initial_event=!Object.prototype.hasOwnProperty.call(this.$6,event);Object.prototype.hasOwnProperty.call(a,"time_ms")||(a.time_ms=x());Object.prototype.hasOwnProperty.call(a,"time")||(a.time=Math.round(a.time_ms/1e3));a.is_stalling=this.$31();a.error_user_info=this.$32(a.error_user_info);this.$3&&Object.assign(a,this.$3);switch(event){case n.PAUSED:case n.FINISHED_PLAYING:if(this.$24){var b=this.$24,c=b.getABREvaluation();a.ideal_samples=c.idealSamples;a.conservative_samples=c.conservativeSamples;a.aggressive_samples=c.aggressiveSamples;a.conservative_resolution_constrained_samples=c.conservativeResolutionConstrainedSamples;a.last_quality_switch_reason=c.lastQualitySwitchReason;a.reason&&b.setLastQualitySwitchReason(a.reason)}c=typeof this.$25==="function"&&this.$25();b=typeof this.$26==="function"&&this.$26();typeof b==="number"&&typeof c==="number"&&(a.dropped_frame_count=c,a.total_frame_count=b);break}switch(event){case n.STARTED_PLAYING:case n.UNPAUSED:this.$27=!0;break;case n.FINISHED_PLAYING:case n.ERROR:case n.PAUSED:this.$27=!1;break}switch(event){case n.REQUESTED_PLAYING:this.$29();this.$33();this.$6[n.STARTED_PLAYING]?a.state=p.UNPAUSED:a.state=p.STARTED;break;case n.STARTED_PLAYING:case n.UNPAUSED:case n.FINISHED_PLAYING:case n.CANCELLED_REQUESTED_PLAYING:case n.ERROR:case n.PAUSED:case n.REPRESENTATION_ENDED:case n.HEART_BEAT:if(event===n.ERROR&&j.disableStallLoggingForError)break;if(event==n.REPRESENTATION_ENDED&&!this.$6[n.STARTED_PLAYING])break;if(event===n.HEART_BEAT&&(!this.$6[n.STARTED_PLAYING]||!k.heartbeatUpdateWatchTimeV2||this.$31()))break;event===n.HEART_BEAT&&(a.v2_heart_beat=!0);(event===n.STARTED_PLAYING||event===n.UNPAUSED)&&(this.$12=a.time_ms,this.$34());if(event===n.ERROR&&a.state!==m.PLAYBACK_FAILURE)break;event===n.CANCELLED_REQUESTED_PLAYING&&(this.$6[n.STARTED_PLAYING]?a.state=p.UNPAUSED:a.state=p.STARTED);this.$35();this.$36();(event===n.PAUSED||event===n.FINISHED_PLAYING)&&(u&&event===n.FINISHED_PLAYING&&this.$34(),a.recent_stalls_count=this.$37());this.$38();this.$39(a);this.$40(a);this.$30();u&&this.$34();this.$29();break}c={logData:a,event:event,scriptPath:this.$1,source:this.$2};event||h("video").warn("Missing event name");this.$6[event]=!0;if(this.$2===q.ANIMATED_IMAGE_SHARE)return null;a.ad_client_token||t&&a.playback_is_live_streaming?g.post(v,c,g.VITAL):k.useVitalForClosing&&(event===n.PAUSED||event===n.FINISHED_PLAYING||event===n.HEART_BEAT)?g.post(v,c,g.VITAL):k.useVitalForOpening&&(event===n.UNPAUSED||event===n.STARTED_PLAYING)?g.post(v,c,g.VITAL):g.post(v,c);this.$28.shouldLogForR2D2()&&this.$28.addEvent(event,a);return c};a.prototype.setScriptPath=function(a){this.$1=a,this.$28.setScriptPath(a)};a.prototype.setFTData=function(a){this.$3=a};a.prototype.setABRQualityTracker=function(a){this.$24=a};a.prototype.setFrameCountGetters=function(a,b){this.$25=a,this.$26=b};a.prototype.startBuffering=function(a){this.$33(a)};a.prototype.endBuffering=function(){this.$36(),this.$41(),this.$35(),this.$38()};a.prototype.startInterrupt=function(){this.$42()};a.prototype.endInterrupt=function(){this.$36(),this.$41()};a.prototype.$31=function(){return this.$15>0};a.prototype.$33=function(a){if(this.$31())return;this.$16=this.$27;this.$15=Date.now();a!==undefined&&this.$6[n.STARTED_PLAYING]&&(this.$17=a)};a.prototype.$42=function(){if(this.$43())return;this.$21=Date.now()};a.prototype.$43=function(){return this.$21>0};a.prototype.$44=function(){return!this.$43()?0:Date.now()-this.$21};a.prototype.$45=function(){return this.$31()?Date.now()-this.$15:0};a.prototype.$36=function(){if(this.$43()){var a=this.$44();this.$22+=a;this.$20+=a;this.$23+=1;this.$19+=1}};a.prototype.$41=function(){this.$43()&&(this.$21=0)};a.prototype.$30=function(){this.$22=0,this.$23=0,this.$41()};a.prototype.$35=function(){__p&&__p();if(this.$31()){var a=this.$45();this.$17!==null&&(this.$18=a);this.$14+=a;this.$9+=a;this.$13++;this.$8++;this.$16&&(this.$11+=a,this.$10++,this.$16=!1);u&&this.$7.push(x())}};a.prototype.$38=function(){this.$31()&&(this.$15=0)};a.prototype.$32=function(a){return a&&typeof a==="object"?JSON.stringify(a):a};a.prototype.getCumulativeStallCount=function(){return this.$8};a.prototype.getCumulativeInPlayStallCount=function(){return this.$10};a.prototype.getStallCount=function(){return this.$13};a.prototype.getCumulativeStallTime=function(){return this.$9+this.$45()};a.prototype.getCumulativeInPlayStallTime=function(){return this.$11+(this.$16?this.$45():0)};a.prototype.getCumulativeInterruptCount=function(){return this.$19};a.prototype.getCumulativeInterruptTime=function(){return this.$20+this.$44()};a.prototype.$39=function(a){a.stall_time=Math.max(0,this.$14),a.stall_count=this.$13,this.$18&&(a.first_stall_time=this.$18,a.first_stall_start_position=this.$17)};a.prototype.$40=function(a){a.interrupt_time=Math.max(0,this.$22),a.interrupt_count=this.$23};a.prototype.$37=function(){var a=x(),b=a-w;this.$7=this.$7.filter(function(a){return a>=b});u||this.$13>0&&this.$7.push(a);return this.$7.length};a.prototype.$29=function(){this.$14=0,this.$15=0,this.$13=0,this.$17=null,this.$18=0};a.prototype.$34=function(){this.$7=[]};a.prototype.getFTdata=function(){return this.$3};a.Sources=q;a.Errors=l;a.FallbackReasons=o;a.ErrorStates=m;a.PlayerStates=p;e.exports=a}),null);
__d("VideoPlayerLoggerEventField",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ABANDON_IN_STALL:"abandon_in_stall",ACCESS_TOKEN:"access_token",AD_CLIENT_TOKEN:"ad_client_token",AD_ID:"ad_id",API_CONFIG:"api_config",APP_ID:"app_id",APP_VERSION:"app_version",AUDIO_CHANNEL_LAYOUT:"audio_ch_conf",AUTH_FLAG:"auth_flag",AUTOPLAY_ELIGIBLE:"autoplay_eligible",AUTOPLAY_FAILURE_REASONS:"autoplay_failure_reasons",AUTOPLAY_SETTING:"autoplay_setting",AVAILABLE_QUALITIES:"available_qualities",BATTERY_LEVEL:"battery_level",BROADCASTER_ORIGIN:"broadcaster_origin",BUILD_VERSION:"build_version",CAPTION_STATE:"caption_state",CAST_CLIENT_APP_ID:"cast_client_app_id",CAST_CLIENT_APP_VERSION:"cast_client_app_version",CAST_SESSION_ID:"cast_session_id",CHANNEL_ELIGIBILITY:"channel_eligibility",CHROMECAST_RECEIVER_AVAILABLE:"chromecast_receiver_available",CONNECTIVITY_SUBTYPE:"connectivity_subtype",CONNECTIVITY_TYPE:"connectivity_type",CREATOR_APP_ID:"creator_app_id",CURRENT_VIEWABILITY_PERCENTAGE:"current_viewability_percentage",VIEWABILITY_DEBUG_REASON:"viewability_debug_reason",CURRENT_VOLUME:"current_volume",DATA_CONNECTION_QUALITY:"data_connection_quality",DEBUG_REASON:"debug_reason",DEVICE_ID:"device_id",DURATION:"duration",ERROR:"error",ERROR_CODE:"error_code",ERROR_DESCRIPTION:"error_description",ERROR_DOMAIN:"error_domain",ERROR_USER_INFO:"error_user_info",EVENT_NAME:"name",EVENT_BATCH:"batch",EXTERNAL_LOG_ID:"external_log_id",EXTERNAL_LOG_TYPE:"external_log_type",FB_BANDWIDTH:"fb_bandwidth",FEED_POSITION:"feed_position",FIRST_STALL_START_POSITION:"first_stall_start_position",FIRST_STALL_TIME:"first_stall_time",FT:"ft",GKS:"gks",HAS_BEEN_LIVE:"has_been_live",HD:"hd",HEADSET_STATE:"headset_state",HLS_CURRENT_SEGMENT_URI:"current_segment_uri",HLS_LOADING_SEGMENT_URI:"loading_segment_uri",HLS_SEGMENT_URI:"segment_uri",HLS_STREAM_DATA:"stream_data",HOST_VIDEO_ID:"host_video_id",INLINE:"inline",INSTREAM_VIDEO_AD_BREAK_INDEX:"instream_video_ad_break_index",INSTREAM_VIDEO_AD_BREAK_VIDEO_ID:"instream_video_ad_break_video_id",INTERRUPT_COUNT:"interrupt_count",INTERRUPT_TIME:"interrupt_time",IS_ABR_ENABLED:"is_abr_enabled",IS_AUTO_ADVANCED:"is_auto_advanced",IS_FREE:"is_free",IS_HDS:"is_hds",IS_LIVE_STREAMING:"is_live_streaming",IS_SHOW_VIDEO:"is_show_video",IS_STALLING:"is_stalling",IS_TEMPLATED_MANIFEST:"is_templated_manifest",LAST_VIEWABILITY_PERCENTAGE:"last_viewability_percentage",NEXT_REPRESENTATION_ID:"next_representation_id",ORIGINAL_VIDEO_ID:"original_video_id",OUTER_STORY_IDENTIFIER:"outer_story_identifier",PLAYBACK_BROADCAST_STATUS:"playback_broadcast_status",PLAYBACK_DURATION:"playback_duration",PLAYBACK_IS_LIVE_STREAMING:"playback_is_live_streaming",PLAYER_FORMAT:"player_format",PLAYER_ORIGIN:"player_origin",PLAYER_STATE:"player_state",PLAYER_SUBORIGIN:"player_suborigin",PLAYER_VERSION:"player_version",POSITION_IN_CHANNEL:"position_in_channel",POSITION_IN_UNIT:"position_in_unit",PROJECTION:"projection",QES:"qes",REACTION_VIDEO_CHANNEL_ID:"video_channel_id",REACTION_VIDEO_CHANNEL_TYPE:"reaction_video_channel_type",REACTION_VIDEO_CHANNEL_SUBTYPE:"reaction_video_channel_subtype",REASON:"reason",RECENT_STALLS_COUNT:"recent_stalls_count",RECENT_STALLS_TOTAL_COUNT:"recent_stalls_total_count",REFERRER:"referrer",REPRESENTATION_ID:"representation_id",RESOURCE_URL:"resource_url",SAVED_OFFLINE:"saved_offline",SEQ_NUM:"seq_num",SESSION_START_TIME:"session_start_time",SHOW_VIDEO_TYPE:"show_video_type",SOURCE:"source",SPHERICAL_FALLBACK_TYPE:"spherical_fallback_type",STALL_COUNT:"stall_count",STALL_INFO_JSON:"stall_info_json",STALL_TIME:"stall_time",STATE:"state",STREAM_TYPE:"stream_type",STREAMING_FORMAT:"streaming_format",TIME:"time",TIME_DELTA:"time_delta",TIME_MS:"time_ms",TIME_SINCE_CREATION:"time_since_creation",TIME_SPENT_ID:"time_spent_id",TIME_UNTIL_INTERRUPT:"time_until_interrupt",TOTAL_STALL_TIME:"total_stall_time",TRACKING:"tracking",TV_SESSION_ID:"tv_session_id",UNIQUE_TIME_SPENT_MS:"unique_time_spent_ms",UNIT_POSITION:"unit_position",UPSTREAM_PLAYER_SOURCE:"upstream_player_source",USER_ASN:"user_asn",USER_ID:"user_id",V2_HEART_BEAT:"v2_heart_beat",VIDEO_BANDWIDTH:"video_bandwidth",VIDEO_CHAINING_DEPTH_LEVEL:"video_chaining_depth_level",VIDEO_CHAINING_SESSION_ID:"video_chaining_session_id",VIDEO_CHANNEL_ID:"video_channel_id",VIDEO_CHANNEL_TYPE:"video_channel_type",VIDEO_HOME_SESSION_ID:"video_home_session_id",VIDEO_ID:"video_id",VIDEO_LAST_START_TIME_POSITION:"video_last_start_time_position",VIDEO_PLAY_REASON:"video_play_reason",VIDEO_PLAYER_HEIGHT:"video_player_height",VIDEO_PLAYER_WIDTH:"video_player_width",VIDEO_QUALITY:"video_quality",VIDEO_TIME_POSITION:"video_time_position",VIDEO_BUFFER_END_POSITION:"video_buffer_end_position",VIDEO_TIME_RATIO:"video_time_ratio",VIEWABILITY_PERCENTAGE:"viewability_percentage",WATCH_AND_GO_SESSION_ID:"watch_and_go_session_id",FEED_AGGREGATION_TYPE:"feed_aggregation_type",HAS_BLOCKED_PAUSED_REPRESENTATION_ENDED:"has_blocked_paused_representation_ended",IS_LIVE_VIDEO_REWOUND:"is_live_video_rewound",PLAYER_INSTANCE_KEY:"player_instance_key",SOURCE_CREATION_TIME:"source_creation_time",TRANSCODING_METHOD:"transcoding_method",VIDEO_INIT_SEQ_ID:"video_init_seq_id",VIDEO_PLAY_SUBREASON:"video_play_subreason",IS_DEEPLINK_USER:"is_deeplink_user",IS_FIRST_TIME_USER:"is_first_time_user",VIDEO_CLIP_START_TIME_MS:"video_clip_start_time_ms",AD_BREAK_VIEWER_SESSION_ID:"ad_break_viewer_session_id",SEEK_FROM_VIDEO_TIME_POSITION:"seek_from_video_time_position",LIVING_ROOM_SESSION_ID:"living_room_session_id",VIOLATION_FOUND:"violation_found",EVENT_SEQ_NUM:"event_seq_num",DETECTION_ID:"detection_id",ACTUAL_VIEWABILITY_VALUE:"actual_viewability_value",DROPPED_FRAME_COUNT:"dropped_frame_count",TOTAL_FRAME_COUNT:"total_frame_count",VISITATION_ID:"visitation_id",PIGEON_SESSION_ID:"pigeon_session_id",IS_FBMS:"is_fbms",FORCE_SAMPLE_LOGGING:"force_sample_logging",IS_ADS_PREVIEW:"is_ads_preview",IS_INJECTED_ADS:"is_injected_ads",AD_BREAK_AD_ID:"ad_break_ad_id",DASH_MANIFEST_AVAILABLE:"dash_manifest_available",IS_SERVABLE_VIA_FBMS:"is_servable_via_fbms",PLAYER_SUBORIGIN_DERIVED:"player_suborigin_derived",DEVICE_TYPE:"device_type",IFRAME_EMBED_REFERRER:"iframe_embed_referrer",AUDIO_REPRESENTATION_ID:"audio_representation_id",PLAYBACK_IS_FIRST_VIDEO:"playback_is_first_video",LAST_SCROLL_DIRECTION:"last_scroll_direction",BLACKSCREEN_DURATION_MS:"blackscreen_duration_ms"})}),null);
__d("OzExperimentsConfig",[],(function(a,b,c,d,e,f){__p&&__p();function a(a){"use strict";this.$1=a||{}}a.prototype.getBool=function(a,b){"use strict";return typeof this.$1[a]==="boolean"?this.$1[a]:b};a.prototype.getNumber=function(a,b){"use strict";return typeof this.$1[a]==="number"?this.$1[a]:b};a.prototype.getString=function(a,b){"use strict";return typeof this.$1[a]==="string"?this.$1[a]:b};e.exports=a}),null);
__d("oz-player/shims/OzURI",["URI"],(function(a,b,c,d,e,f){"use strict";e.exports=b("URI")}),null);
__d("oz-player/loggings/OzDevConsolePerfLogger",["oz-player/shims/OzURI","oz-player/loggings/OzOperationLoggerBase","oz-player/loggings/OzPerfLoggerProviderBase"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l;function a(){var a=new g(window.location.href);a=a.getQueryData();return!!a.oz_dev}function m(){}function n(){}function o(a,b){return Math.floor(a).toString().padStart(b,"0")}function p(a,b){b===void 0&&(b=null);var c=function(a){return o(a.getHours(),2)+":"+o(a.getMinutes(),2)+":"+o(a.getSeconds(),2)+" "+o(a.getMilliseconds(),3)},d=b?b-a:0;return"["+c(a)+(b?" - "+c(b):"")+" ("+d+" ms)]"}function q(a){return a==="failed"?n:m}j=babelHelpers.inherits(r,i);j&&j.prototype;r.prototype.createOperationLogger=function(a){return new s(a)};r.prototype.createLoggerProvider=function(){return new r()};function r(){j.apply(this,arguments)}k=babelHelpers.inherits(s,h);l=k&&k.prototype;s.prototype.log=function(){l.log.call(this);var a=this.getClientTimeBegin()||0,b=this.getClientTimeEnd();b=b?new Date(b):null;var c=this.getResult()||"success",d=this.getType(),e=this.getInitiator(),f=this.getResource();q(c)("["+c+"]",this.getOperationName()+": "+p(new Date(a),b),d?""+d:"",e||"",f||"")};function s(){k.apply(this,arguments)}e.exports={OzDevConsolePerfLoggerProvider:r,OzDevConsoleOperationLogger:s}}),null);
__d("oz-player/loggings/OzOperationLoggerObserver",["oz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(){this.$1=new g()}a.prototype.observe=function(a,b){var c;a=a.map(function(a){var c=a.setOperationLoggedListener(function(a){b.getOperationLogger(a.getOperationName()).setClientTimeBegin(a.getClientTimeBegin()||0).setClientTimeEnd(a.getClientTimeEnd()||0).setLength(a.getLength()).setResult(a.getResult()||"success").setInitiator(a.getInitiator()).setType(a.getType()).log()});a.activate();return c});(c=this.$1).addSubscriptions.apply(c,a)};a.prototype.destroy=function(){this.$1.release()};e.exports=a}),null);
__d("oz-player/utils/OzError",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;b=babelHelpers.inherits(a,Error);g=b&&b.prototype;function a(a){g.constructor.call(this,a.description),this.$OzError1=a,this.name=a.type}a.prototype.getExtra=function(){return this.$OzError1.extra||{}};a.prototype.getType=function(){return this.$OzError1.type};a.prototype.getDescription=function(){return this.$OzError1.description};e.exports=a}),null);
__d("oz-player/manifests/OzRepresentation",["oz-player/shims/ozvariant","oz-player/utils/OzError"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();function i(a,b,c,d,e,f,g,h){this.$4=[],this.$1=a,this.$7=b,this.$2=c,this.$3=d,this.$5=e,this.$6=f,this.$8=g,this.$9=h}i.prototype.getID=function(){return this.$7};i.prototype.getBandwidth=function(){return this.$6};i.prototype.getMimeCodecs=function(){return this.$2};i.prototype.getInitSegment=function(){return this.$3};i.prototype.getCustomFieldFirstSegment=function(){return this.$8};i.prototype.updateWith=function(a){a instanceof i||g(0,229),this.$5.updateWith(a.$5)};i.prototype.getSegmentByTime=function(a){return this.$5.getSegmentByTime(a)};i.prototype.getSegment=function(a){return this.$5.getSegment(a)};i.prototype.getSegmentAfter=function(a){return this.$5.getSegmentAfter(a)};i.prototype.isEndingSegment=function(a){return this.$5.isEndingSegment(a)};i.prototype.addUpdateListener=function(a){return this.$5.addUpdateListener(a)};i.prototype.getTimeRanges=function(){return this.$5.getTimeRanges()};e.exports=i}),null);
__d("oz-player/manifests/OzVideoRepresentation",["oz-player/manifests/OzRepresentation"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;b=babelHelpers.inherits(a,g);h=b&&b.prototype;function a(a,b,c,d,e,f,g,i,j,k){h.constructor.call(this,a,b,c,d,e,f,g,i),this.$OzVideoRepresentation5=null,this.$OzVideoRepresentation1=j,this.$OzVideoRepresentation2=k,this.$OzVideoRepresentation4=i,this.$OzVideoRepresentation3=a}a.prototype.getWidth=function(){return this.$OzVideoRepresentation1};a.prototype.getHeight=function(){return this.$OzVideoRepresentation2};a.prototype.getQualityLabel=function(){if(this.$OzVideoRepresentation5!==null&&this.$OzVideoRepresentation5!==undefined)return this.$OzVideoRepresentation5;var a=this.$OzVideoRepresentation4?this.$OzVideoRepresentation4.qualityLabel:null;a&&(this.$OzVideoRepresentation5=a(this.$OzVideoRepresentation3));(this.$OzVideoRepresentation5==null||this.$OzVideoRepresentation5=="")&&(this.$OzVideoRepresentation5=this.getHeight().toString()+"p");return this.$OzVideoRepresentation5||""};e.exports=a}),null);
__d("oz-player/media_source/OzMediaSeekableRangeManager",["oz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a,b){__p&&__p();this.$5=function(){var a=this.$2;if(!a)return;a=a.getTimeRanges();if(!a.length)return;a=a[a.length-1];var b=this.$1.getMediaSource();this.$4.getBool("update_media_source_duration",!1)&&(b.duration===Infinity||b.duration<a.endTime||isNaN(b.duration))&&this.$1.updateDuration(a.endTime)}.bind(this),this.$1=a,this.$3=new g(),this.$4=b,this.$5()}a.prototype.setTimeRangeProvider=function(a){this.$3.release(),this.$3.engage(),this.$3.addSubscriptions(a.addUpdateListener(this.$5)),this.$2=a};a.prototype.destroy=function(){this.$3.release()};e.exports=a}),null);
__d("oz-player/mocks/MockRequestParamCreator",["oz-player/shims/OzURI"],(function(a,b,c,d,e,f,g){"use strict";a.prototype.createRequestParam=function(a,b){a=new g(a);var c=b.startByte,d=b.endByte;c===0&&(d===null||d===undefined)||(a=a.addQueryData({bytestart:b.startByte}),d!==null&&d!==undefined&&(a=a.addQueryData({byteend:d})));return{uri:a,http:{credentials:"same-origin"}}};function a(){}e.exports=a}),null);
__d("oz-player/configs/OzGlobalConfig",[],(function(a,b,c,d,e,f){"use strict";var g=null;a={getBool:function(a,b){return g?g.getBool(a,b):b},getNumber:function(a,b){return g?g.getNumber(a,b):b},getString:function(a,b){return g?g.getString(a,b):b},setGlobalConfig:function(a){g=a}};e.exports=a}),null);
__d("oz-player/networks/OzBandwidthUtils",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){var b=0;for(var c=0;c<a.length;c++)b+=a[c].bytes*8e3/a[c].timeInMs;return b/a.length}function h(a){var b=g(a),c=0;for(var d=0;d<a.length;d++)c+=Math.pow(a[d].bytes*8e3/a[d].timeInMs-b,2);return Math.round(Math.sqrt(c/a.length))}function i(a,b){b=Math.exp(Math.log(.5)/b);var c=0,d=0;for(var e=0;e<a.length;e++){var f=a[e].bytes*8e3/a[e].timeInMs,g=Math.pow(b,a[e].timeInMs/1e3);c=f*(1-g)+c*g;d+=a[e].timeInMs/1e3}return Math.round(c/(1-Math.pow(b,d)))}function j(a,b){var c=g(a),d=[];for(var e=0;e<a.length;e++)Math.abs(c-a[e].bytes*8e3/a[e].timeInMs)<b&&d.push(a[e]);return d}function a(a,b,c,d){var e=h(a);a=j(a,e*c);c=i(a,b);return c-e*d}e.exports={getBandwidthEstimate:a,getExponentiallyWeightedMovingAverageOfBandwidth:i,getStandardDeviationOfBandwidth:h,getMeanBandwidth:g,getBandwidthSamplesWithinRangeOfMean:j}}),null);
__d("ReadableStream",[],(function(a,b,c,d,e,f){e.exports=self.ReadableStream}),null);
__d("WritableStream",[],(function(a,b,c,d,e,f){e.exports=self.WritableStream}),null);
__d("oz-player/networks/OzTransformStream",["ReadableStream","WritableStream","oz-player/shims/OzEventEmitter"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j;b=babelHelpers.inherits(a,i);j=b&&b.prototype;function a(a){__p&&__p();j.constructor.call(this);this.$OzTransformStream3=function(a){return a};a=a||{};a=a.errorTransform;(a===undefined||a===null)&&(a=this.$OzTransformStream3);var b=a||this.$OzTransformStream3;this.writable=new h({start:function(a){this.$OzTransformStream2=a}.bind(this),write:function(a){this.emit("writableWrite",a),this.$OzTransformStream1.enqueue(a)}.bind(this),close:function(){this.emit("writableClose"),this.$OzTransformStream1.close()}.bind(this),abort:function(a){a=b(a);this.$OzTransformStream1.error(a)}.bind(this)});this.readable=new g({start:function(a){this.$OzTransformStream1=a}.bind(this),cancel:function(a){this.emit("readableCancel",a),this.$OzTransformStream2.error(a)}.bind(this)})}e.exports=a}),null);
__d("oz-player/utils/OzResourceTimingUtils",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){if(!performance.getEntriesByName)return null;a=performance.getEntriesByName(a,"resource");return a.reduce(function(a,b){if(a==null)return b;return typeof b.responseEnd==="number"&&typeof b.responseStart==="number"&&typeof b.startTime==="number"&&typeof a.responseEnd==="number"&&typeof a.responseStart==="number"&&typeof a.startTime==="number"?b.responseEnd<a.responseEnd?a:b:null},null)};e.exports={getLatestResourceTimingEntry:a}}),null);
__d("oz-player/networks/OzNetworkRequestStreamBandwidthReporter",["oz-player/utils/OzResourceTimingUtils","oz-player/networks/OzTransformStream"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=g.getLatestResourceTimingEntry;function a(a){__p&&__p();this.$8=Date.now();this.$9=0;this.$10=0;this.$11=function(){};this.$12=new h();var b=a.stream,c=a.loggerProvider,d=a.byteCountPerSample,e=a.minimumBytesToSampleOnClose,f=a.minimumSampleDuration,g=a.maximumSampleBandwidth,i=a.usePerformanceEntryOnClose;a=a.ignoreTimeToResponseStart;this.$1=b;this.$13=c;this.$2=d;this.$3=e;this.$4=f;this.$5=g;this.$6=i;this.$7=a;this.$12.addListener("writableWrite",this.$14.bind(this));this.$12.addListener("writableClose",this.$15.bind(this))}a.prototype.getTransformStream=function(){return this.$12};a.prototype.onBandwidthSample=function(a){this.$11=a};a.prototype.$16=function(a,b){if(this.$13){var c=Date.now();this.$13&&this.$13.getOperationLogger("bandwidth_sampled").setLength(a).setClientTimeEnd(c).setClientTimeBegin(c-b).log()}this.$11(a,b)};a.prototype.$14=function(a){a.length!=undefined&&(this.$10+=a.length),this.$17()};a.prototype.$15=function(){__p&&__p();var a=Date.now()-this.$8;if(this.$3>0&&a>0&&this.$9===0&&this.$10>=this.$3){var b=this.$1.getLastRequestUrl();if(b!=null&&this.$6){b=i(b);if(b&&b.responseEnd&&b.startTime){b=this.$7?b.responseEnd-b.responseStart:b.responseEnd-b.startTime;a=b>0?b:a}}this.$18(a)||this.$16(this.$10,a)}};a.prototype.$18=function(a){var b=this.$10*8/(a/1e3);return a<this.$4&&b>this.$5};a.prototype.$17=function(){var a=Date.now(),b=a-this.$8;this.$10*8/(b/1e3);this.$2>0&&this.$10>=this.$9+this.$2&&!this.$18(b)&&(this.$16(this.$10-this.$9,b),this.$8=a,this.$9=this.$10)};e.exports=a}),null);
__d("RoundRobinPriorityTaskQueue",["Deferred","MaybeNativePromise"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();function a(a,b){b===void 0&&(b=-1),this.$3=function(){},this.$4=[],this.$5=new Map(),this.$6=new Map(),this.$1=a,this.$2=b}a.prototype.getHighestPriority=function(){return Math.max.apply(Math,this.$4.map(function(a){return a.queue.length?a.priority:-Infinity}))};a.prototype.enqueue=function(a,b){__p&&__p();b=this.$7(b);var c=this.$5.get(a),d=this.$8(a);if(c===b)return d;this.$5.has(a)&&this.remove(a);c=this.$9(b);var e=this.$4[c];e&&e.priority===b||(e={priority:b,queue:[]},this.$4.splice(c,0,e));this.$5.set(a,b);e.queue.push(a);this.$3(a,b>=this.$1?"immediate":"normal");return d};a.prototype.updatePriority=function(a,b){if(!this.$5.has(a))return;this.enqueue(a,b)};a.prototype.dequeue=function(){for(var a=0;a<this.$4.length;a++){var b=this.$4[a];if(b.queue.length){b=b.queue.shift();this.$5["delete"](b);return b}}return null};a.prototype.remove=function(a){__p&&__p();var b=this.$5.get(a);if(b===undefined)return;b=this.$9(b);b=this.$4[b];if(b&&b.queue){var c=b.queue.findIndex(function(b){return b===a});c>-1&&b.queue.splice(c,1)}this.$5["delete"](a)};a.prototype.setOnTaskUpdated=function(a){this.$3=a};a.prototype.clearOnTaskUpdated=function(){this.setOnTaskUpdated(function(){})};a.prototype.getLength=function(){return this.$5.size};a.prototype.$8=function(a){__p&&__p();var b=this.$6.get(a);if(!b){var c=new g(h);b=c.getPromise();this.$6.set(a,b);var d=a.run;a.run=function(){return d.call(a).then(function(a){c.resolve(a);return a})["catch"](function(a){c.reject(a);throw a})}}return b};a.prototype.$9=function(a){a=this.$7(a);var b;for(b=0;b<this.$4.length;b++)if(a>=this.$4[b].priority)return b;return b};a.prototype.$7=function(a){this.$2>=0&&(a=Number.parseFloat(a.toFixed(this.$2)));return a};e.exports=a}),null);
__d("oz-player/shims/OzRoundRobinPriorityTaskQueue",["RoundRobinPriorityTaskQueue"],(function(a,b,c,d,e,f){"use strict";e.exports=b("RoundRobinPriorityTaskQueue")}),null);
__d("SequentialTaskScheduler",["MaybeNativePromise","setTimeout"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();function a(a,b){this.$3=null;this.$4=0;this.$1=a;a=b||{};b=a.taskTimeout;this.$5=b||0}a.prototype.start=function(){this.$1.setOnTaskUpdated(this.$6.bind(this));var a=this.$1.dequeue();a&&this.$7(a,"immediate")};a.prototype.destroy=function(){this.$2&&this.$2.cancel(),this.$1.clearOnTaskUpdated()};a.prototype.$6=function(a,b){b=this.$7(a,b);b&&this.$1.remove(a)};a.prototype.$7=function(a,b){__p&&__p();if(this.$2&&b!=="immediate")return!1;this.$2&&this.$2.cancel();b=a.run()["catch"](function(a){});this.$5>0&&(b=g.race([b,new g(function(a,b){h(a,this.$5)}.bind(this))]));this.$4++;this.$2=a;b.then(function(){this.$4--;this.$2===a&&(this.$2=null);if(this.$4===0){var b=this.$1.dequeue();b&&this.$7(b,"immediate")}}.bind(this));return!0};e.exports=a}),null);
__d("oz-player/shims/OzSequentialTaskScheduler",["SequentialTaskScheduler"],(function(a,b,c,d,e,f){"use strict";e.exports=b("SequentialTaskScheduler")}),null);
__d("oz-player/networks/OzStreamingTaskQueueProvider",["oz-player/shims/OzRoundRobinPriorityTaskQueue","oz-player/shims/OzSequentialTaskScheduler"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=new Map(),j=new Map(),k=2,l=2,m=6e4;function a(a){var b=i.get(a);if(!b){b=new g(k,l);var c=new h(b,{taskTimeout:m});c.start();i.set(a,b);j.set(a,c)}return b}e.exports={getQueue:a,OZ_QUEUE_MAX_PRIORITY:k}}),null);
__d("oz-player/shims/OzBandwidthCache",["CacheStorage","Run"],(function(a,b,c,d,e,f,g,h){function a(a){"use strict";this.$1=new g("localstorage","_video_"),h.onUnload(function(){this.$1.set("bandwidthEstimate",a())}.bind(this))}a.prototype.getCachedBandwidth=function(){"use strict";return this.$1.get("bandwidthEstimate")};e.exports=a}),null);
__d("oz-player/networks/OzBandwidthEstimator",["oz-player/configs/OzGlobalConfig","oz-player/networks/OzStreamingTaskQueueProvider","oz-player/shims/OzBandwidthCache","oz-player/shims/OzEventEmitter","oz-player/networks/OzBandwidthUtils","oz-player/networks/OzNetworkRequestStreamBandwidthReporter"],(function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";__p&&__p();var m,n=k.getBandwidthEstimate,o=k.getExponentiallyWeightedMovingAverageOfBandwidth,p=k.getStandardDeviationOfBandwidth,q=.9,r=5e5,s=2e4;b=babelHelpers.inherits(a,j);m=b&&b.prototype;function a(){m.constructor.call(this),this.$OzBandwidthEstimator1=[],this.$OzBandwidthEstimator2=new i(function(){return this.getAdjustedBandwidth(g)}.bind(this))}a.prototype.getBandwidth=function(a){var b=n(this.$OzBandwidthEstimator1,a.getNumber("bandwidth_estimator_half_life",6),a.getNumber("bandwidth_estimator_outlier_exclusion_factor",2),a.getNumber("bandwidth_estimator_std_dev_penalty_factor",.1));return b>0?b:this.$OzBandwidthEstimator3(a)};a.prototype.$OzBandwidthEstimator3=function(a){var b=r;if(a.getBool("use_cached_bandwidth",!1)){a=this.$OzBandwidthEstimator2.getCachedBandwidth();typeof a==="number"&&a>0&&(b=a)}return b};a.prototype.getStandardDeviationOfBandwidth=function(){return p(this.$OzBandwidthEstimator1)};a.prototype.getSampleCount=function(){return this.$OzBandwidthEstimator1.length};a.prototype.getAdjustedBandwidth=function(a){if(this.$OzBandwidthEstimator1.length===0)return this.$OzBandwidthEstimator3(a);var b=a.getNumber("bandwidth_estimator_variance_penalty_half_life",0)>0?this.$OzBandwidthEstimator4(a):this.$OzBandwidthEstimator5(a);return this.$OzBandwidthEstimator6(a,b)};a.prototype.$OzBandwidthEstimator6=function(a,b){var c=Math.max(0,h.getQueue("video").getLength()-a.getNumber("bandwidth_penalty_additional_video_start",0));a=a.getNumber("bandwidth_penalty_per_additional_video",0);c=Math.min(q,c*a);return b*(1-c)};a.prototype.$OzBandwidthEstimator4=function(a){var b=o(this.$OzBandwidthEstimator1,a.getNumber("bandwidth_estimator_half_life",6)),c=o(this.$OzBandwidthEstimator1,a.getNumber("bandwidth_estimator_variance_penalty_half_life",0));a=c<b?a.getNumber("bandwidth_estimator_variance_penalty_down_factor",0):a.getNumber("bandwidth_estimator_variance_penalty_up_factor",0);c=Math.abs(b-c)*a;return b-c};a.prototype.$OzBandwidthEstimator5=function(a){return this.getBandwidth(a)};a.prototype.pipeThroughReporter=function(a,b,c){return{startStream:function(d){var e=new l({stream:b,loggerProvider:c,byteCountPerSample:a.getNumber("byte_count_per_sample",s),minimumBytesToSampleOnClose:a.getNumber("minimum_bytes_to_sample_on_close",0),minimumSampleDuration:a.getNumber("minimum_bandwidth_sample_duration",0),maximumSampleBandwidth:a.getNumber("maximum_bandwidth_sample_bandwidth",999999999),usePerformanceEntryOnClose:a.getBool("use_performance_entry_on_stream_close",!1),ignoreTimeToResponseStart:a.getBool("ignore_time_to_response_start",!1)});e.onBandwidthSample(this.$OzBandwidthEstimator7.bind(this));return b.startStream(d).then(function(c){return b.retrievedFromCache()&&a.getBool("exclude_prefetch_bandwidth_samples",!1)?c:c.pipeThrough(e.getTransformStream())})}.bind(this)}};a.prototype.$OzBandwidthEstimator7=function(a,b){this.$OzBandwidthEstimator1.push({bytes:a,timeInMs:b}),this.$OzBandwidthEstimator1.length>g.getNumber("max_bandwidth_sample_count",15)&&this.$OzBandwidthEstimator1.splice(0,1),this.emit("bandwidth_sampled")};e.exports=new a()}),null);
__d("createErrorStream",["ReadableStream"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return new g({pull:function(b){b.error(a)}})}e.exports=a}),null);
__d("oz-player/networks/OzFetchWithCache",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=window.fetch;function a(a,b,c){__p&&__p();c===void 0&&(c=null);if(!g)throw new Error("fetch api is missing");c=c?c.getCacheValue(a):null;var d=!1;c?(d=!0,c=c.then(function(a){var b=new ReadableStream({start:function(b){var c=new Uint8Array(a.response);b.enqueue(c);b.close()}});return{body:b,status:200,ok:!0}})["catch"](function(a){throw new TypeError()})):c=g(a,b);return{promise:c,retrievedFromCache:d}}e.exports=a}),null);
__d("oz-player/networks/OzNetworkRequestStream",["oz-player/utils/OzError","oz-player/shims/ozvariant","oz-player/networks/OzFetchWithCache","createErrorStream","oz-player/networks/OzTransformStream"],(function(a,b,c,d,e,f,g,h,i,j,k){"use strict";__p&&__p();function a(a,b,c,d){d===void 0&&(d=null),this.$4=!1,this.$1=b,this.$2=c,this.$5=d,this.$6=a}a.prototype.startStream=function(a){__p&&__p();a=this.$2.createRequestParam(this.$1,a);var b=a.uri;a=a.http;var c=b.toString();this.$3=c;b=i(c,a,this.$5);a=b.promise;b=b.retrievedFromCache;this.$4=b;return a.then(function(a){__p&&__p();var b=a.body,d=a.status;a=a.ok;if(!a)return j(this.$7(new Error("HTTP status not OK"),d,c,"HTTP error."));b.getReader||h(0,3287);if(!this.$6.getBool("throw_network_error_during_stream",!1))return b;a=new k({errorTransform:function(a){return a instanceof TypeError?this.$7(a,0,c,"Network failure."):a}.bind(this)});return b.pipeThrough(a)}.bind(this))["catch"](function(a){return a instanceof TypeError?j(this.$7(a,0,c,"Network failure.")):j({type:"stream_processing",status:0,url:c,message:"Stream processing error."+a})}.bind(this))};a.prototype.getLastRequestUrl=function(){return this.$3};a.prototype.retrievedFromCache=function(){return this.$4};a.prototype.$7=function(a,b,c,d){return this.$6.getBool("request_stream_throws_oz_network_error",!1)?new g({type:"OZ_NETWORK",description:d,extra:{originalError:a,code:b.toString(),url:c}}):{type:"net",status:b,url:c,message:d}};e.exports=a}),null);
__d("oz-player/networks/getOzSegmentStreamableRange",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();if(!a.length)return null;var b=a[0].getURI().toString(),c=a[0].getByteRange();if(!c)return null;var d=c;for(var e=1;e<a.length;e++){var f=a[e];if(f.getURI().toString()!==b)return null;f=f.getByteRange();if(!d||!f)return null;if(d.endByte===null||f.startByte!==d.endByte+1)return null;d=f}return{startByte:c.startByte,endByte:d.endByte}}e.exports=a}),null);
__d("ByteRange",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,b){return a.startByte===b.startByte}function b(a,b){return b.endByte===null?!1:a.startByte===b.endByte+1}function c(a,b){return a.startByte<b.startByte?!1:b.endByte==null||b.endByte>=a.startByte}function d(a,b){__p&&__p();if(b.startByte<a.startByte){var c=a;a=b;b=c}if(a.endByte==null)return{startByte:a.startByte,endByte:null};if(b.startByte>a.endByte+1)return null;c=b.endByte==null||b.endByte>a.endByte?b.endByte:a.endByte;return{startByte:a.startByte,endByte:c}}function f(a,b){if(b.endByte==null)return null;if(a.startByte>b.endByte)return{startByte:a.startByte,endByte:a.endByte};return a.endByte!=null&&a.endByte<=b.endByte?null:{startByte:b.endByte+1,endByte:a.endByte}}function g(a){return a.endByte==null?null:a.endByte-a.startByte+1}e.exports={startsAtSame:a,startsImmediateAfter:b,startsDuring:c,union:d,disjoinAfter:f,getLength:g}}),null);
__d("ProducerInterruptedError",[],(function(a,b,c,d,e,f){"use strict";var g;g=babelHelpers.inherits(a,Error);g&&g.prototype;function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("DeferredBuffer",["Deferred","MaybeNativePromise","ProducerInterruptedError"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();function a(a){a===void 0&&(a={});this.$3=[];this.$4=!1;this.$6=0;a=a;var b=a.disableArrayShift;a=a.useNativePromise;this.$1=!!b;this.$2=!!a}a.prototype.produce=function(a){this.$7(a)};a.prototype.signalProducerInterruption=function(){this.$7(new i("producer interrupted"))};a.prototype.consume=function(a){__p&&__p();if(this.$4)throw new Error("A buffer can only be consumed by one client at a time");this.$4=!0;var b=h.resolve();this.isEmpty()&&(this.$5=this.$2?new g(h):new g(),b=this.$5.getPromise());return b.then(function(){__p&&__p();if(this.$1){if(this.$3[this.$6]===undefined)throw new Error("buffer has no value at position "+this.$6)}else if(this.$3.length===0)throw new Error("buffer length must not be 0");this.$5=null;this.$4=!1;var b=this.$1?this.$8(a):this.$9(a);if(b instanceof Uint8Array)return b;throw b}.bind(this))};a.prototype.$7=function(a){this.$3.push(a),this.$5&&this.$5.resolve()};a.prototype.$8=function(a){__p&&__p();var b=this.$3[this.$6];if(b===undefined)return new Uint8Array([]);b=b;if(!(b instanceof Uint8Array)){this.$3[this.$6]=undefined;this.$6++;return b}if(a!==undefined&&b.length>a){var c=b.slice(a);b=b.slice(0,a);this.$3[this.$6]=c}else this.$3[this.$6]=undefined,this.$6++;return b};a.prototype.$9=function(a){__p&&__p();if(this.$3.length===0)return new Uint8Array([]);var b=this.$3[0];if(!(b instanceof Uint8Array)){this.$3.shift();return b}if(a!==undefined&&b.length>a){var c=b.slice(a);b=b.slice(0,a);this.$3[0]=c}else this.$3.shift();return b};a.prototype.isEmpty=function(){return this.$1?this.$3[this.$6]===undefined:this.$3.length===0};e.exports=a}),null);
__d("pipeErrorTo",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){try{a.error(b)}catch(a){}}e.exports=a}),null);
__d("PausableRangeStream",["ByteRange","Deferred","DeferredBuffer","MaybeNativePromise","ReadableStream","WritableStream","pipeErrorTo"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m){"use strict";__p&&__p();var n=g.startsImmediateAfter;function o(){return new Error("Upstream has an inconsistent range")}function p(){this.$1=0}p.prototype.setBytesToSkip=function(a){this.$1=a};p.prototype.setBytesSkipped=function(a){this.$1-=a};p.prototype.getBytesToSkip=function(){return this.$1};p.prototype.hasMoreBytesToSkip=function(){return this.$1>0};function q(a,b,c){__p&&__p();this.$5=!1;this.$7=0;this.$8=0;this.$13=!1;this.$14=0;this.$15=new p();this.$16=!1;this.$17=!1;this.$18=!1;this.$19=!1;this.$1=a;this.$2=b;a=c||{};b=a.fixStreamingUndefinedEndByte;c=a.disableDeferredBufferArrayShift;var d=a.useNativePromiseInDeferredBuffer,e=a.enablePausableStreamResumeFromStartDangerously,f=a.fixPausePreReadableStream,g=a.throwErrorOnUnexpectedException;a=a.throwErrorWhenAborted;this.$11=!!b;this.$16=!!e;this.$17=!!f;this.$18=!!g;this.$19=!!a;this.$3=new i({disableArrayShift:!!c,useNativePromise:!!d});this.$6=new k({start:function(a){this.$10=a}.bind(this),pull:function(a){__p&&__p();if((this.$11&&this.$1.endByte===null&&this.$5||this.$7===this.$20())&&this.$3.isEmpty()){a.close();return j.resolve()}var b=function(){__p&&__p();var c=this.$15.hasMoreBytesToSkip()?this.$15.getBytesToSkip():undefined;return this.$3.consume(c).then(function(c){if(this.$15.hasMoreBytesToSkip()){this.$15.setBytesSkipped(c.length);return b()}this.$7+=c.length;var d=this.$20();d!==null&&this.$7>(d||0)&&m(this.$10,o());a.enqueue(c)}.bind(this))["catch"](function(a){if(a==="skip_buffered_bytes"){this.$15.setBytesToSkip(this.$7);return b()}throw a}.bind(this))}.bind(this);return b()}.bind(this),cancel:function(a){this.$12&&this.$12.resolve("stream_cancelled"),m(this.$9,a)}.bind(this)});this.$21()}q.prototype.$20=function(){var a=this.$1,b=a.startByte;a=a.endByte;return a!=null?a-b+1:null};q.prototype.$21=function(){this.$4=new l({start:function(a){this.$9=a}.bind(this),write:function(a){this.$3.produce(a),this.$8+=a.length}.bind(this),close:function(){this.$5=!0;var a=this.$1,b=a.endByte;a=a.startByte;this.$11&&b===null&&this.$3.produce(new Uint8Array([]));b!==null&&this.$8!==(b||0)-a+1&&m(this.$10,o())}.bind(this),abort:function(a){this.$12&&(this.$19?this.$12.reject(a):this.$12.resolve("stream_aborted")),m(this.$10,a)}.bind(this)})};q.prototype.getStream=function(){return this.$6};q.prototype.startStream=function(){__p&&__p();this.$13=!0;var a={startByte:this.$1.startByte,endByte:this.$1.endByte};!this.$16?a.startByte+=this.$8:this.$8&&(this.$3.produce("skip_buffered_bytes"),this.$8=0);var b=this.$4;return this.$2.startStream(a).then(function(a){a.pipeTo(this.$17?b:this.$4).then(function(){this.$12&&this.$12.resolve("stream_done")}.bind(this))["catch"](function(a){this.$12&&!this.$12.isSettled()&&(this.$17&&a===q.STREAM_PAUSED?this.$12.resolve("stream_paused"):this.$18?this.$12.reject(a):this.$12.resolve("stream_unexpected"))}.bind(this));this.$12=new h(j);return{statusPromise:this.$12.getPromise()}}.bind(this))};q.prototype.pauseStream=function(){m(this.$9,q.STREAM_PAUSED),this.$12&&this.$12.resolve("stream_paused"),this.$21()};q.prototype.getByteRange=function(){return this.$1};q.prototype.getBytesStreamed=function(){return this.$7};q.prototype.tryConcatByteRange=function(a){if(this.$13||!n(a,this.$1))return!1;this.$1.endByte=a.endByte;return!0};q.STREAM_PAUSED="streamPaused";e.exports=q}),null);
__d("oz-player/shims/OzPausableRangeStream",["PausableRangeStream"],(function(a,b,c,d,e,f){"use strict";e.exports=b("PausableRangeStream")}),null);
__d("oz-player/networks/OzNetworkManager",["oz-player/utils/OzError","oz-player/loggings/OzLoggingUtils","oz-player/mocks/MockRequestParamCreator","oz-player/shims/OzPausableRangeStream","oz-player/shims/OzURI","oz-player/shims/ozvariant","oz-player/networks/getOzSegmentStreamableRange","oz-player/networks/OzBandwidthEstimator","oz-player/networks/OzNetworkRequestStream"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){"use strict";__p&&__p();var p=h.monitorPromiseAndLogOperation;function a(a,b){b===void 0&&(b=null),this.$1=a,this.$2=new i(),this.$3=b}a.prototype.request=function(a,b){b===void 0&&(b=null);a.length>0||l(0,212);var c=m(a)||{startByte:0,endByte:null};a=new o(this.$1,a[0].getURI(),this.$2,this.$3);return this.$4(c,a,b)};a.prototype.createPausableStream=function(a,b){a.length>0||l(0,212);var c=m(a)||{startByte:0,endByte:null},d=new o(this.$1,a[0].getURI(),this.$2,this.$3);return{pausableRangeStream:this.$5(c,d,b),loggingPayloads:{getRequestUrl:function(){return d.getLastRequestUrl()||null},isPrefetch:function(){return d.retrievedFromCache()}}}};a.prototype.requestRawUrl=function(a,b,c){c===void 0&&(c=null);a=new o(this.$1,new k(a),{createRequestParam:function(a,c){return{uri:a,http:b}}},this.$3);var d={startByte:0,endByte:null};return this.$4(d,a,c)};a.prototype.$5=function(a,b,c){b=n.pipeThroughReporter(this.$1,b,c);return new j(a,b,{fixStreamingUndefinedEndByte:!0,enablePausableStreamResumeFromStartDangerously:!0,fixPausePreReadableStream:!0,useNativePromiseInDeferredBuffer:this.$1.getBool("use_native_promise",!1),throwErrorOnUnexpectedException:this.$1.getBool("pausable_stream_throws_error_on_unexpected_exception",!1),throwErrorWhenAborted:this.$1.getBool("pausable_stream_throws_error_when_aborted",!1)})};a.prototype.$4=function(a,b,c){var d=this.$5(a,b,c);a=d.startStream();var e=this.$6(a);c&&p(e,c,"fetch_stream",function(){},function(a){a.setResource(b.getLastRequestUrl()).setInitiator(b.retrievedFromCache()?"prefetch":"fetch")});return{getStream:function(){return d.getStream()},cancel:function(){return d.pauseStream()},getStatusChangePromise:function(){return e}}};a.prototype.$6=function(a){return a.then(function(a){a=a.statusPromise;return a.then(function(a){if(a==="stream_done"||!this.$1.getBool("enable_network_manager_error",!1))return"done";throw new g({description:a,type:"OZ_NETWORK"})}.bind(this))}.bind(this))};a.getStreamableSegmentsRange=function(a){if(!a.length)return[];return!m(a)?[a[0]]:a.slice(0)};e.exports=a}),null);
__d("oz-player/utils/OzNumericalHelper",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=1e-5;function h(a,b,c){c===void 0&&(c=g);return Math.abs(b-a)<=c}function i(a,b,c){c===void 0&&(c=g);return a>b&&!h(a,b,c)}function j(a,b,c){c===void 0&&(c=g);return a<b&&!h(a,b,c)}function a(a,b,c){c===void 0&&(c=g);return j(a,b,c)||h(a,b,c)}function b(a,b,c){c===void 0&&(c=g);return i(a,b,c)||h(a,b,c)}e.exports={lessThan:j,greaterThan:i,equalTo:h,lessThanOrEqual:a,greaterThanOrEqual:b}}),null);
__d("oz-player/utils/OzNumericalRangeUtil",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=.01;function h(a,b){b=b.rangeEnd;return b===null||b===undefined?!1:Math.abs(a.rangeStart-b)>g&&a.rangeStart>b}function i(a,b){a=a.rangeEnd;b=b.rangeEnd;if(a===null||a===undefined)return!0;return b===null||b===undefined?!1:Math.abs(a-b)>g&&a>b}function j(a,b){b=b.rangeEnd;return b===null||b===undefined?!1:Math.abs(a-b)>g&&a>b}function k(a,b){return a>b-g}a.prototype.mergeSortedRanges=function(a){__p&&__p();if(!a.length)return[];var b=[],c=a[0];b.push(c);for(var d=1;d<a.length;d++){var e=a[d];if(!i(e,c))continue;else h(e,c)?(c={rangeStart:e.rangeStart,rangeEnd:e.rangeEnd},b.push(c)):c.rangeEnd=e.rangeEnd}return b};a.prototype.findCurrentRangeIndex=function(a,b){for(var c=0;c<b.length;c++){var d=b[c],e=d.rangeStart;if(k(a,e)&&!j(a,d))return c}return-1};a.prototype.findNextRangeIndex=function(a,b){for(var c=0;c<b.length;c++){var d=b[c];d=d.rangeStart;if(!k(a,d))return c}return-1};function a(){}e.exports=a}),null);
__d("oz-player/manifests/SegmentTemplateSegmentsContainer",["oz-player/utils/OzNumericalHelper","oz-player/shims/OzEventEmitter","oz-player/shims/OzURI","oz-player/shims/ozvariant","oz-player/utils/OzNumericalRangeUtil"],(function(a,b,c,d,e,f,g,h,i,j,k){"use strict";__p&&__p();var l=g.equalTo,m=g.greaterThan,n=g.lessThan;g.greaterThanOrEqual;var o=g.lessThanOrEqual,p=1e-4;function q(a,b,c,d,e){e===void 0&&(e=!1),this.$6=new h(),this.$1=b,this.$2=c,this.$3=d,this.$4=this.$9(this.$3),this.$5=e,this.$7=a,this.$8=this.$7.getNumber("live_numerical_error_epsilon",0)}q.prototype.getSegmentByTime=function(a){a=a*this.$2;for(var b=0;b<this.$3.length;b++){var c=this.$3[b];if(o(c.t,a,this.$8)&&m(c.t+c.d,a,this.$8))return this.$10(c)}return null};q.prototype.getSegment=function(a){a=this.$3[a];return!a?null:this.$10(a)};q.prototype.getSegmentAfter=function(a){var b=this.$3.findIndex(function(b){return l(b.t,a.getTimeRange().startTime*this.$2,this.$8)&&l(b.t+b.d,a.getTimeRange().endTime*this.$2,this.$8)}.bind(this));return b>=0&&b+1<this.$3.length?this.$10(this.$3[b+1]):null};q.prototype.isEndingSegment=function(a){if(!this.$3||!this.$3.length||!this.$5)return!1;var b=this.$10(this.$3[this.$3.length-1]);return Math.abs(b.getTimeRange().startTime-a.getTimeRange().startTime)+Math.abs(b.getTimeRange().endTime-a.getTimeRange().endTime)<p};q.prototype.updateWith=function(a){a instanceof q||j(0,646),this.$5=a.$5,this.$11(a.$3),this.$12(a.$3),this.$6.emit("segment_updated")};q.prototype.getTimeRanges=function(){return this.$4};q.prototype.addUpdateListener=function(a){return this.$6.addListener("segment_updated",a)};q.prototype.$11=function(a){var b=0,c=0;while(b<this.$3.length&&c<a.length){var d=this.$3[b],e=a[c];n(d.t,e.t,this.$8)?b++:m(d.t,e.t,this.$8)?(o(e.t+e.d,d.t,this.$8)&&this.$3.splice(b,0,e),c++):(b++,c++)}while(c<a.length)this.$3.push(a[c]),c++};q.prototype.$12=function(a){a=this.$9(a);this.$4=new k().mergeSortedRanges(this.getTimeRanges().map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}}).concat(a.map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}}))).map(function(a){return{startTime:a.rangeStart,endTime:a.rangeEnd===null||a.rangeEnd===undefined?Infinity:a.rangeEnd}})};q.prototype.$9=function(a){__p&&__p();a=new k();a=a.mergeSortedRanges(this.$3.map(function(a){a=this.$10(a).getTimeRange();var b=a.startTime;a=a.endTime;return{rangeStart:b,rangeEnd:a}}.bind(this)));return a.map(function(a){var b=a.rangeStart;a=a.rangeEnd;a=a===null||a===undefined?Infinity:a;return{startTime:b,endTime:a}})};q.prototype.$10=function(a){var b=a.t,c=a.d;return{getURI:function(){var a=this.$1.replace("$Time$",b.toString());return new i(a)}.bind(this),getTimeRange:function(){return{startTime:b/this.$2,endTime:(b+c)/this.$2}}.bind(this),getByteRange:function(){return null}}};e.exports=q}),null);
__d("oz-player/utils/OzUrlHelper",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){var b=a.lastIndexOf("/"),c=a.lastIndexOf("://");b>c+2&&(a=a.substring(0,b+1));return a}function h(a){a=g(a);return a.endsWith("/")?g(a.substring(0,a.length-1)):a}function i(a,b){__p&&__p();a=g(a);while(b.length)if(b.startsWith("./"))b=b.substring(2);else if(b.startsWith("../"))b=b.substring(3),a=h(a),a.endsWith("/")&&(a=a.substring(0,a.length-1));else if(b.startsWith(".."))b=b.substring(2),a=h(a);else if(b.startsWith("."))b=b.substring(1);else break;b&&b.length&&(a.endsWith("/")||(a+="/"),a+=b);return a}a={normalize:function(){__p&&__p();for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];if(!b||!b.length)return"";if(b.length===1)return b[0];var d=b.shift();while(b.length>0)d=i(d,b.shift());return d}};e.exports=a}),null);
__d("oz-player/parsers/OzSegmentTemplateParser",["oz-player/manifests/SegmentTemplateSegmentsContainer","oz-player/shims/OzURI","oz-player/utils/OzUrlHelper"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();function j(a,b){b===void 0&&(b=null),this.$1=a,this.$2=b}j.prototype.getTimeRange=function(){return{startTime:0,endTime:0}};j.prototype.getByteRange=function(){return this.$2};j.prototype.getURI=function(){return this.$1};function a(a,b,c){var d=c.baseUrl;c=c.isStaticMpd;this.$1=b;this.$2=d;this.$3=c;this.$4=a}a.prototype.parseInitializationSegment=function(){var a=i.normalize(this.$2,this.$1.$.initialization);return new j(new h(a))};a.prototype.parseSegmentsContainer=function(){return new g(this.$4,i.normalize(this.$2,this.$1.$.media),Number.parseInt(this.$1.$.timescale,10),this.$1.SegmentTimeline[0].S.map(function(a){return{t:Number.parseInt(a.$.t,10),d:Number.parseInt(a.$.d,10)}}),this.$3)};e.exports=a}),null);
__d("oz-player/manifests/OzZeroTimeRangeSegment",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,b,c){this.$1=a,this.$2=b,this.$3=c}a.prototype.getURI=function(){return this.$1};a.prototype.getTimeRange=function(){return{startTime:0,endTime:0}};a.prototype.getByteRange=function(){return{startByte:this.$2,endByte:this.$3}};e.exports=a}),null);
__d("DataViewReader",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){this.$1=0,this.$2=a}a.prototype.seek=function(a){this.$1=a};a.prototype.skip=function(a){var b=this.$1;this.$1+=a;return b};a.prototype.readUint8=function(){return this.$2.getUint8(this.skip(8/8))};a.prototype.readUint16=function(){return this.$2.getUint16(this.skip(16/8))};a.prototype.readUint32=function(){return this.$2.getUint32(this.skip(32/8))};a.prototype.readUint64=function(){var a=this.$2.getUint32(this.skip(32/8)),b=this.$2.getUint32(this.skip(32/8));if(a>2097151)throw new RangeError("Overflow reading 64-bit value.");return Math.pow(2,32)*a+b};a.prototype.readInt64=function(){var a=this.$2.getUint32(this.skip(32/8)),b=this.$2.getUint32(this.skip(32/8));if(a>2097151)throw new RangeError("Overflow reading 64-bit value.");return Math.pow(2,32)*(a|0)+b};a.prototype.readInt16=function(){return this.$2.getInt16(this.skip(16/8))};a.prototype.readInt32=function(){return this.$2.getInt32(this.skip(32/8))};a.prototype.readZeroTerminatedString=function(a){var b="",c=0,d;while(c++<a&&(d=this.readUint8()))b+=String.fromCharCode(d);return b};a.prototype.readChars=function(a){var b="";while(a-->0)b+=String.fromCharCode(this.$2.getUint8(this.skip(8/8)));return b};a.prototype.readBytes=function(a){var b=[];while(a-->0)b.push(this.$2.getUint8(this.skip(8/8)));return b};a.prototype.getDataView=function(){return this.$2};a.prototype.getCursor=function(){return this.$1};a.prototype.hasMoreData=function(){return this.$2.byteLength-this.getCursor()>0};e.exports=a}),null);
__d("oz-player/shims/OzDataViewReader",["DataViewReader"],(function(a,b,c,d,e,f){"use strict";e.exports=b("DataViewReader")}),null);
/**
 * License: https://www.facebook.com/legal/license/8SOvLuObRf9/
 */
__d("oz-player/parsers/OzMp4SidxParser",["oz-player/shims/OzDataViewReader","oz-player/shims/OzURI"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=1936286840;a={parse:function(a,b,c){__p&&__p();var d=new g(new DataView(c.buffer));c=d.readUint32();var e=d.readUint32();if(e!==i)throw new Error('Invalid box type, expected "sidx".');c==1&&(c=d.readUint64());e=d.readUint8();d.skip(3);d.skip(4);var f=d.readUint32();if(!f)throw new Error("Invalid timescale.");var j;e==0?(e=d.readUint32(),j=d.readUint32()):(e=d.readUint64(),j=d.readUint64());d.skip(2);var k=d.readUint16(),l=e,m=b+c+j,n=0,o=[];e=function(b){__p&&__p();var c=d.readUint32(),e=(c&2147483648)>>>31;c=c&2147483647;var g=d.readUint32();d.readUint32();if(e==1)throw new Error("Heirarchical SIDXs are not supported.");var i=l/f,j=(l+g)/f;b===0&&(n=i);var k=m,p=k+c-1;o.push({getURI:function(){return new h(a)},getTimeRange:function(){return{startTime:i-n,endTime:j-n}},getByteRange:function(){return{startByte:k,endByte:p}}});l+=g;m+=c};for(var b=0;b<k;b++)e(b);return o}};e.exports=a}),null);
__d("oz-player/manifests/OzDataSegment",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,b,c,d,e){this.$1=a,this.$2=b,this.$3=c,this.$4=d,this.$5=e}a.prototype.getURI=function(){return this.$1};a.prototype.getTimeRange=function(){return{startTime:this.$2,endTime:this.$3}};a.prototype.getByteRange=function(){return{startByte:this.$4,endByte:this.$5}};e.exports=a}),null);
/**
 * License: https://www.facebook.com/legal/license/8SOvLuObRf9/
 */
__d("oz-player/parsers/OzWebmSidxParser",["oz-player/manifests/OzDataSegment","oz-player/shims/OzDataViewReader","oz-player/shims/OzURI","oz-player/shims/ozvariant"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k=440786851,l=408125543,m=357149030,n=2807729,o=17545,p=475249515,q=187,r=179,s=183,t=241,u=[new Uint8Array([255]),new Uint8Array([127,255]),new Uint8Array([63,255,255]),new Uint8Array([31,255,255,255]),new Uint8Array([15,255,255,255,255]),new Uint8Array([7,255,255,255,255,255]),new Uint8Array([3,255,255,255,255,255,255]),new Uint8Array([1,255,255,255,255,255,255,255])];function v(a,b){__p&&__p();if(!a&&!b)return!0;if(!a||!b)return!1;if(a.length!=b.length)return!1;for(var c=0;c<a.length;++c)if(a[c]!=b[c])return!1;return!0}function w(a,b){this.id=a,this.$1=b}w.prototype.getOffset=function(){return this.$1.byteOffset};w.prototype.createParser=function(){return new x(this.$1)};w.prototype.getUint=function(){__p&&__p();if(this.$1.byteLength>8)throw new RangeError("EbmlElement: Unsigned integer has too many bytes.");if(this.$1.byteLength==8&&this.$1.getUint8(0)&224)throw new RangeError("EbmlParser: Unsigned integer must be at most 53 bits.");var a=0;for(var b=0;b<this.$1.byteLength;b++){var c=this.$1.getUint8(b);a=256*a+c}return a};w.prototype.getFloat=function(){if(this.$1.byteLength==4)return this.$1.getFloat32(0);else if(this.$1.byteLength==8)return this.$1.getFloat64(0);else throw new RangeError("EbmlElement: floating point numbers must be 4 or 8 bytes.")};function x(a){this.$1=a,this.$2=new h(this.$1)}x.prototype.hasMoreData=function(){return this.$2.hasMoreData()};x.prototype.parseElement=function(){var a=this.$3(),b=this.$4(),c;x.$5(b)?c=this.$1.byteLength-this.$2.getCursor():c=x.$6(b);b=this.$2.getCursor()+c<=this.$1.byteLength?c:this.$1.byteLength-this.$2.getCursor();c=new DataView(this.$1.buffer,this.$1.byteOffset+this.$2.getCursor(),b);this.$2.skip(b);return new w(a,c)};x.prototype.$3=function(){var a=this.$4();if(a.length>7)throw new RangeError("EbmlParser: EBML ID must be at most 7 bytes.");var b=0;for(var c=0;c<a.length;c++)b=256*b+a[c];return b};x.prototype.$4=function(){__p&&__p();var a=this.$2.readUint8(),b;for(b=1;b<=8;b++){var c=1<<8-b;if(a&c)break}if(b>8)throw new RangeError("EbmlParser: Variable sized integer must fit within 8 bytes.");c=new Uint8Array(b);c[0]=a;for(var a=1;a<b;a++)c[a]=this.$2.readUint8();return c};x.$6=function(a){if(a.length==8&&a[1]&224)throw new RangeError("EbmlParser: Variable sized integer value must be at most 53 bits.");var b=1<<8-a.length;b=a[0]&b-1;for(var c=1;c<a.length;c++)b=256*b+a[c];return b};x.$5=function(a){for(var b=0;b<u.length;b++)if(v(a,u[b]))return!0;return!1};function y(a){__p&&__p();a=a.createParser();var b=1e6,c=null;while(a.hasMoreData()){var d=a.parseElement();d.id==n?b=d.getUint():d.id==o&&(c=d.getFloat())}if(c==null)return null;d=b/1e9;a=c*d;return{timecodeScale:d,duration:a}}function z(a,b,c,d,e){__p&&__p();var f=[];a=a.createParser();var h=-1,i=-1;while(a.hasMoreData()){var k=a.parseElement();if(k.id!=q)continue;k=A(k);if(!k)continue;var l=c*k.unscaledTime;k=b+k.relativeOffset;h>=0&&(i>=0||j(0,4010),f.push(new g(e,h,l,i,k-1)));h=l;i=k}h>=0&&(i>=0||j(0,4010),f.push(new g(e,h,d,i,null)));return f}function A(a){__p&&__p();a=a.createParser();var b=a.parseElement();if(b.id!=r)return null;b=b.getUint();a=a.parseElement();if(a.id!=s)return null;a=a.createParser();var c=0;while(a.hasMoreData()){var d=a.parseElement();if(d.id!=t)continue;c=d.getUint();break}return{unscaledTime:b,relativeOffset:c}}function B(a){__p&&__p();a=a.createParser();var b=null;while(a.hasMoreData()){var c=a.parseElement();if(c.id!=m)continue;b=c;break}return!b?null:y(b)}function C(a){__p&&__p();a=new x(a);var b=a.parseElement();if(b.id!=k)return null;b=a.parseElement();if(b.id!=l)return null;a=b.getOffset();b=B(b);return!b?null:{segmentOffset:a,timecodeScale:b.timecodeScale,duration:b.duration}}function a(a,b,c){c=new DataView(c.buffer);b=new DataView(b.buffer);c=C(c);if(!c)return[];b=new x(b);b=b.parseElement();return b.id!=p?[]:z(b,c.segmentOffset,c.timecodeScale,c.duration,new i(a))}e.exports={parse:a}}),null);
__d("oz-player/utils/OzErrorEmitter",["oz-player/shims/OzEventEmitter","oz-player/shims/ozvariant"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;b=babelHelpers.inherits(a,g);i=b&&b.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=i.constructor).call.apply(a,[this].concat(d)),this.$OzErrorEmitter1=!1,this.emitError=function(a){this.$OzErrorEmitter1||h(0,4599),this.emit("error",a)}.bind(this),b}a.prototype.onError=function(a){this.$OzErrorEmitter1=!0;return this.addListener("error",a)};e.exports=a}),null);
__d("oz-player/utils/OzReadableStreamUtils",["oz-player/utils/ozConcatArrayBuffer"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function h(a){return TextDecoder?new TextDecoder("utf-8").decode(new Uint8Array(a)):String.fromCharCode.apply(null,a)}function i(a){__p&&__p();var b=new ArrayBuffer(0),c=function c(){return a.read().then(function(a){var d=a.value;a=a.done;if(a)return null;if(!d)return null;b=g(b,d);return c()})};return c().then(function(){return new Uint8Array(b)})}function a(a){return i(a).then(function(a){return h(a)})}e.exports={pumpString:a,pumpAllData:i}}),null);
__d("oz-player/parsers/OzSidxSegmentsParser",["oz-player/loggings/OzLoggingUtils","oz-player/manifests/OzZeroTimeRangeSegment","oz-player/shims/OzEventEmitter","oz-player/shims/OzMaybeNativePromise","oz-player/shims/OzURI","oz-player/utils/OzErrorEmitter","oz-player/utils/OzReadableStreamUtils","oz-player/parsers/OzMp4SidxParser","oz-player/parsers/OzWebmSidxParser"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){"use strict";__p&&__p();var p=g.monitorPromiseAndLogOperation,q=m.pumpAllData;function r(a){a=a.split("-");return{startByte:Number.parseInt(a[0],10),endByte:Number.parseInt(a[1],10)}}function s(a,b,c){c===void 0&&(c=null),this.$1=a,this.$2=b,this.$3=c}s.prototype.getSegmentByTime=function(a){var b=this.$1();for(var c=0;c<b.length;c++){var d=b[c],e=d.getTimeRange();if(e.startTime<=a&&e.endTime>a)return d}return null};s.prototype.getSegmentAfter=function(a){var b=this.$1(),c=b.findIndex(function(b){return b.getTimeRange().startTime===a.getTimeRange().startTime&&b.getTimeRange().endTime===a.getTimeRange().endTime});return c>=0&&c+1<b.length?b[c+1]:null};s.prototype.isEndingSegment=function(a){var b=this.$1();if(!b||!b.length)return!1;b=b[b.length-1].getTimeRange();a=a.getTimeRange();return b.startTime===a.startTime&&b.endTime===a.endTime};s.prototype.getSegment=function(a){return this.$1()[a]||null};s.prototype.updateWith=function(a){throw new Error("Not implemented")};s.prototype.addUpdateListener=function(a){this.$3&&(this.$3(),this.$3=null);return this.$2.addListener("segment_updated",a)};s.prototype.getTimeRanges=function(){var a=this.$1();if(a.length===0)return[];else{var b=a[0];a=a[a.length-1];return[{startTime:b.getTimeRange().startTime,endTime:a.getTimeRange().endTime}]}};function a(a,b,c,d,e,f){this.$5=new l(),this.$6=[],this.$8=new i(),this.$1=b,this.$2=c,this.$3=d,this.$4=e,this.$7=f.cloneContext().setType("sidx"),this.$9=a}a.prototype.onError=function(a){return this.$5.onError(a)};a.prototype.parseInitializationSegment=function(){var a=this.$1.Initialization[0].$.range,b=r(a);a={getURI:function(){return new k(this.$2)}.bind(this),getTimeRange:function(){return{startTime:0,endTime:0}},getByteRange:function(){return b}};return a};a.prototype.parseSegmentsContainer=function(){var a=function(){p(this.$10(),this.$7,"process_sidx")["catch"](this.$5.emitError)}.bind(this),b=this.$9.getBool("lazy_parse_sidx",!1);b||a();b=new s(function(){return this.$6}.bind(this),this.$8,b?a:null);return b};a.prototype.$11=function(a,b){a=new h(new k(a),b.startByte,b.endByte);b=this.$4.request([a],this.$7);a=b.getStream().getReader();return q(a)};a.prototype.$10=function(){__p&&__p();var a=this.$1.$.indexRange,b=r(a);a=[this.$11(this.$2,b)];if(this.$3==="webm"){var c=r(this.$1.Initialization[0].$.range);a.push(this.$11(this.$2,c));c=j.all(a).then(function(a){var b=a[0];a=a[1];this.$6=o.parse(this.$2,b,a)}.bind(this))}else c=a[0].then(function(a){this.$6=n.parse(this.$2,b.startByte,a)}.bind(this));return c.then(function(){this.$8.emit("segment_updated")}.bind(this))};e.exports=a}),null);
__d("oz-player/parsers/OzVideoContainerType",[],(function(a,b,c,d,e,f){"use strict";function a(a){return(a.split("/")[1]||"").trim()}e.exports={parse:a}}),null);
__d("oz-player/parsers/OzRepresentationParser",["oz-player/manifests/OzRepresentation","oz-player/utils/OzError","oz-player/utils/OzErrorEmitter","oz-player/parsers/OzSegmentTemplateParser","oz-player/parsers/OzSidxSegmentsParser","oz-player/parsers/OzVideoContainerType"],(function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";__p&&__p();function a(a,b,c,d,e,f){this.$2=new i(),this.$1=b,this.$3=d,this.$4=e,this.$6=c,this.$7=a,this.$8=f}a.prototype.$9=function(){__p&&__p();if(this.$5)return this.$5;if(this.$1.SegmentBase){var a=this.$1.SegmentBase[0],b=this.$1.BaseURL[0]._;this.$5=new k(this.$7,a,b,l.parse(this.$1.$.mimeType),this.$3,this.$4);this.$5.onError(this.$2.emitError)}else if(this.$1.SegmentTemplate){a=this.$6.mpdUrl;if(a===null||a===undefined){b=new h({type:"OZ_REPRESENTATION_PARSER",description:"Missing mpd url for template manifest"});throw b}b=this.$1.SegmentTemplate[0];this.$5=new j(this.$7,b,{baseUrl:a,isStaticMpd:this.$8==="static"})}else{b=new h({type:"OZ_REPRESENTATION_PARSER",description:"Unrecognized representation type"});throw b}return this.$5};a.prototype.onError=function(a){return this.$2.onError(a)};a.prototype.parseInitSegment=function(){return this.$9().parseInitializationSegment()};a.prototype.parseBandwidth=function(){return Number(this.$1.$.bandwidth)};a.prototype.parseMimeCodecs=function(){return this.$1.$.mimeType+'; codecs="'+this.$1.$.codecs+'"'};a.prototype.parseSegmentsContainer=function(){return this.$9().parseSegmentsContainer()};a.prototype.parseID=function(){return""+this.$1.$.id};a.prototype.parseCustomFieldFirstSegment=function(){var a=this.$6.customRepresentationParsers?this.$6.customRepresentationParsers.firstSegmentParser:null;return a?a(this.$1):null};a.prototype.parse=function(){return new g(this.$1,this.parseID(),this.parseMimeCodecs(),this.parseInitSegment(),this.parseSegmentsContainer(),this.parseBandwidth(),this.parseCustomFieldFirstSegment(),this.$6.customRepresentationParsers)};e.exports=a}),null);
__d("oz-player/parsers/OzVideoRepresentationParser",["oz-player/manifests/OzVideoRepresentation","oz-player/parsers/OzRepresentationParser"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;b=babelHelpers.inherits(a,h);i=b&&b.prototype;function a(a,b,c,d,e,f){i.constructor.call(this,a,b,c,d,e,f),this.$OzVideoRepresentationParser1=b,this.$OzVideoRepresentationParser2=c}a.prototype.parse=function(){var a=Number.parseInt(this.$OzVideoRepresentationParser1.$.height,10),b=Number.parseInt(this.$OzVideoRepresentationParser1.$.width,10);return new g(this.$OzVideoRepresentationParser1,this.parseID(),this.parseMimeCodecs(),this.parseInitSegment(),this.parseSegmentsContainer(),this.parseBandwidth(),this.parseCustomFieldFirstSegment(),this.$OzVideoRepresentationParser2.customRepresentationParsers,b,a)};e.exports=a}),null);
/**
 * License: https://www.facebook.com/legal/license/yfmK3YA3_Vc/
 */
__d("sax-1.2.4",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={},h={exports:g};function i(){__p&&__p();(function(a){__p&&__p();a.parser=function(a,b){return new c(a,b)};a.SAXParser=c;a.MAX_BUFFER_LENGTH=64*1024;var b=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];a.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function c(b,d){__p&&__p();if(!(this instanceof c))return new c(b,d);var f=this;e(f);f.q=f.c="";f.bufferCheckPosition=a.MAX_BUFFER_LENGTH;f.opt=d||{};f.opt.lowercase=f.opt.lowercase||f.opt.lowercasetags;f.looseCase=f.opt.lowercase?"toLowerCase":"toUpperCase";f.tags=[];f.closed=f.closedRoot=f.sawRoot=!1;f.tag=f.error=null;f.strict=!!b;f.noscript=!!(b||f.opt.noscript);f.state=u.BEGIN;f.strictEntities=f.opt.strictEntities;f.ENTITIES=f.strictEntities?Object.create(a.XML_ENTITIES):Object.create(a.ENTITIES);f.attribList=[];f.opt.xmlns&&(f.ns=Object.create(k));f.trackPosition=f.opt.position!==!1;f.trackPosition&&(f.position=f.line=f.column=0);w(f,"onready")}Object.create||(Object.create=function(a){function b(){}b.prototype=a;a=new b();return a});Object.keys||(Object.keys=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b});function d(c){__p&&__p();var d=Math.max(a.MAX_BUFFER_LENGTH,10),e=0;for(var f=0,g=b.length;f<g;f++){var h=c[b[f]].length;if(h>d)switch(b[f]){case"textNode":y(c);break;case"cdata":x(c,"oncdata",c.cdata);c.cdata="";break;case"script":x(c,"onscript",c.script);c.script="";break;default:A(c,"Max buffer length exceeded: "+b[f])}e=Math.max(e,h)}h=a.MAX_BUFFER_LENGTH-e;c.bufferCheckPosition=h+c.position}function e(a){for(var c=0,d=b.length;c<d;c++)a[b[c]]=""}function f(a){y(a),a.cdata!==""&&(x(a,"oncdata",a.cdata),a.cdata=""),a.script!==""&&(x(a,"onscript",a.script),a.script="")}c.prototype={end:function(){B(this)},write:L,resume:function(){this.error=null;return this},close:function(){return this.write(null)},flush:function(){f(this)}};var g="[CDATA[",h="DOCTYPE",i="http://www.w3.org/XML/1998/namespace",j="http://www.w3.org/2000/xmlns/",k={xml:i,xmlns:j},l=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,m=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,n=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,o=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function p(a){return a===" "||a==="\n"||a==="\r"||a==="\t"}function q(a){return a==='"'||a==="'"}function r(a){return a===">"||p(a)}function s(a,b){return a.test(b)}function t(a,b){return!s(a,b)}var u=0;a.STATE={BEGIN:u++,BEGIN_WHITESPACE:u++,TEXT:u++,TEXT_ENTITY:u++,OPEN_WAKA:u++,SGML_DECL:u++,SGML_DECL_QUOTED:u++,DOCTYPE:u++,DOCTYPE_QUOTED:u++,DOCTYPE_DTD:u++,DOCTYPE_DTD_QUOTED:u++,COMMENT_STARTING:u++,COMMENT:u++,COMMENT_ENDING:u++,COMMENT_ENDED:u++,CDATA:u++,CDATA_ENDING:u++,CDATA_ENDING_2:u++,PROC_INST:u++,PROC_INST_BODY:u++,PROC_INST_ENDING:u++,OPEN_TAG:u++,OPEN_TAG_SLASH:u++,ATTRIB:u++,ATTRIB_NAME:u++,ATTRIB_NAME_SAW_WHITE:u++,ATTRIB_VALUE:u++,ATTRIB_VALUE_QUOTED:u++,ATTRIB_VALUE_CLOSED:u++,ATTRIB_VALUE_UNQUOTED:u++,ATTRIB_VALUE_ENTITY_Q:u++,ATTRIB_VALUE_ENTITY_U:u++,CLOSE_TAG:u++,CLOSE_TAG_SAW_WHITE:u++,SCRIPT:u++,SCRIPT_ENDING:u++};a.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"};a.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830};Object.keys(a.ENTITIES).forEach(function(b){var c=a.ENTITIES[b];c=typeof c==="number"?String.fromCharCode(c):c;a.ENTITIES[b]=c});for(var v in a.STATE)a.STATE[a.STATE[v]]=v;u=a.STATE;function w(a,event,b){a[event]&&a[event](b)}function x(a,b,c){a.textNode&&y(a),w(a,b,c)}function y(a){a.textNode=z(a.opt,a.textNode),a.textNode&&w(a,"ontext",a.textNode),a.textNode=""}function z(a,b){a.trim&&(b=b.trim());a.normalize&&(b=b.replace(/\s+/g," "));return b}function A(a,b){y(a);a.trackPosition&&(b+="\nLine: "+a.line+"\nColumn: "+a.column+"\nChar: "+a.c);b=new Error(b);a.error=b;w(a,"onerror",b);return a}function B(a){a.sawRoot&&!a.closedRoot&&C(a,"Unclosed root tag");a.state!==u.BEGIN&&a.state!==u.BEGIN_WHITESPACE&&a.state!==u.TEXT&&A(a,"Unexpected end");y(a);a.c="";a.closed=!0;w(a,"onend");c.call(a,a.strict,a.opt);return a}function C(a,b){if(typeof a!=="object"||!(a instanceof c))throw new Error("bad call to strictFail");a.strict&&A(a,b)}function D(a){a.strict||(a.tagName=a.tagName[a.looseCase]());var b=a.tags[a.tags.length-1]||a,c=a.tag={name:a.tagName,attributes:{}};a.opt.xmlns&&(c.ns=b.ns);a.attribList.length=0;x(a,"onopentagstart",c)}function E(a,b){var c=a.indexOf(":");c=c<0?["",a]:a.split(":");var d=c[0];c=c[1];b&&a==="xmlns"&&(d="xmlns",c="");return{prefix:d,local:c}}function F(a){__p&&__p();a.strict||(a.attribName=a.attribName[a.looseCase]());if(a.attribList.indexOf(a.attribName)!==-1||a.tag.attributes.hasOwnProperty(a.attribName)){a.attribName=a.attribValue="";return}if(a.opt.xmlns){var b=E(a.attribName,!0),c=b.prefix;b=b.local;if(c==="xmlns")if(b==="xml"&&a.attribValue!==i)C(a,"xml: prefix must be bound to "+i+"\nActual: "+a.attribValue);else if(b==="xmlns"&&a.attribValue!==j)C(a,"xmlns: prefix must be bound to "+j+"\nActual: "+a.attribValue);else{c=a.tag;var d=a.tags[a.tags.length-1]||a;c.ns===d.ns&&(c.ns=Object.create(d.ns));c.ns[b]=a.attribValue}a.attribList.push([a.attribName,a.attribValue])}else a.tag.attributes[a.attribName]=a.attribValue,x(a,"onattribute",{name:a.attribName,value:a.attribValue});a.attribName=a.attribValue=""}function G(a,b){__p&&__p();if(a.opt.xmlns){var c=a.tag,d=E(a.tagName);c.prefix=d.prefix;c.local=d.local;c.uri=c.ns[d.prefix]||"";c.prefix&&!c.uri&&(C(a,"Unbound namespace prefix: "+JSON.stringify(a.tagName)),c.uri=d.prefix);d=a.tags[a.tags.length-1]||a;c.ns&&d.ns!==c.ns&&Object.keys(c.ns).forEach(function(b){x(a,"onopennamespace",{prefix:b,uri:c.ns[b]})});for(var d=0,e=a.attribList.length;d<e;d++){var f=a.attribList[d],g=f[0];f=f[1];var h=E(g,!0),i=h.prefix;h=h.local;var j=i===""?"":c.ns[i]||"";f={name:g,value:f,prefix:i,local:h,uri:j};i&&i!=="xmlns"&&!j&&(C(a,"Unbound namespace prefix: "+JSON.stringify(i)),f.uri=i);a.tag.attributes[g]=f;x(a,"onattribute",f)}a.attribList.length=0}a.tag.isSelfClosing=!!b;a.sawRoot=!0;a.tags.push(a.tag);x(a,"onopentag",a.tag);b||(!a.noscript&&a.tagName.toLowerCase()==="script"?a.state=u.SCRIPT:a.state=u.TEXT,a.tag=null,a.tagName="");a.attribName=a.attribValue="";a.attribList.length=0}function H(a){__p&&__p();if(!a.tagName){C(a,"Weird empty close tag.");a.textNode+="</>";a.state=u.TEXT;return}if(a.script){if(a.tagName!=="script"){a.script+="</"+a.tagName+">";a.tagName="";a.state=u.SCRIPT;return}x(a,"onscript",a.script);a.script=""}var b=a.tags.length,c=a.tagName;a.strict||(c=c[a.looseCase]());var d=c;while(b--){var e=a.tags[b];if(e.name!==d)C(a,"Unexpected close tag");else break}if(b<0){C(a,"Unmatched closing tag: "+a.tagName);a.textNode+="</"+a.tagName+">";a.state=u.TEXT;return}a.tagName=c;e=a.tags.length;while(e-->b){var f=a.tag=a.tags.pop();a.tagName=a.tag.name;x(a,"onclosetag",a.tagName);d={};for(var g in f.ns)d[g]=f.ns[g];c=a.tags[a.tags.length-1]||a;a.opt.xmlns&&f.ns!==c.ns&&Object.keys(f.ns).forEach(function(b){var c=f.ns[b];x(a,"onclosenamespace",{prefix:b,uri:c})})}b===0&&(a.closedRoot=!0);a.tagName=a.attribValue=a.attribName="";a.attribList.length=0;a.state=u.TEXT}function I(a){__p&&__p();var b=a.entity,c=b.toLowerCase(),d,e="";if(a.ENTITIES[b])return a.ENTITIES[b];if(a.ENTITIES[c])return a.ENTITIES[c];b=c;b.charAt(0)==="#"&&(b.charAt(1)==="x"?(b=b.slice(2),d=parseInt(b,16),e=d.toString(16)):(b=b.slice(1),d=parseInt(b,10),e=d.toString(10)));b=b.replace(/^0+/,"");if(isNaN(d)||e.toLowerCase()!==b){C(a,"Invalid character entity");return"&"+a.entity+";"}return String.fromCodePoint(d)}function J(a,b){b==="<"?(a.state=u.OPEN_WAKA,a.startTagPosition=a.position):p(b)||(C(a,"Non-whitespace before first tag."),a.textNode=b,a.state=u.TEXT)}function K(a,b){var c="";b<a.length&&(c=a.charAt(b));return c}function L(a){__p&&__p();var b=this;if(this.error)throw this.error;if(b.closed)return A(b,"Cannot write after close. Assign an onready handler.");if(a===null)return B(b);typeof a==="object"&&(a=a.toString());var c=0,e="";while(!0){e=K(a,c++);b.c=e;if(!e)break;b.trackPosition&&(b.position++,e==="\n"?(b.line++,b.column=0):b.column++);switch(b.state){case u.BEGIN:b.state=u.BEGIN_WHITESPACE;if(e==="\ufeff")continue;J(b,e);continue;case u.BEGIN_WHITESPACE:J(b,e);continue;case u.TEXT:if(b.sawRoot&&!b.closedRoot){var f=c-1;while(e&&e!=="<"&&e!=="&")e=K(a,c++),e&&b.trackPosition&&(b.position++,e==="\n"?(b.line++,b.column=0):b.column++);b.textNode+=a.substring(f,c-1)}e==="<"&&!(b.sawRoot&&b.closedRoot&&!b.strict)?(b.state=u.OPEN_WAKA,b.startTagPosition=b.position):(!p(e)&&(!b.sawRoot||b.closedRoot)&&C(b,"Text data outside of root node."),e==="&"?b.state=u.TEXT_ENTITY:b.textNode+=e);continue;case u.SCRIPT:e==="<"?b.state=u.SCRIPT_ENDING:b.script+=e;continue;case u.SCRIPT_ENDING:e==="/"?b.state=u.CLOSE_TAG:(b.script+="<"+e,b.state=u.SCRIPT);continue;case u.OPEN_WAKA:if(e==="!")b.state=u.SGML_DECL,b.sgmlDecl="";else if(!p(e))if(s(l,e))b.state=u.OPEN_TAG,b.tagName=e;else if(e==="/")b.state=u.CLOSE_TAG,b.tagName="";else if(e==="?")b.state=u.PROC_INST,b.procInstName=b.procInstBody="";else{C(b,"Unencoded <");if(b.startTagPosition+1<b.position){f=b.position-b.startTagPosition;e=new Array(f).join(" ")+e}b.textNode+="<"+e;b.state=u.TEXT}continue;case u.SGML_DECL:(b.sgmlDecl+e).toUpperCase()===g?(x(b,"onopencdata"),b.state=u.CDATA,b.sgmlDecl="",b.cdata=""):b.sgmlDecl+e==="--"?(b.state=u.COMMENT,b.comment="",b.sgmlDecl=""):(b.sgmlDecl+e).toUpperCase()===h?(b.state=u.DOCTYPE,(b.doctype||b.sawRoot)&&C(b,"Inappropriately located doctype declaration"),b.doctype="",b.sgmlDecl=""):e===">"?(x(b,"onsgmldeclaration",b.sgmlDecl),b.sgmlDecl="",b.state=u.TEXT):q(e)?(b.state=u.SGML_DECL_QUOTED,b.sgmlDecl+=e):b.sgmlDecl+=e;continue;case u.SGML_DECL_QUOTED:e===b.q&&(b.state=u.SGML_DECL,b.q="");b.sgmlDecl+=e;continue;case u.DOCTYPE:e===">"?(b.state=u.TEXT,x(b,"ondoctype",b.doctype),b.doctype=!0):(b.doctype+=e,e==="["?b.state=u.DOCTYPE_DTD:q(e)&&(b.state=u.DOCTYPE_QUOTED,b.q=e));continue;case u.DOCTYPE_QUOTED:b.doctype+=e;e===b.q&&(b.q="",b.state=u.DOCTYPE);continue;case u.DOCTYPE_DTD:b.doctype+=e;e==="]"?b.state=u.DOCTYPE:q(e)&&(b.state=u.DOCTYPE_DTD_QUOTED,b.q=e);continue;case u.DOCTYPE_DTD_QUOTED:b.doctype+=e;e===b.q&&(b.state=u.DOCTYPE_DTD,b.q="");continue;case u.COMMENT:e==="-"?b.state=u.COMMENT_ENDING:b.comment+=e;continue;case u.COMMENT_ENDING:e==="-"?(b.state=u.COMMENT_ENDED,b.comment=z(b.opt,b.comment),b.comment&&x(b,"oncomment",b.comment),b.comment=""):(b.comment+="-"+e,b.state=u.COMMENT);continue;case u.COMMENT_ENDED:e!==">"?(C(b,"Malformed comment"),b.comment+="--"+e,b.state=u.COMMENT):b.state=u.TEXT;continue;case u.CDATA:e==="]"?b.state=u.CDATA_ENDING:b.cdata+=e;continue;case u.CDATA_ENDING:e==="]"?b.state=u.CDATA_ENDING_2:(b.cdata+="]"+e,b.state=u.CDATA);continue;case u.CDATA_ENDING_2:e===">"?(b.cdata&&x(b,"oncdata",b.cdata),x(b,"onclosecdata"),b.cdata="",b.state=u.TEXT):e==="]"?b.cdata+="]":(b.cdata+="]]"+e,b.state=u.CDATA);continue;case u.PROC_INST:e==="?"?b.state=u.PROC_INST_ENDING:p(e)?b.state=u.PROC_INST_BODY:b.procInstName+=e;continue;case u.PROC_INST_BODY:if(!b.procInstBody&&p(e))continue;else e==="?"?b.state=u.PROC_INST_ENDING:b.procInstBody+=e;continue;case u.PROC_INST_ENDING:e===">"?(x(b,"onprocessinginstruction",{name:b.procInstName,body:b.procInstBody}),b.procInstName=b.procInstBody="",b.state=u.TEXT):(b.procInstBody+="?"+e,b.state=u.PROC_INST_BODY);continue;case u.OPEN_TAG:s(m,e)?b.tagName+=e:(D(b),e===">"?G(b):e==="/"?b.state=u.OPEN_TAG_SLASH:(p(e)||C(b,"Invalid character in tag name"),b.state=u.ATTRIB));continue;case u.OPEN_TAG_SLASH:e===">"?(G(b,!0),H(b)):(C(b,"Forward-slash in opening tag not followed by >"),b.state=u.ATTRIB);continue;case u.ATTRIB:if(p(e))continue;else e===">"?G(b):e==="/"?b.state=u.OPEN_TAG_SLASH:s(l,e)?(b.attribName=e,b.attribValue="",b.state=u.ATTRIB_NAME):C(b,"Invalid attribute name");continue;case u.ATTRIB_NAME:e==="="?b.state=u.ATTRIB_VALUE:e===">"?(C(b,"Attribute without value"),b.attribValue=b.attribName,F(b),G(b)):p(e)?b.state=u.ATTRIB_NAME_SAW_WHITE:s(m,e)?b.attribName+=e:C(b,"Invalid attribute name");continue;case u.ATTRIB_NAME_SAW_WHITE:if(e==="=")b.state=u.ATTRIB_VALUE;else if(p(e))continue;else C(b,"Attribute without value"),b.tag.attributes[b.attribName]="",b.attribValue="",x(b,"onattribute",{name:b.attribName,value:""}),b.attribName="",e===">"?G(b):s(l,e)?(b.attribName=e,b.state=u.ATTRIB_NAME):(C(b,"Invalid attribute name"),b.state=u.ATTRIB);continue;case u.ATTRIB_VALUE:if(p(e))continue;else q(e)?(b.q=e,b.state=u.ATTRIB_VALUE_QUOTED):(C(b,"Unquoted attribute value"),b.state=u.ATTRIB_VALUE_UNQUOTED,b.attribValue=e);continue;case u.ATTRIB_VALUE_QUOTED:if(e!==b.q){e==="&"?b.state=u.ATTRIB_VALUE_ENTITY_Q:b.attribValue+=e;continue}F(b);b.q="";b.state=u.ATTRIB_VALUE_CLOSED;continue;case u.ATTRIB_VALUE_CLOSED:p(e)?b.state=u.ATTRIB:e===">"?G(b):e==="/"?b.state=u.OPEN_TAG_SLASH:s(l,e)?(C(b,"No whitespace between attributes"),b.attribName=e,b.attribValue="",b.state=u.ATTRIB_NAME):C(b,"Invalid attribute name");continue;case u.ATTRIB_VALUE_UNQUOTED:if(!r(e)){e==="&"?b.state=u.ATTRIB_VALUE_ENTITY_U:b.attribValue+=e;continue}F(b);e===">"?G(b):b.state=u.ATTRIB;continue;case u.CLOSE_TAG:if(!b.tagName)if(p(e))continue;else t(l,e)?b.script?(b.script+="</"+e,b.state=u.SCRIPT):C(b,"Invalid tagname in closing tag."):b.tagName=e;else e===">"?H(b):s(m,e)?b.tagName+=e:b.script?(b.script+="</"+b.tagName,b.tagName="",b.state=u.SCRIPT):(p(e)||C(b,"Invalid tagname in closing tag"),b.state=u.CLOSE_TAG_SAW_WHITE);continue;case u.CLOSE_TAG_SAW_WHITE:if(p(e))continue;e===">"?H(b):C(b,"Invalid characters in closing tag");continue;case u.TEXT_ENTITY:case u.ATTRIB_VALUE_ENTITY_Q:case u.ATTRIB_VALUE_ENTITY_U:var i,j;switch(b.state){case u.TEXT_ENTITY:i=u.TEXT;j="textNode";break;case u.ATTRIB_VALUE_ENTITY_Q:i=u.ATTRIB_VALUE_QUOTED;j="attribValue";break;case u.ATTRIB_VALUE_ENTITY_U:i=u.ATTRIB_VALUE_UNQUOTED;j="attribValue";break}e===";"?(b[j]+=I(b),b.entity="",b.state=i):s(b.entity.length?o:n,e)?b.entity+=e:(C(b,"Invalid character in entity name"),b[j]+="&"+b.entity+e,b.entity="",b.state=i);continue;default:throw new Error(b,"Unknown state: "+b.state)}}b.position>=b.bufferCheckPosition&&d(b);return b}String.fromCodePoint||(function(){__p&&__p();var a=String.fromCharCode,b=Math.floor,c=function(){__p&&__p();var c=16384,d=[],e,f,g=-1,h=arguments.length;if(!h)return"";var i="";while(++g<h){var j=Number(arguments[g]);if(!isFinite(j)||j<0||j>1114111||b(j)!==j)throw RangeError("Invalid code point: "+j);j<=65535?d.push(j):(j-=65536,e=(j>>10)+55296,f=j%1024+56320,d.push(e,f));(g+1===h||d.length>c)&&(i+=a.apply(null,d),d.length=0)}return i};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:c,configurable:!0,writable:!0}):String.fromCodePoint=c})()})(typeof g==="undefined"?this.sax={}:g)}var j=!1,k=function(){j||(j=!0,i());return h.exports};a=function(a){switch(a){case undefined:return k()}};e.exports=a}),null);
__d("sax",["sax-1.2.4"],(function(a,b,c,d,e,f){e.exports=b("sax-1.2.4")()}),null);
__d("oz-player/shims/OzSax",["sax"],(function(a,b,c,d,e,f){e.exports=b("sax")}),null);
__d("oz-player/parsers/OzXmlParser",["oz-player/shims/OzSax","oz-player/shims/ozvariant"],(function(a,b,c,d,e,f,g,h){__p&&__p();function i(){return{$:{}}}function a(){"use strict";__p&&__p();this.$4=[];this.$6=function(a){a=a.name;var b=i(),c=this.$3||this.$2;c||h(0,219);Object.prototype.hasOwnProperty.call(c,a)||(c[a]=[]);c[a].push(b);this.$4.push(c);this.$3=b}.bind(this);this.$8=function(){var a=this.$4.pop();this.$3=a}.bind(this);this.$9=function(a){a=a.trim();if(!a)return;var b=this.$3;b||h(0,220);b._&&h(0,221);b._=a}.bind(this);this.$7=function(a){var b=a.name;a=a.value;var c=this.$3;c||h(0,222);c.$[b]=a}.bind(this);var a=!0;a=this.$1=g.parser(a);a.onerror=this.$5;a.onopentagstart=this.$6;a.onattribute=this.$7;a.onclosetag=this.$8;a.ontext=this.$9}a.prototype.$5=function(a){"use strict";throw a};a.prototype.parse=function(a){"use strict";__p&&__p();var b=i();this.$2=b;try{this.$1.write(a).close()}catch(a){throw a}this.$3=null;this.$2=null;this.$4=[];return b};e.exports=a}),null);
__d("oz-player/parsers/OzMpdParser",["oz-player/shims/ozvariant","oz-player/utils/OzErrorEmitter","oz-player/parsers/OzRepresentationParser","oz-player/parsers/OzVideoRepresentationParser","oz-player/parsers/OzXmlParser"],(function(a,b,c,d,e,f,g,h,i,j,k){"use strict";__p&&__p();function l(a,b,c,d,e,f,g){this.$1=a,this.$4=e,this.$2=b,this.$3=c,this.$5=d,this.$6=f,this.$7=g}l.prototype.getLocation=function(){return this.$5};l.prototype.getMinimumUpdatePeriod=function(){return this.$4};l.prototype.getVideoRepresentations=function(){return this.$2};l.prototype.getAudioRepresentations=function(){return this.$3};l.prototype.getCustomField=function(a){var b=this.$6.get(a);if(!b)throw new Error("Custom parser not specified for field "+a);return b(this.$1)};l.prototype.isStaticMpd=function(){return this.$7};l.prototype.updateWith=function(a){this.$8(this.$2,a.getVideoRepresentations()),this.$8(this.$3,a.getAudioRepresentations()),this.$7=a.isStaticMpd(),this.$4=a.getMinimumUpdatePeriod()};l.prototype.$8=function(a,b){__p&&__p();for(var c=0;c<b.length;c++){var d=b[c],e=!1;for(var f=0;f<a.length;f++){var g=a[f];if(d.getID()===g.getID()){g.updateWith(d);e=!0;break}}e||a.push(d)}};function a(a,b,c,d){this.$2=new h(),this.$5=a,this.$1=c,this.$3=d,this.$4=b}a.prototype.onError=function(a){return this.$2.onError(a)};a.prototype.parse=function(a){__p&&__p();var b=null;a=new k().parse(a);b=a.MPD[0];b||g(0,3628);b.Period.length>0||g(0,3629);a=b.Period[0].AdaptationSet||[];var c=this.$6(b),d=this.$7(a,c);d.sort(function(a,b){return a.getHeight()-b.getHeight()});a=this.$8(a,"audio",c);var e=this.$4.mpdUrl;return new l(b,d,a,e,this.$9(b),this.$4.customParsers||new Map(),c==="static")};a.prototype.$9=function(a){a=a.$.minimumUpdatePeriod||"";a=/\d+/g.exec(a);if(a&&a.length){a=a[0];return a?Number.parseInt(a,10):null}return null};a.prototype.$6=function(a){return a.$.type||"static"};a.prototype.$10=function(a){var b=/video\/webm; codecs=\"av01.*\"/,c=a.some(function(a){return b.test(a.getMimeCodecs())});if(c){c=a.filter(function(a){return MediaSource.isTypeSupported(a.getMimeCodecs())&&b.test(a.getMimeCodecs())});return c.length>0?c:a.filter(function(a){return!b.test(a.getMimeCodecs())})}return a};a.prototype.$7=function(a,b){a=this.$11(a,"video");if(a){a=a.Representation.map(function(a){a=new j(this.$5,a,this.$4,this.$1,this.$3,b);a.onError(this.$2.emitError);return a.parse()}.bind(this));return this.$10(a)}return[]};a.prototype.$11=function(a,b){return a.find(function(a){a=a.Representation;return a&&a.length&&a[0].$.mimeType.indexOf(b)!==-1})};a.prototype.$8=function(a,b,c){a=this.$11(a,b);return a?a.Representation.map(function(a){a=new i(this.$5,a,this.$4,this.$1,this.$3,c);a.onError(this.$2.emitError);return a.parse()}.bind(this)):[]};e.exports=a}),null);
__d("oz-player/shims/ozSetTimeoutAcrossTransitions",["setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){"use strict";e.exports=b("setTimeoutAcrossTransitions")}),null);
__d("oz-player/utils/OzStreamInterruptChecker",["oz-player/shims/OzEventEmitter"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;b=babelHelpers.inherits(a,g);h=b&&b.prototype;function a(a,b){h.constructor.call(this),this.$OzStreamInterruptChecker3=0,this.$OzStreamInterruptChecker4=null,this.$OzStreamInterruptChecker5=!1,this.$OzStreamInterruptChecker1=a,this.$OzStreamInterruptChecker2=b}a.prototype.notifyMpdUpdated=function(){var a=this.$OzStreamInterruptChecker6();a!==null&&a===this.$OzStreamInterruptChecker4?this.$OzStreamInterruptChecker3++:(this.$OzStreamInterruptChecker3=0,this.$OzStreamInterruptChecker5&&this.$OzStreamInterruptChecker4!==null&&this.$OzStreamInterruptChecker4!==undefined&&this.emit("streamResumedAt",this.$OzStreamInterruptChecker4),this.$OzStreamInterruptChecker5=!1);var b=this.$OzStreamInterruptChecker2.getNumber("stream_interrupt_check_mpd_stale_count_threshold",0);!this.$OzStreamInterruptChecker5&&b>0&&this.$OzStreamInterruptChecker3>=b&&a!==null&&a!==undefined&&(this.emit("streamInterruptAt",a),this.$OzStreamInterruptChecker5=!0);this.$OzStreamInterruptChecker4=a};a.prototype.$OzStreamInterruptChecker6=function(){var a=[];a.push.apply(a,this.$OzStreamInterruptChecker1.getVideoRepresentations().concat(this.$OzStreamInterruptChecker1.getAudioRepresentations()));if(a.length){a=a[0].getTimeRanges();return a.length>0?a[a.length-1].endTime:null}return null};e.exports=a}),null);
__d("oz-player/parsers/OzMpdUpdater",["oz-player/shims/OzSubscriptionsHandler","oz-player/utils/OzStreamInterruptChecker","oz-player/shims/OzEventEmitter","oz-player/shims/ozSetTimeoutAcrossTransitions","oz-player/utils/OzErrorEmitter","oz-player/utils/OzReadableStreamUtils","oz-player/parsers/OzMpdParser"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m){"use strict";__p&&__p();var n,o=l.pumpString;b=babelHelpers.inherits(a,i);n=b&&b.prototype;function a(a,b,c,d){__p&&__p();n.constructor.call(this);this.$OzMpdUpdater8=new k();this.$OzMpdUpdater10=new g();this.$OzMpdUpdater11=function(){__p&&__p();var a=this.$OzMpdUpdater3.getLocation();if(!a)return;this.$OzMpdUpdater12(a).then(function(b){var c=new m(this.$OzMpdUpdater7,{mpdUrl:a},this.$OzMpdUpdater1,this.$OzMpdUpdater6);c.onError(this.$OzMpdUpdater8.emitError);c=c.parse(b);this.$OzMpdUpdater3.updateWith(c);this.$OzMpdUpdater9.notifyMpdUpdated();this.setupUpdateLoop()}.bind(this))["catch"](this.$OzMpdUpdater8.emitError)}.bind(this);var e=b.getMinimumUpdatePeriod();this.$OzMpdUpdater1=c;this.$OzMpdUpdater3=b;this.$OzMpdUpdater4=e;this.$OzMpdUpdater6=d.cloneContext().setType("mpd");this.$OzMpdUpdater7=a;this.$OzMpdUpdater9=new h(this.$OzMpdUpdater3,this.$OzMpdUpdater7);this.$OzMpdUpdater10.addSubscriptions(this.$OzMpdUpdater9.addListener("streamResumedAt",function(a){this.emit("streamResumedAt",a)}.bind(this)),this.$OzMpdUpdater9.addListener("streamInterruptAt",function(a){this.emit("streamInterruptAt",a)}.bind(this)))}a.prototype.setupUpdateLoop=function(){var a=!0;this.$OzMpdUpdater7.getBool("stop_manifest_update_when_static",!1)&&(a=!this.$OzMpdUpdater3.isStaticMpd(),this.$OzMpdUpdater4=this.$OzMpdUpdater3.getMinimumUpdatePeriod());a&&this.$OzMpdUpdater4&&this.$OzMpdUpdater3.getLocation()&&(this.$OzMpdUpdater5=j(this.$OzMpdUpdater11,this.$OzMpdUpdater4*1e3))};a.prototype.onError=function(a){return this.$OzMpdUpdater8.onError(a)};a.prototype.$OzMpdUpdater12=function(a){a=this.$OzMpdUpdater1.requestRawUrl(a,{credentials:"same-origin"},this.$OzMpdUpdater6);a=a.getStream().getReader();return o(a)};a.prototype.destroy=function(){this.$OzMpdUpdater5&&clearTimeout(this.$OzMpdUpdater5),this.$OzMpdUpdater10.release()};e.exports=a}),null);
__d("oz-player/strategies/LiveheadSeekaheadStrategy",[],(function(a,b,c,d,e,f){"use strict";var g=.05;function a(a,b){b=Math.max.apply(Math,b.map(function(a){return a.startTime}));return b-a>0?b-a+g:0}e.exports={computeSeekAhead:a}}),null);
__d("oz-player/utils/OzTimelineGapUtil",["oz-player/utils/OzNumericalHelper","oz-player/utils/OzNumericalRangeUtil"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=1.5;function a(a,b){b=b.map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}});return new h().findCurrentRangeIndex(a,b)===-1}function b(a,b){var c=b.map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}});c=new h().findCurrentRangeIndex(a,c);if(c!==-1){b=b[c];return g.lessThanOrEqual(a,b.endTime)&&b.endTime-a<i}return!1}e.exports={isNearGap:b,isInGap:a}}),null);
__d("oz-player/playback_controls/OzPlayheadManager",["oz-player/shims/OzEventListener","oz-player/shims/OzSubscriptionsHandler","oz-player/shims/ozvariant","oz-player/strategies/LiveheadSeekaheadStrategy","oz-player/utils/OzNumericalRangeUtil","oz-player/utils/OzTimelineGapUtil"],(function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";__p&&__p();var m=j.computeSeekAhead,n=l.isInGap,o=l.isNearGap,p=.1;function a(a,b,c,d,e){__p&&__p();this.$2=new h(),this.$3=new h(),this.$4=new Set(),this.$10=function(){__p&&__p();if(!this.$6.getBool("auto_seek_ahead_using_time_ranges",!1))return;var a=this.$5;if(!a)return;var b=this.$9;if(b&&b.isEnabled(this.$1,this.$8)){b=b.computeNewPlayheadPosition(this.$1,this.$8);if(typeof b==="number"){this.$1.currentTime=b;return}}b=this.$7.getCurrentTime();var c=a.getTimeRanges().map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}}),d=new k().findNextRangeIndex(b,c);if((o(b,a.getTimeRanges())||n(b,a.getTimeRanges()))&&d!==-1){b=c[d];this.$1.currentTime=b.rangeStart+p}}.bind(this),this.$1=a,this.$6=e,this.$7=d,this.$8=b,this.$9=c,this.$2.addSubscriptions(g.listen(this.$1,"pause",this.$10),g.listen(this.$1,"play",this.$10),g.listen(this.$1,"playing",this.$10),g.listen(this.$1,"waiting",this.$10))}a.prototype.observeSourceBufferState=function(a){if(this.$6.getBool("auto_seek_ahead_using_time_ranges",!1))return;this.$4.has(a)&&i(0,4179);this.$4.add(a);this.$2.addSubscriptions(a.addEventListener("buffer_updated",function(){return this.$11(a)}.bind(this)))};a.prototype.$11=function(a){var b=[];this.$4.forEach(function(a){a=a.getBufferedRanges();a.length&&b.push(a[0])});a=m(this.$7.getCurrentTime(),b);a>0&&(this.$1.currentTime+=a)};a.prototype.setTimeRangeProvider=function(a){this.$3.release(),this.$3.engage(),this.$3.addSubscriptions(a.addUpdateListener(this.$10)),this.$5=a,this.$10()};a.prototype.destroy=function(){this.$2.release(),this.$3.release(),this.$4.clear()};e.exports=a}),null);
__d("oz-player/shims/ozThrottle",["throttle"],(function(a,b,c,d,e,f){"use strict";e.exports=b("throttle")}),null);
__d("oz-player/states/OzObservedPlaybackState",["oz-player/loggings/OzMultiDestinationPerfLogger","oz-player/shims/OzEventListener","oz-player/shims/OzSubscriptionsHandler","oz-player/shims/ozThrottle"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k=g.OzMultiDestinationPerfLoggerProvider,l=150;function a(a,b){b===void 0&&(b=new k([])),this.$3=new i(),this.$6=function(event){this.$4.getOperationLogger("pause").setState("paused").log()}.bind(this),this.$7=function(event){this.$5(),this.$4.getOperationLogger("playing").setState("playing").log()}.bind(this),this.$5=function(event){this.$2=this.$1.currentTime}.bind(this),this.$1=a,this.$4=b,this.$2=this.$1.currentTime,this.$3.addSubscriptions(h.listen(this.$1,"seeked",this.$5),h.listen(this.$1,"seeking",this.$5),h.listen(this.$1,"timeupdate",j(this.$5,l)),h.listen(this.$1,"pause",this.$6),h.listen(this.$1,"playing",this.$7))}a.prototype.isPlaying=function(){return!this.$1.paused};a.prototype.getCurrentTime=function(){return this.$2};a.prototype.getDuration=function(){return this.$1.duration};a.prototype.addEventListener=function(event,a){return h.listen(this.$1,event,a)};a.prototype.destroy=function(){this.$3.release()};e.exports=a}),null);
__d("oz-player/states/OzPlayerDimensions",[],(function(a,b,c,d,e,f){"use strict";function a(a){this.setDimensions(a)}a.prototype.setDimensions=function(a){this.$1=a.width,this.$2=a.height};a.prototype.getDimensions=function(){return{width:this.$1,height:this.$2}};e.exports=a}),null);
__d("oz-player/strategies/OzBandwidthBoundaryStreamSegmentsCountStrategy",["oz-player/networks/OzBandwidthEstimator"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a,b){this.$1=a,this.$2=b}a.prototype.isActive=function(a){return!0};a.prototype.getSegmentsCount=function(a,b,c){var d=g.getBandwidth(this.$1),e=g.getStandardDeviationOfBandwidth(),f=this.$1.getNumber("bandwidth_boundary_standard_deviation_factor",1);return this.$2.some(function(a){a=a.getBandwidth();return Math.abs(a-d)<e*f})?this.$1.getNumber("segments_to_stream_near_bandwidth_boundary",5):this.$1.getNumber("segments_to_stream",5)};e.exports=a}),null);
__d("oz-player/strategies/OzPlaybackConfidenceUtils",[],(function(a,b,c,d,e,f){"use strict";var g=.8;function a(a,b,c,d,e){c=Math.min(1,c/d);d=1+(1-c)*e;c=a.getBandwidth()*d;return c>b?g*(b/c):1-(1-g)*c/b}e.exports={getPlaybackConfidence:a}}),null);
__d("oz-player/utils/getBufferAhead",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,b){__p&&__p();var c=null;for(var b=b,d=Array.isArray(b),e=0,b=d?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=b.length)break;f=b[e++]}else{e=b.next();if(e.done)break;f=e.value}f=f;f.startTime<=a&&f.endTime>a&&(c=f)}return!c?0:c.endTime-a}e.exports=a}),null);
__d("oz-player/strategies/OzAbrManager",["oz-player/networks/OzBandwidthEstimator","oz-player/utils/getBufferAhead","oz-player/strategies/OzBandwidthBoundaryStreamSegmentsCountStrategy","oz-player/strategies/OzPlaybackConfidenceUtils"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();function a(a,b,c,d,e,f){this.$2=0,this.$3=Date.now(),this.$4=!1,this.$11=null,this.$1=a,this.$5=b,this.$6=this.$14(b,c),this.$7=d,this.$9=e,this.$12=f,this.$13=new i(a,c)}a.prototype.setSourceBuffer=function(a){this.$8=a};a.prototype.$14=function(a,b){var c=this.$1.getNumber("abr_restrict_from_index",0),d=this.$1.getNumber("abr_restrict_to_index",0);if(d===0&&c===0)return b;var e=b.findIndex(function(b){return a.getID()===b.getID()});return e===-1?b:b.filter(function(a,b){return b-e>=c&&b-e<=d})};a.prototype.$15=function(a){var b=this.$1.getNumber("resolution_constraint_factor",0);if(b===0)return a;var c=this.$9.getDimensions(),d=a.filter(function(a){return a.getWidth()<=c.width*this.$12*b||a.getHeight()<=c.height*this.$12*b}.bind(this));return!d.length?[a[0]]:d};a.prototype.$16=function(){var a=this.$4?this.$1.getNumber("min_switch_interval",0):this.$1.getNumber("initial_switch_interval",0),b=g.getSampleCount()>=this.$1.getNumber("abr_min_bandwidth_samples",0),c=this.$1.getNumber("abr_eval_buffer_threshold",0);c=!c||this.$17()>=c;var d;this.$2+this.$1.getNumber("min_eval_interval",1e3)>Date.now()?d="min_eval_interval":this.$3+a>Date.now()?d="min_switch_interval":!b?d="min_bandwidth_samples":c||(d="buffer_threshold_not_satisfied");d&&(this.$11=d);return!d};a.prototype.getBestRepresentation=function(){__p&&__p();if(!this.$16())return this.$5;var a=Date.now();this.$2=a;var b=g.getAdjustedBandwidth(this.$1),c=this.$1.getNumber("low_buffer_bandwidth_target_threshold",10),d=this.$17(),e=this.$1.getNumber("low_buffer_bandwidth_target_increase_factor",0),f,h=this.$15(this.$6);for(var i=0;i<h.length;i++){var k=j.getPlaybackConfidence(h[i],b,d,c,e);k>this.$1.getNumber("abr_confidence_threshold",.7)&&(!f||f.getBandwidth()<h[i].getBandwidth())&&(f=h[i])}f=f||this.$6[0];if(this.$18(d,f)){this.$11="high_buffer";return this.$5}this.$5!==f&&(this.$4=!0,this.$3=a,this.$5=f);this.$11="bandwidth";return f};a.prototype.$18=function(a,b){var c=this.$1.getNumber("abr_prevent_down_switch_buffer_threshold",0);return c>0&&a>=c&&this.$5.getBandwidth()>b.getBandwidth()?!0:!1};a.prototype.getStreamSegmentsCountStrategy=function(){return this.$13};a.prototype.getLastEvaluationReason=function(){return this.$11};a.prototype.$17=function(){var a=this.$8?this.$8.getSourceBufferState():null;if(!a)return 0;var b=this.$7.getCurrentTime();return h(b,a.getBufferedRanges())};e.exports=a}),null);
__d("oz-player/strategies/OzBufferAheadPriorityStrategy",["oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler","oz-player/shims/ozThrottle","oz-player/utils/getBufferAhead"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l=6,m=1e3;b=babelHelpers.inherits(a,g);k=b&&b.prototype;function a(a){k.constructor.call(this),this.$OzBufferAheadPriorityStrategy3=new h(),this.$OzBufferAheadPriorityStrategy4=function(){this.emit("state_changed")}.bind(this),this.$OzBufferAheadPriorityStrategy1=a,this.$OzBufferAheadPriorityStrategy3.addSubscriptions(this.$OzBufferAheadPriorityStrategy1.addEventListener("progress",i(this.$OzBufferAheadPriorityStrategy4,m)),this.$OzBufferAheadPriorityStrategy1.addEventListener("timeupdate",i(this.$OzBufferAheadPriorityStrategy4,m)))}a.prototype.getName=function(){return"buffer_ahead"};a.prototype.setSourceBufferState=function(a){if(this.$OzBufferAheadPriorityStrategy2)return;this.$OzBufferAheadPriorityStrategy3.addSubscriptions(a.addEventListener("buffer_updated",i(this.$OzBufferAheadPriorityStrategy4,m)))};a.prototype.isActive=function(){return!0};a.prototype.getPriority=function(){var a=this.$OzBufferAheadPriorityStrategy2;if(!a)return 1;var b=this.$OzBufferAheadPriorityStrategy1.getCurrentTime();a=a.getBufferedRanges();b=j(b,a);return b>=l?0:1};a.prototype.destroy=function(){this.$OzBufferAheadPriorityStrategy3.release()};e.exports=a}),null);
__d("oz-player/strategies/OzBufferAheadTargetStrategy",[],(function(a,b,c,d,e,f){"use strict";function a(a){this.$1=a}a.prototype.isActive=function(){return!0};a.prototype.getBufferTarget=function(){return this.$1.getNumber("buffer_ahead_target",10)};e.exports=a}),null);
__d("oz-player/strategies/OzBufferTargetBoundedStreamSegmentsCountStrategy",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,b){this.$1=a,this.$2=b}a.prototype.isActive=function(a){return this.$2.getBool("only_bound_stream_segment_counts_when_paused",!1)?!a.isPlaying():!0};a.prototype.getSegmentsCount=function(a,b,c){__p&&__p();a=a.getCurrentTime();var d=this.$1.computeBufferTarget(),e=1,f=b;b=b.getTimeRange().startTime;while(f!==null&&b<d+a){f=c.getSegmentAfter(f);if(!f)break;b=f.getTimeRange().startTime;e++}return e};e.exports=a}),null);
__d("oz-player/strategies/OzBufferTargetCalculator",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){this.$1=0,this.$2=a}a.prototype.computeBufferTarget=function(){__p&&__p();for(var a=this.$2,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;if(d.isActive()){d=d.getBufferTarget();this.$1=d;return d}}return this.$1};e.exports=a}),null);
__d("oz-player/strategies/OzLiveheadDeltaCatchupStrategy",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){this.$3=a}a.prototype.isEnabled=function(a,b){return(!this.$3.getBool("live_catch_up_only_when_paused",!1)||a.paused)&&typeof b.getMinimumUpdatePeriod()==="number"};a.prototype.computeNewPlayheadPosition=function(a,b){a=a.currentTime;b=b.getVideoRepresentations()[0];if(!b)return null;b=b.getTimeRanges();if(b.length===0)return null;b=b[b.length-1].endTime;return b-a>this.$3.getNumber("live_catch_up_fall_behind_threshold",20)?b-this.$3.getNumber("live_catch_up_live_head_delta",6):null};e.exports=a}),null);
__d("oz-player/strategies/OzPausedStreamSegmentsCountStrategy",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){this.$1=a,this.$2=b}a.prototype.isActive=function(){return!this.$1.isPlaying()};a.prototype.getSegmentsCount=function(a,b,c){return this.$2.getNumber("paused_stream_segments_count",0)};e.exports=a}),null);
__d("oz-player/strategies/OzPlayingStatePriorityStrategy",["oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;b=babelHelpers.inherits(a,g);i=b&&b.prototype;function a(a){i.constructor.call(this),this.$OzPlayingStatePriorityStrategy1=new h(),this.$OzPlayingStatePriorityStrategy3=function(){this.emit("state_changed")}.bind(this),this.$OzPlayingStatePriorityStrategy2=a,this.$OzPlayingStatePriorityStrategy1.addSubscriptions(this.$OzPlayingStatePriorityStrategy2.addEventListener("playing",this.$OzPlayingStatePriorityStrategy3),this.$OzPlayingStatePriorityStrategy2.addEventListener("play",this.$OzPlayingStatePriorityStrategy3),this.$OzPlayingStatePriorityStrategy2.addEventListener("pause",this.$OzPlayingStatePriorityStrategy3))}a.prototype.isActive=function(){return!0};a.prototype.getName=function(){return"playing_state"};a.prototype.setSourceBufferState=function(a){};a.prototype.getPriority=function(){return this.$OzPlayingStatePriorityStrategy2.isPlaying()?1:0};a.prototype.destroy=function(){this.$OzPlayingStatePriorityStrategy1.release()};e.exports=a}),null);
__d("oz-player/strategies/OzPriorityCalculator",["oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;b=babelHelpers.inherits(a,g);i=b&&b.prototype;function a(a){i.constructor.call(this);this.$OzPriorityCalculator2=new h();this.$OzPriorityCalculator1=a;(a=this.$OzPriorityCalculator2).addSubscriptions.apply(a,this.$OzPriorityCalculator1.map(function(a){return a.addListener("state_changed",function(b){this.emit("state_changed",this.compute(),a.getName())}.bind(this))}.bind(this)))}a.prototype.setSourceBufferState=function(a){this.$OzPriorityCalculator1.forEach(function(b){return b.setSourceBufferState(a)}),this.emit("state_changed",this.compute(),"source_buffer")};a.prototype.compute=function(){return this.$OzPriorityCalculator1.reduce(function(a,b){b=b.isActive()?b.getPriority():0;return a+b},0)};a.prototype.destroy=function(){this.$OzPriorityCalculator2.release()};e.exports=a}),null);
__d("oz-player/strategies/OzStartupBufferTargetStrategy",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,b){this.$1=a,this.$3=b}a.prototype.isActive=function(){var a=this.$1.isPlaying();a&&(this.$2=!0);return!this.$2};a.prototype.getBufferTarget=function(){return this.$3.getNumber("pre_start_buffer_ahead_target",10)};e.exports=a}),null);
__d("oz-player/strategies/OzStaticStreamSegmentsStrategy",[],(function(a,b,c,d,e,f){"use strict";function a(a){this.$1=a}a.prototype.isActive=function(){return!0};a.prototype.getSegmentsCount=function(a,b,c){return this.$1.getNumber("segments_to_stream",5)};e.exports=a}),null);
__d("oz-player/strategies/OzStreamSegmentsCountCalculator",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=1;function a(a){this.$1=a}a.prototype.computeMin=function(a,b,c){__p&&__p();var d=Number.MAX_VALUE;for(var e=this.$1,f=Array.isArray(e),h=0,e=f?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(f){if(h>=e.length)break;i=e[h++]}else{h=e.next();if(h.done)break;i=h.value}i=i;i.isActive(a)&&(d=Math.min(d,i.getSegmentsCount(a,b,c)))}return d===Number.MAX_VALUE?g:Math.max(d,g)};e.exports=a}),null);
__d("oz-player/streams/OzEndOfStreamWatcher",["oz-player/shims/OzSubscriptionsHandler","oz-player/shims/ozvariant"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();function a(a,b){this.$1=new Map(),this.$2=new g(),this.$3=a,this.$4=b}a.prototype.registerMediaStream=function(a){this.$1.has(a)&&h(0,5191),this.$1.set(a,!1)};a.prototype.notifyRepresentationSwitched=function(a){this.$1.has(a)||h(0,5192),this.$5()};a.prototype.notifyMediaStreamEnded=function(a){this.$1.has(a)||h(0,5192),this.$1.set(a,!0),this.$5()};a.prototype.$5=function(){var a=this.$3.getMediaSource();a.readyState==="open"&&this.$6()&&(this.$4.getBool("fix_end_of_stream_during_update",!1)?this.$3.notifyEndOfStream():a.endOfStream())};a.prototype.$6=function(){__p&&__p();if(this.$1.size===0)return!1;for(var a=this.$1.values(),b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;if(!d)return!1}return!0};a.prototype.destroy=function(){this.$1.clear()};e.exports=a}),null);
__d("oz-player/streams/OzHandleUserRepresentationSwitch",["oz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a,b,c,d,e){this.$4=null,this.$5=new g(),this.$1=a,this.$2=b,this.$3=c,this.$6=d,e.then(function(a){this.$4=a}.bind(this)),this.$5.addSubscriptions(d.addListener("switchRepresentation",this.$7.bind(this)))}a.prototype.cleanup=function(){this.$5.release(),this.$5.engage()};a.prototype.$7=function(a,b){__p&&__p();if(!this.$1.getBool("clear_buffer_on_user_quality_upgrade",!1)||a!=="user")return;a=this.$6.getRepresentationIDAtTime(this.$2.getCurrentTime());var c;if(this.$4){for(var d=0;d<this.$3.length;d++)this.$3[d].getID()===a&&(c=this.$3[d]);if(c&&b&&c.getBandwidth()<b.getBandwidth()){a=c.getSegmentByTime(this.$2.getCurrentTime());a&&(this.$4&&this.$4.clearRange(this.$2.getCurrentTime(),this.$2.getDuration()))}}};e.exports=a}),null);
__d("oz-player/shims/ozPerformanceNow",["performanceNow"],(function(a,b,c,d,e,f){"use strict";e.exports=b("performanceNow")}),null);
__d("oz-player/networks/OzStreamingTask",["oz-player/utils/OzError","oz-player/loggings/OzLoggingUtils","oz-player/shims/OzDeferred","oz-player/shims/OzMaybeNativePromise","oz-player/shims/ozPerformanceNow"],(function(a,b,c,d,e,f,g,h,i,j,k){"use strict";__p&&__p();var l=h.monitorPromiseAndLogOperation;function a(a,b){this.$3=new i(j),this.$5=!1,this.$1=this.$2=new i(j),this.$6=this.$3.getPromise(),this.$7=k(),this.$8=b,this.$9=a}a.prototype.run=function(){var a=this.$8;if(a){var b=k()-this.$7;l(this.$6,a,"streaming_task",function(){},function(a){a.setTimeToRequestSent(Math.floor(b))})}this.$2.resolve();return this.$6};a.prototype.cancel=function(){this.$3.reject(new g({type:"OZ_STREAMING_TASK",description:"task cancelled"})),this.$5=!0};a.prototype.finish=function(){this.$3.resolve()};a.prototype.isCancelled=function(){return this.$5};a.prototype.addStream=function(a,b,c){var d=new i(j);this.$10({pausableStream:a,deferred:d,loggerProviderWithStreamContext:b,loggingPayloads:c});return{getStream:function(){return a.getStream()},cancel:function(){return a.pauseStream()},getStatusChangePromise:function(){return d.getPromise()}}};a.prototype.$10=function(a){__p&&__p();var b=a.pausableStream,c=a.deferred,d=a.loggerProviderWithStreamContext,e=a.loggingPayloads;a=this.$1.getPromise();var f=k(),g=this.$1=new i(j);a.then(function(){this.$4=b;var a=this.$11(b.startStream()),c=k()-f;d&&l(a,d,"fetch_stream",function(a){e&&a.setResource(e.getRequestUrl()).setInitiator(e.isPrefetch()?"prefetch":"fetch"),a.setTimeToRequestSent(Math.floor(c))});return a}.bind(this)).then(function(a){this.$4=null,g.resolve(),c.resolve(a)}.bind(this))["catch"](function(a){this.$4=null,this.$3.reject(a),this.$9.getBool("throw_network_error",!1)&&c.reject(a)}.bind(this))};a.prototype.$11=function(a){return a.then(function(a){a=a.statusPromise;return a.then(function(a){return a==="stream_done"?"done":"error"})})};e.exports=a}),null);
__d("oz-player/networks/OzStreamingTaskStateManager",["Promise","oz-player/shims/OzSubscriptionsHandler","oz-player/networks/OzStreamingTask","oz-player/networks/OzStreamingTaskQueueProvider"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();function a(a,b,c,d){this.$3=new h(),this.$4=0,this.$9=!1,this.$5=a,this.$1=b,this.$6=j.getQueue(this.$5),this.$7=c,this.$8=d,this.$8.getBool("real_time_priority_update",!1)&&this.$3.addSubscriptions(this.$1.addListener("state_changed",function(a,b){this.$10(a,b),this.$2&&this.$6.updatePriority(this.$2,this.$4)}.bind(this)))}a.prototype.startStream=function(a){__p&&__p();var b=a.streamableSegments,c=a.networkManager;a=a.segmentsLoggerProvider;var d=this.$2;this.$10(this.$1.compute(),"start_stream");!d||d.isCancelled()?(d=this.$2=new i(this.$8,this.$7),this.$6.enqueue(d,this.$4)):this.$6.updatePriority(d,this.$4);c=c.createPausableStream(b);b=c.pausableRangeStream;c=c.loggingPayloads;this.$9=!0;var e=d.addStream(b,a,c);d={getStream:function(){return e.getStream()},cancel:function(){e.cancel()},getStatusChangePromise:function(){return e.getStatusChangePromise().then(function(a){this.$11();return a}.bind(this))["catch"](function(a){this.$11();return g.reject(a)}.bind(this))}.bind(this)};return d};a.prototype.finishTaskIfNoOngoingStream=function(){this.$9||this.$12()};a.prototype.destroy=function(){this.$3.release()};a.prototype.$11=function(){this.$9=!1,this.$10(this.$1.compute(),"end_stream"),this.$4<j.OZ_QUEUE_MAX_PRIORITY&&this.$12()};a.prototype.$12=function(){this.$2&&(this.$2.finish(),this.$2=null)};a.prototype.$10=function(a,b){if(a===this.$4)return;this.$4=a;this.$7&&this.$7.getOperationLogger("priority_changed").setPriorityFloat(this.$4).setInitiator(b).log()};e.exports=a}),null);
__d("TaggedTimeRanges",["sprintf"],(function(a,b,c,d,e,f,g){__p&&__p();function a(a){"use strict";this.$1=[],this.$2=0,this.$3=0,this.$4=a?a:function(a,b){return a===b}}a.prototype.add=function(a,b,c){"use strict";__p&&__p();if(b<a)return;if(b===a)return;if(this.$1.length===0){this.$1.push({start:a,end:b,tag:c});return}var d=0,e=0;for(var f=0;f<this.$1.length;f++){if(a===this.$1[f].start&&b===this.$1[f].end){d=f;e=f+1;break}a>=this.$1[f].start&&(d=f+1);b<=this.$1[f].end&&(e=f);if(b<this.$1[f].start)break}this.$1.splice(d,e-d,{start:a,end:b,tag:c});this.$5(d)};a.prototype.$5=function(a){"use strict";var b=this.$1[a],c=null;a!==0&&(c=this.$1[a-1]);c!==null&&(this.$4(c.tag,b.tag)?c.end>=b.start&&(this.$1.splice(a-1,2,{start:c.start,end:Math.max(b.end,c.end),tag:b.tag}),a--):(c.end>b.start&&c.start===b.start?(this.$1.splice(a-1,1),a--):c.end>b.start&&this.$1.splice(a-1,1,{start:c.start,end:b.start,tag:c.tag}),c.end>b.end&&this.$1.splice(a+1,0,{start:b.end,end:c.end,tag:c.tag})));c=null;a!==this.$1.length-1&&(c=this.$1[a+1]);c&&(this.$4(c.tag,b.tag)?c.start<=b.end&&this.$1.splice(a,2,{start:b.start,end:Math.max(c.end,b.end),tag:b.tag}):c.start<=b.end&&(c.end<b.end?(this.$1.splice(a,1,{start:b.start,end:c.start,tag:b.tag}),this.$1.push({start:c.end,end:b.end,tag:b.tag})):this.$1.splice(a+1,1,{start:b.end,end:c.end,tag:c.tag})))};a.prototype.get=function(a){"use strict";__p&&__p();var b=a>=this.$3?this.$2:0,c=null;for(var b=b;b<this.$1.length;b++)if(this.$1[b].start<=a&&a<this.$1[b].end){c=b;break}this.$2=c===null?0:c;this.$3=a;return c===null?null:this.$1[c].tag};a.prototype.getLength=function(){"use strict";return this.$1.length};e.exports=a}),null);
__d("oz-player/shims/OzTaggedTimeRanges",["TaggedTimeRanges"],(function(a,b,c,d,e,f,g){"use strict";function a(a){this.$1=new g(a)}a.prototype.add=function(a,b,c){this.$1.add(a,b,{id:c.id})};a.prototype.get=function(a){return this.$1.get(a)};e.exports=a}),null);
__d("oz-player/strategies/OzStreamLengthStrategy",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={getStreamingSegments:function(a,b,c,d,e){__p&&__p();var f=a.getNumber("segments_to_stream_under_playhead_threshold",0);a=a.getNumber("low_segment_stream_playhead_threshold",0);f>0&&d.getCurrentTime()<a&&(b=f);d=[];d.push(e);for(var a=1;a<b;a++){f=c.getSegmentAfter(e);if(!f)break;e=f;d.push(e)}return d}};e.exports=a}),null);
__d("oz-player/streams/OzMediaStreamLoopDriver",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();this.$2=null,this.$3=!1,this.$4=function(){__p&&__p();this.$5();if(this.$3)return;var a=this.$1.execute(),b=this.$1.getLoopInterval();b&&(this.$2=setTimeout(function(){this.$4()}.bind(this),b));a&&a.then(this.$4)["catch"](function(a){this.$5();a=this.$1.handleError(a);a?this.$2=setTimeout(this.$4,a):this.$3=!0}.bind(this))}.bind(this),this.$1=a}a.prototype.start=function(){if(this.$3)throw new Error("restart is not implemented");this.$4()};a.prototype.stop=function(){this.$5(),this.$3=!0};a.prototype.$5=function(){this.$2&&(clearTimeout(this.$2),this.$2=null)};e.exports=a}),null);
__d("oz-player/utils/OzRangeUtils",[],(function(a,b,c,d,e,f){"use strict";a={getRangeForTime:function(a,b){b=b.filter(function(b){return b.startTime<=a&&b.endTime>=a});return b!=null&&b.length>0?b[0]:null}};e.exports=a}),null);
__d("oz-player/streams/OzSegmentLocator",["oz-player/utils/OzRangeUtils"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=g.getRangeForTime;a={getSegment:function(a,b,c,d,e,f,g){__p&&__p();var i=b.getCurrentTime();i=d?h(i,d.getBufferedRanges()):null;d=e?e.getTimeRange().endTime:0;if(f.getBool("use_stream_end_time_in_segment_locator",!1)&&i&&i.endTime===g)return null;e=b.getCurrentTime()||0;d?e=d:i&&(e=i.endTime);if(e-b.getCurrentTime()>c)return null;g=a.getSegment(0);!f.getBool("auto_seek_ahead_using_time_ranges",!1)&&g&&g.getTimeRange().startTime>e&&(e=g.getTimeRange().startTime);d=a.getSegmentByTime(e);return d}};e.exports=a}),null);
__d("oz-player/utils/OzMimeUtil",[],(function(a,b,c,d,e,f){"use strict";function a(a){return(a.split("/")[0]||"").trim()}e.exports={getMimeType:a}}),null);
__d("oz-player/streams/OzMediaStream",["oz-player/networks/OzNetworkManager","oz-player/networks/OzStreamingTask","oz-player/networks/OzStreamingTaskQueueProvider","oz-player/networks/OzStreamingTaskStateManager","oz-player/shims/OzDeferred","oz-player/shims/OzMaybeNativePromise","oz-player/shims/OzSubscriptionsHandler","oz-player/shims/OzTaggedTimeRanges","oz-player/shims/ozvariant","oz-player/strategies/OzStreamLengthStrategy","oz-player/utils/OzError","oz-player/utils/OzErrorEmitter","oz-player/utils/OzMimeUtil","oz-player/utils/OzRangeUtils","oz-player/streams/OzMediaStreamLoopDriver","oz-player/streams/OzSegmentLocator","oz-player/shims/OzEventEmitter"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){"use strict";__p&&__p();var x,y=s.getMimeType,z=t.getRangeForTime,A=1e3;b=babelHelpers.inherits(a,w);x=b&&b.prototype;function a(a,b,c,d,e,f,g,h,i,k,l,o,p){x.constructor.call(this),this.$OzMediaStream9=null,this.$OzMediaStream11=!1,this.$OzMediaStream12=null,this.$OzMediaStream13=new m(),this.$OzMediaStream15=[],this.$OzMediaStream19=0,this.$OzMediaStream26=!0,this.$OzMediaStream28=!1,this.$OzMediaStream29=null,this.$OzMediaStream30=new r(),this.$OzMediaStream1=a,this.$OzMediaStream2=b,this.$OzMediaStream2.then(function(a){this.$OzMediaStream3=a,this.$OzMediaStream12&&this.$OzMediaStream12.setSourceBuffer(a),this.$OzMediaStream24.setSourceBufferState(a.getSourceBufferState()),this.$OzMediaStream31()}.bind(this)),this.$OzMediaStream17=c,this.$OzMediaStream8=d,this.$OzMediaStream4=e,this.$OzMediaStream10=f,this.$OzMediaStream10.registerMediaStream(this),this.$OzMediaStream23=g,this.$OzMediaStream24=h,this.$OzMediaStream25=i,this.$OzMediaStream12=k,this.$OzMediaStream14=p.cloneContext(),this.$OzMediaStream22=new n(function(a,b){return a.id===b.id}),this.$OzMediaStream13.addSubscriptions(this.$OzMediaStream4.addEventListener("seeking",function(){this.$OzMediaStream1.getBool("fix_seek_performance",!1)?this.$OzMediaStream32():((!this.$OzMediaStream1.getBool("keep_anchor_when_seeking_into_same_buffer",!1)||!this.$OzMediaStream33())&&(this.$OzMediaStream6=null),this.$OzMediaStream28=!1,this.$OzMediaStream21&&this.$OzMediaStream21.resolve())}.bind(this))),this.$OzMediaStream18=y(o.getMimeCodecs()),this.$OzMediaStream27=new j(this.$OzMediaStream18,this.$OzMediaStream24,this.$OzMediaStream14,this.$OzMediaStream1),this.$OzMediaStream20=new u(this),l===o.getID()?this.$OzMediaStream5=o:this.$OzMediaStream34(o),this.$OzMediaStream20.start()}a.prototype.getCurrentRepresentation=function(){return this.$OzMediaStream5};a.prototype.switchRepresentation=function(a){this.$OzMediaStream34(a,"user")};a.prototype.onError=function(a){return this.$OzMediaStream30.onError(a)};a.prototype.$OzMediaStream34=function(a,b){b===void 0&&(b="internal");this.$OzMediaStream1.getBool("clear_buffer_on_user_quality_upgrade",!1)&&(this.$OzMediaStream6=null);var c=this.$OzMediaStream14.cloneContext().setType(this.$OzMediaStream18+";init"),d=this.$OzMediaStream8.request([a.getInitSegment()],c),e=c.getOperationLogger("stream_switch").setPreviousRepresentationID(this.$OzMediaStream5?this.$OzMediaStream5.getID():null).setRepresentationID(a.getID()).setReason(this.$OzMediaStream12&&this.$OzMediaStream12.getLastEvaluationReason()).start();this.$OzMediaStream5=a;this.emit("switchRepresentation",b,a);this.$OzMediaStream35(d.getStream(),function(){e.log(),this.$OzMediaStream10.notifyRepresentationSwitched(this)}.bind(this),c.cloneContext(),0)};a.prototype.getLoopInterval=function(){return this.$OzMediaStream19};a.prototype.execute=function(){var a=this.$OzMediaStream21=new k(l),b=this.$OzMediaStream36();b.then(function(){return a.resolve()})["catch"](function(b){return a.reject(b)});return a.getPromise()};a.prototype.$OzMediaStream36=function(){__p&&__p();if(this.$OzMediaStream12&&this.$OzMediaStream26&&(this.$OzMediaStream1.getBool("enable_abr_for_first_request",!1)||this.$OzMediaStream11||this.$OzMediaStream17>0)){var a=this.$OzMediaStream12.getBestRepresentation();if(this.$OzMediaStream5!==a){this.$OzMediaStream34(a);return l.resolve()}}a=this.$OzMediaStream3?this.$OzMediaStream3.getSourceBufferState():null;var b=this.$OzMediaStream17>0?this.$OzMediaStream5.getSegment(this.$OzMediaStream17-1):null,c;!this.$OzMediaStream11&&this.$OzMediaStream17===0&&(c=this.$OzMediaStream5.getCustomFieldFirstSegment());c||(c=v.getSegment(this.$OzMediaStream5,this.$OzMediaStream4,this.$OzMediaStream23.computeBufferTarget(),a,this.$OzMediaStream6||b,this.$OzMediaStream1,this.$OzMediaStream29));b=this.$OzMediaStream28&&this.$OzMediaStream1.getBool("block_stream_on_ongoing_stream",!1);if(!c||b){this.$OzMediaStream19=A;this.$OzMediaStream28||this.$OzMediaStream27.finishTaskIfNoOngoingStream();return new l(function(a,b){var c=this.getCurrentRepresentation().addUpdateListener(function(){a(),this.$OzMediaStream16=null,c.remove()}.bind(this));this.$OzMediaStream16=c}.bind(this))}this.$OzMediaStream19=0;var d=[];b=!1;if(!this.$OzMediaStream11&&this.$OzMediaStream17===0)d=[c],b=!0;else{var e=this.$OzMediaStream25.computeMin(this.$OzMediaStream4,c,this.$OzMediaStream5);e=p.getStreamingSegments(this.$OzMediaStream1,e,this.$OzMediaStream5,this.$OzMediaStream4,c);d=g.getStreamableSegmentsRange(e)}this.$OzMediaStream11=!0;var f=d[d.length-1]||null;this.$OzMediaStream1.getBool("updates_stream_anchor_when_promise_resolved",!1)||(this.$OzMediaStream6=f);f&&(this.$OzMediaStream17=0);var j=!1;f&&(j=this.$OzMediaStream5.isEndingSegment(f));o(d.length!==0,"There must be one or more segment");e=d[0];var k=e.getTimeRange().startTime,m=f.getTimeRange().endTime,n=this.$OzMediaStream14.cloneContext();n.setSegmentStartTime(k).setSegmentEndTime(m);var r=null;b=this.$OzMediaStream1.getBool("scheduler_ignore_prefetch",!1)&&b;var s=this.$OzMediaStream1.getBool("disable_audio_scheduler",!1)&&this.$OzMediaStream18.indexOf("audio")!==-1;if(this.$OzMediaStream1.getBool("use_scheduler",!1)&&!s&&!b)if(this.$OzMediaStream1.getBool("use_streaming_task_state_manager",!1))s=this.$OzMediaStream27.startStream({streamableSegments:d,networkManager:this.$OzMediaStream8,sourceBufferState:a,playbackState:this.$OzMediaStream4,segmentsLoggerProvider:n});else{b=i.getQueue(this.$OzMediaStream18);a=this.$OzMediaStream8.createPausableStream(d,this.$OzMediaStream14);var t=a.pausableRangeStream;a=a.loggingPayloads;r=new h(this.$OzMediaStream1,this.$OzMediaStream14);var u=this.$OzMediaStream24.compute();s=r.addStream(t,n,a);b.enqueue(r,u)}else s=this.$OzMediaStream8.request(d,n);this.$OzMediaStream9=s;this.$OzMediaStream28=!0;t=0;a=null;t=this.$OzMediaStream37(e,f,d.length);a={startTime:k,endTime:m,tag:{id:this.$OzMediaStream5.getID()}};var w=n.getOperationLogger("queued_append");w.start().setReason(this.$OzMediaStream12&&this.$OzMediaStream12.getLastEvaluationReason());this.$OzMediaStream35(s.getStream(),function(){w.log(),d.forEach(function(a){this.emit("SegmentAppended",this.$OzMediaStream38(a))}.bind(this)),j&&(this.$OzMediaStream10.notifyMediaStreamEnded(this),this.$OzMediaStream39())}.bind(this),n,t,a);return s.getStatusChangePromise().then(function(a){this.$OzMediaStream1.getBool("updates_stream_anchor_when_promise_resolved",!1)&&(this.$OzMediaStream6=f),this.$OzMediaStream28=!1,r&&r.finish()}.bind(this))["catch"](function(a){__p&&__p();this.$OzMediaStream28=!1;if(this.$OzMediaStream1.getBool("throw_network_error",!1)){var b,c;a instanceof q?(b=a.getExtra().code||"",c=a):(b=a.status.toString(),c=new q({type:"OZ_NETWORK",description:a.message,extra:{originalError:a,code:b,url:a.url}}));var d=JSON.parse(this.$OzMediaStream1.getString("network_retry_intervals_json","{}")),e=d[b];if(e){r&&r.finish();this.$OzMediaStream27.finishTaskIfNoOngoingStream();return this.$OzMediaStream1.getBool("retry_error_during_stream",!1)&&this.$OzMediaStream3?this.$OzMediaStream3.cancelOperationAndCleanQueue().then(function(){return new l(function(a,b){setTimeout(a,e)})}):new l(function(a,b){setTimeout(a,e)})}this.$OzMediaStream30.emitError(c)}return a instanceof q&&a.getType()==="OZ_NETWORK"&&this.$OzMediaStream3?this.$OzMediaStream3.cancelOperationAndCleanQueue():l.resolve()}.bind(this))};a.prototype.handleError=function(a){return 0};a.prototype.$OzMediaStream35=function(a,b,c,d,e){e===void 0&&(e=null),this.$OzMediaStream15.push({stream:a,dataAppendedCallback:b,loggerProvider:c,appendTarget:d,timeRange:e}),this.$OzMediaStream3&&this.$OzMediaStream31()};a.prototype.$OzMediaStream31=function(){this.$OzMediaStream15.forEach(function(a){var b=a.stream,c=a.dataAppendedCallback,d=a.loggerProvider,e=a.appendTarget,f=a.timeRange;this.$OzMediaStream3&&this.$OzMediaStream3.queueData(b,d,e).then(function(){c(),f&&this.$OzMediaStream22.add(f.startTime,f.endTime,f.tag)}.bind(this))}.bind(this)),this.$OzMediaStream15=[]};a.prototype.$OzMediaStream37=function(a,b,c){var d=0,e=this.$OzMediaStream1.getNumber("appends_per_segment",0);if(e>0){a=a.getByteRange();b=b.getByteRange();a&&b&&b.endByte!=null&&(d=Math.ceil((b.endByte-a.startByte+1)/(c*e)))}return d};a.prototype.enableAdaptation=function(){this.$OzMediaStream26=!0};a.prototype.disableAdaptation=function(){this.$OzMediaStream26=!1};a.prototype.cleanup=function(){this.$OzMediaStream2.then(function(a){a.destroy()}),this.$OzMediaStream27.destroy(),this.$OzMediaStream13.release(),this.$OzMediaStream13.engage(),this.$OzMediaStream16&&this.$OzMediaStream16.remove(),this.$OzMediaStream20.stop()};a.prototype.getRepresentationIDAtTime=function(a){var b=this.$OzMediaStream22.get(a);if(!b&&this.$OzMediaStream1.getBool("fix_tagged_range_at_end_of_stream",!1)){var c=this.$OzMediaStream5.getTimeRanges();c=c[c.length-1];var d=.001;c&&a>=c.endTime&&a<=this.$OzMediaStream4.getDuration()+d&&(b=this.$OzMediaStream22.get(c.endTime-d))}return b?b.id:null};a.prototype.$OzMediaStream38=function(a){return{type:this.$OzMediaStream18.charAt(0),segment:a,sourceBuffer:this.$OzMediaStream3?this.$OzMediaStream3.getDebug().SourceBuffer:null}};a.prototype.$OzMediaStream32=function(){(!this.$OzMediaStream1.getBool("keep_anchor_when_seeking_into_same_buffer",!1)||!this.$OzMediaStream33())&&(this.$OzMediaStream6=null),this.$OzMediaStream28=!1,this.$OzMediaStream9&&this.$OzMediaStream9.cancel(),this.$OzMediaStream19!==0&&this.$OzMediaStream21&&this.$OzMediaStream21.resolve()};a.prototype.$OzMediaStream33=function(){var a=this.$OzMediaStream3?this.$OzMediaStream3.getSourceBufferState():null;a=a?z(this.$OzMediaStream4.getCurrentTime(),a.getBufferedRanges()):null;return this.$OzMediaStream6&&a?a.endTime>this.$OzMediaStream6.getTimeRange().startTime:!1};a.prototype.$OzMediaStream39=function(){if(this.$OzMediaStream3){var a=this.$OzMediaStream3.getSourceBufferState().getBufferedRanges();a.length>0&&(this.$OzMediaStream29=a[a.length-1].endTime)}};a.prototype.getDebug=function(){return{SourceBufferManager:this.$OzMediaStream3,MediaStreamAbrManager:this.$OzMediaStream12}};e.exports=a}),null);
__d("oz-player/utils/OzPlaybackRestrictionsUtils",[],(function(a,b,c,d,e,f){"use strict";a=function(a,b){if(b.length===0)return[];b.sort(function(a,b){return a.getBandwidth()-b.getBandwidth()});return a.reduce(function(a,b){return b.applyRestriction(a)},b)};e.exports={applyVideoPlaybackRestrictions:a}}),null);
__d("oz-player/utils/getRepresentationInCache",["oz-player/mocks/MockRequestParamCreator"],(function(a,b,c,d,e,f,g){"use strict";var h=new g();function a(a,b){b===void 0&&(b=null);return a.find(function(a){a=a.getInitSegment();var c=a&&a.getByteRange();return a&&c&&b?b.hasCacheValue(h.createRequestParam(a.getURI(),c).uri.toString()):!1})||null}e.exports=a}),null);
__d("oz-player/Player",["Promise","oz-player/loggings/OzDevConsolePerfLogger","oz-player/loggings/OzLoggingUtils","oz-player/loggings/OzMultiDestinationPerfLogger","oz-player/loggings/OzOperationLoggerObserver","oz-player/manifests/OzVideoRepresentation","oz-player/media_source/MediaSourceManager","oz-player/media_source/OzMediaSeekableRangeManager","oz-player/networks/OzNetworkManager","oz-player/parsers/OzMpdParser","oz-player/parsers/OzMpdUpdater","oz-player/playback_controls/OzPlayheadManager","oz-player/shims/OzEventEmitter","oz-player/shims/OzMaybeNativePromise","oz-player/shims/OzSubscriptionsHandler","oz-player/states/OzObservedPlaybackState","oz-player/states/OzPlayerDimensions","oz-player/strategies/OzAbrManager","oz-player/strategies/OzBufferAheadPriorityStrategy","oz-player/strategies/OzBufferAheadTargetStrategy","oz-player/strategies/OzBufferTargetBoundedStreamSegmentsCountStrategy","oz-player/strategies/OzBufferTargetCalculator","oz-player/strategies/OzLiveheadDeltaCatchupStrategy","oz-player/strategies/OzPausedStreamSegmentsCountStrategy","oz-player/strategies/OzPlayingStatePriorityStrategy","oz-player/strategies/OzPriorityCalculator","oz-player/strategies/OzStartupBufferTargetStrategy","oz-player/strategies/OzStaticStreamSegmentsStrategy","oz-player/strategies/OzStreamSegmentsCountCalculator","oz-player/streams/OzEndOfStreamWatcher","oz-player/streams/OzHandleUserRepresentationSwitch","oz-player/streams/OzMediaStream","oz-player/utils/getRepresentationInCache","oz-player/utils/OzError","oz-player/utils/OzErrorEmitter","oz-player/utils/OzPlaybackRestrictionsUtils"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P){"use strict";__p&&__p();var Q,R=h.OzDevConsolePerfLoggerProvider,S=i.executeOperationAndLog,T=i.monitorPromiseAndLogOperation,U=j.OzMultiDestinationPerfLoggerProvider,V=P.applyVideoPlaybackRestrictions;b=babelHelpers.inherits(a,s);Q=b&&b.prototype;function a(a,b,c,d,e,f,g,h,i,j,l,p,q){__p&&__p();e===void 0&&(e=null);f===void 0&&(f={perfLoggerProviders:[],observedOperationLoggers:[]});g===void 0&&(g=null);h===void 0&&(h=[]);i===void 0&&(i=new Map());j===void 0&&(j="");l===void 0&&(l=[]);p===void 0&&(p={});q===void 0&&(q=null);Q.constructor.call(this);this.$Player3=new Map();this.$Player8=new u();this.$Player9=new O();this.$Player20=[];this.$Player26=null;f=f;var r=f.perfLoggerProviders;f=f.observedOperationLoggers;this.$Player13=new U(this.$Player29().concat(r));this.$Player2=b;this.$Player30();this.$Player17=new k();this.$Player17.observe(f,this.$Player13);this.$Player19=g;r=g&&g.getCachedRepresentations(j);this.$Player20=r||h;this.$Player22=i;this.$Player25=l;this.$Player23=p;this.$Player28=q;a instanceof HTMLVideoElement?(this.$Player1=a,this.$Player4=new m(this.$Player1,this.$Player2,this.$Player13)):(this.$Player1=a.getVideoNode(),this.$Player4=a.getMediaSourceManager(),this.$Player5=a);this.$Player10=new o(this.$Player2,this.$Player19);this.$Player14=e;this.$Player6=c;this.$Player11=new v(this.$Player1,this.$Player13);this.$Player24=new w(d);this.$Player12=new J(this.$Player4,this.$Player2);this.$Player18=new n(this.$Player4,this.$Player2);this.$Player21=this.$Player31()}a.prototype.setupPlayer=function(){__p&&__p();try{this.$Player7=S(this.$Player13,"parse_manifest",this.$Player32.bind(this,this.$Player6));if(this.$Player14!==null&&this.$Player14!==undefined){var a=new q(this.$Player2,this.$Player7,this.$Player10,this.$Player13);this.$Player8.addSubscriptions(a.onError(this.$Player9.emitError),a.addListener("streamInterruptAt",function(a){this.emit("streamInterruptAt",a)}.bind(this)),a.addListener("streamResumedAt",function(a){this.emit("streamResumedAt",a)}.bind(this)));a.setupUpdateLoop();this.$Player16=a}this.$Player15=new r(this.$Player1,this.$Player7,this.$Player27,this.$Player11,this.$Player2);this.setupStreamsAndFireDebugEvent()}catch(a){if(a instanceof N)this.$Player9.emitError(a);else throw a}};a.prototype.$Player33=function(a,b){var c=a.getMimeCodecs(),d,e=0,f=null,g=this.$Player5;g&&(d=g.getSourceBufferManagerPromise(c),e=g.getPrependedSegmentsCount(c),this.$Player2.getBool("fix_quick_starter_overhead",!1)&&(f=g.getRepresentationId(c)));d||(d=this.$Player4.createSourceBufferManager(c,this.$Player2.getBool("set_source_buffer_append_window_end",!1)));this.$Player34(d,b,f,a,e);return T(d,this.$Player13,"source_attach",function(a){a.setType(b)}).then(function(a){return this.$Player15.observeSourceBufferState(a.getSourceBufferState())}.bind(this))};a.prototype.$Player35=function(a){a=[this.$Player2,a,V(this.$Player25,this.$Player7.getVideoRepresentations()),this.$Player11,this.$Player24,window.devicePixelRatio||1];return this.$Player28?this.$Player28.apply(this,a):new(Function.prototype.bind.apply(x,[null].concat(a)))()};a.prototype.$Player34=function(a,b,c,d,e){var f=this.$Player2.getBool("enable_adaptation",!1)&&b==="video"?this.$Player35(d):null;e=new L(this.$Player2,a,e,this.$Player10,this.$Player11,this.$Player12,this.$Player21,this.$Player36(),this.$Player37(f),f,c,d,this.$Player13.cloneContext().setType(b));this.$Player8.addSubscriptions(e.onError(this.$Player9.emitError));b==="video"&&(this.$Player26=new K(this.$Player2,this.$Player11,V(this.$Player25,this.$Player7.getVideoRepresentations()),e,a));this.$Player3.set(b,e);this.$Player8.addSubscriptions(e.addListener("switchRepresentation",function(){b==="video"&&this.emit("switchVideoRepresentation")}.bind(this)),e.addListener("SegmentAppended",function(a){this.$Player38("SegmentAppended",a)}.bind(this)))};a.prototype.$Player31=function(){return new B([new G(this.$Player11,this.$Player2),new z(this.$Player2)])};a.prototype.$Player36=function(){var a=[];this.$Player2.getBool("scheduler_with_priority_update",!1)&&(a=[new E(this.$Player11),new y(this.$Player11)]);return new F(a)};a.prototype.$Player37=function(a){var b=[new H(this.$Player2)];this.$Player2.getBool("buffer_target_bounded_stream_count",!1)&&b.push(new A(this.$Player21,this.$Player2));this.$Player2.getNumber("paused_stream_segments_count",0)!==0&&b.push(new D(this.$Player11,this.$Player2));if(a){a=a.getStreamSegmentsCountStrategy();a&&b.push(a)}return new I(b)};a.prototype.onError=function(a){return this.$Player9.onError(a)};a.prototype.getCurrentQuality=function(){var a=this.$Player3.get("video");a=a&&a.getCurrentRepresentation();return a instanceof l?a.getQualityLabel():this.$Player7.getVideoRepresentations()[0].getQualityLabel()};a.prototype.switchToVideoQuality=function(a){var b=this.$Player7.getVideoRepresentations().find(function(b){return b.getQualityLabel()===a});if(b){var c=this.$Player3.get("video");c&&(c.switchRepresentation(b),c.disableAdaptation())}};a.prototype.enableVideoQualityAdaptation=function(){var a=this.$Player3.get("video");a&&a.enableAdaptation()};a.prototype.getVideoQualities=function(){return this.$Player7.getVideoRepresentations().map(function(a){return a.getQualityLabel()})};a.prototype.setupStreamsAndFireDebugEvent=function(){var a=[this.setupVideoStream(),this.setupAudioStreamIfExist()],b=[];return g.all(a).then(function(){var a=this.$Player3.get("video"),c=this.$Player3.get("audio");a&&b.push(a.getCurrentRepresentation());c&&b.push(c.getCurrentRepresentation());b.forEach(function(a){this.$Player8.addSubscriptions(a.addUpdateListener(function(){this.$Player38("SegmentIndexesUpdated",b)}.bind(this)))}.bind(this));this.$Player38("InitialSegmentIndexes",b)}.bind(this))};a.prototype.setupVideoStream=function(){var a=V(this.$Player25,this.$Player7.getVideoRepresentations());if(!a.length)return t.reject(new Error("no representation available."));this.$Player18.setTimeRangeProvider(a[0]);this.$Player15.setTimeRangeProvider(a[0]);return this.$Player33(this.$Player39("video",a),"video")};a.prototype.setupAudioStreamIfExist=function(){var a=this.$Player7.getAudioRepresentations();return a.length?this.$Player33(this.$Player39("audio",a),"audio"):t.resolve()};a.prototype.getMpd=function(){return this.$Player7};a.prototype.destroy=function(){__p&&__p();var a=this.$Player13.getOperationLogger("unload").start();this.$Player3.forEach(function(a){a.cleanup()});this.$Player26&&this.$Player26.cleanup();this.$Player3=new Map();this.$Player8.release();this.$Player8.engage();this.$Player11.destroy();this.$Player15.destroy();this.$Player16&&this.$Player16.destroy();this.$Player17.destroy();this.$Player18.destroy();a.log();this.emit("destroyed")};a.prototype.$Player39=function(a,b){__p&&__p();var c;c=b.find(function(a){return this.$Player20.indexOf(a.getID())!==-1}.bind(this));if(!c&&this.$Player5&&this.$Player2.getBool("fix_quick_starter_overhead",!1)){var d=this.$Player5.getRepresentationId(a);d!==null&&d!==undefined&&(c=b.find(function(a){return a.getID()===d}))}c||(c=M(b,this.$Player19)||b[0]);return c};a.prototype.$Player32=function(a){var b=new p(this.$Player2,{mpdUrl:this.$Player14,customParsers:this.$Player22,customRepresentationParsers:this.$Player23},this.$Player10,this.$Player13);this.$Player8.addSubscriptions(b.onError(this.$Player9.emitError));return b.parse(a)};a.prototype.$Player29=function(){return[new R()]};a.prototype.setDimensions=function(a){this.$Player24.setDimensions(a)};a.prototype.getVideoRepresentationIDAtTime=function(a){var b=this.$Player3.get("video");return b?b.getRepresentationIDAtTime(a):null};a.prototype.getDebug=function(){var a=this.$Player3.get("video"),b=this.$Player3.get("audio"),c,d,e,f,g;a&&(c=a.getDebug().MediaStreamAbrManager,d=a.getDebug().SourceBufferManager,d&&(e=d.getDebug().SourceBuffer));b&&(f=b.getDebug().SourceBufferManager,f&&(g=f.getDebug().SourceBuffer));return{getManifest:function(){return this.$Player7}.bind(this),indentifiersIntact:!0,VideoSourceStream:a,VideoAbrManager:c,VideoBufferManager:d,VideoSourceBuffer:e,AudioSourceStream:b,AudioBufferManager:f,AudioSourceBuffer:g}};a.prototype.$Player38=function(a,event){this.emit("debug/dashPlayerEvent",{detail:{type:a,event:event}})};a.prototype.$Player30=function(){this.$Player2.getBool("live_playhead_catch_up",!1)&&(this.$Player27=new C(this.$Player2))};e.exports=a}),null);
__d("oz-player",["oz-player/Player"],(function(a,b,c,d,e,f){"use strict";e.exports=b("oz-player/Player")}),null);
__d("MVideoPrefetcher",["Promise","MVideoAutoplayConfig","Run"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();var j=null,k=500;function l(){"use strict";this.$1=new Map(),this.$2=new Map(),this.$3=[],this.$4=[],this.$5=0,this.$6=1}l.prototype.$7=function(a,b,c){"use strict";c.lastProgressValue*1e3>h.autoplay_prefetch_duration_threshold_ms||c.video.duration&&c.lastProgressValue>.9*c.video.duration?(clearInterval(c.watchdog),this.$8(c),this.$2.set(c.url,!0),a()):(clearInterval(c.watchdog),this.$8(c),b(new Error("Insufficient data received for a video preload")))};l.prototype.$9=function(a){"use strict";__p&&__p();var b=document.createElement("video");b.setAttribute("src",a);b.setAttribute("preload","auto");var c={};c.video=b;c.lastProgressTime=Date.now();c.lastProgressValue=0;c.url=a;var d=new g(function(a,d){c.watchdog=setInterval(function(){var b=Date.now();b>c.lastProgressTime+h.autoplay_prefetch_waiting_time_ms&&this.$7(a,d,c)}.bind(this),k),b.addEventListener("progress",function(){var a=b.buffered&&b.buffered.end&&b.buffered.length>0?b.buffered.end(0):0;a>c.lastProgressValue&&(c.lastProgressValue=a,c.lastProgressTimestamp=Date.now())})}.bind(this));this.$10(a,d);this.$3.push(c);b.load();return d};l.prototype.$11=function(a){"use strict";var b=[];for(var c=0;c<a.length;c++){var d=l.createQueryStringURL(a[c]);this.$1.has(d)||b.push(this.$9(d))}return b};l.prototype.$12=function(a){"use strict";this.$5++;a=this.$11(a.video);g.all(a).then(function(){this.$13()}.bind(this))["catch"](function(){return this.$13()}.bind(this))};l.prototype.$10=function(a,b){"use strict";__p&&__p();var c=!!this.$1.values().next().done;c&&i.onLeave(function(){for(var a=0;a<this.$3.length;a++)this.$14(this.$3[a]);this.$3=[];this.$4=[];this.$5=0;this.$1.clear()}.bind(this));this.$1.set(a,b)};l.prototype.$14=function(a){"use strict";a=a.video;a.setAttribute("src","");a.load&&a.load()};l.prototype.$8=function(a){"use strict";this.$14(a);a=this.$3.indexOf(a);a>-1&&this.$3.splice(a,1)};l.prototype.$13=function(){"use strict";this.$5--;var a=this.$4.shift();a&&this.$12(a)};l.prototype.getAndDelete=function(a){"use strict";var b=this.$1.get(a);this.$1["delete"](a);return b};l.prototype.getPreloadCache=function(a){"use strict";return this.$2.get(a)};l.prototype.queueRequestBatch=function(a){"use strict";this.$6===0||this.$5<this.$6?this.$12(a):this.$4.push(a)};l.getInstance=function(){"use strict";j===null&&(j=new l());return j};l.createQueryStringURL=function(a){"use strict";return a.url};l.loadVideo=function(a){"use strict";var b=l.getInstance();b.queueRequestBatch({video:[{url:a}]})};l.isVideoPreloaded=function(a){"use strict";return!!l.getInstance().getPreloadCache(a)};e.exports=l}),null);
__d("MVideoPlayerController",["EventEmitter","MInlineVideo","MLegacyDataStore","MOzExperiments","MOzVideoPlayerApi","MVideoDashPrefetchCache","MVideoExperiments","MVideoPlayerApiBase","MVideoPrefetcher","Stratcom","destroyOnUnload","getElementPosition","shouldUseOzPlayer"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){__p&&__p();var t;n.MVideoPlayerApiBase;var u="MVideoPlayerController_instance",v=null,w=null;a=babelHelpers.inherits(x,g);t=a&&a.prototype;function x(a,b,c,d){"use strict";t.constructor.call(this),this.$MVideoPlayerController2=b.video_ids,this.$MVideoPlayerController3=a.video_element,this.$MVideoPlayerController1=a.root_element,this.$MVideoPlayerController6=c,this.$MVideoPlayerController7=d,!j.no_prefetch_for_ctp&&!j.no_quickstarter_for_ctp&&(this.prefetch(),this.prepareMVideoPlayerApi()),this.$MVideoPlayerController4="ready",this.$MVideoPlayerController8(this.$MVideoPlayerController3),this.$MVideoPlayerController5=null,x.$MVideoPlayerController9()}x.prototype.prepareMVideoPlayerApi=function(a){"use strict";k.prepare(this.$MVideoPlayerController3,this.$MVideoPlayerController6,a)};x.prototype.prefetch=function(){"use strict";if(m.do_not_prefetch_autoplay)return;if(!this.$MVideoPlayerController6)return;this.$MVideoPlayerController6.connection_quality_level?l.loadVideo(this.$MVideoPlayerController6.prefetch_data,this.$MVideoPlayerController6.use_credentials,this.$MVideoPlayerController6.connection_quality_level):l.loadVideo(this.$MVideoPlayerController6.prefetch_data,this.$MVideoPlayerController6.use_credentials)};x.prototype.isFullscreen=function(){"use strict";return!1};x.prototype.getVideoID=function(){"use strict";return this.$MVideoPlayerController2[0]};x.prototype.play=function(a){"use strict";this.emit("playRequested",a),this.sendPlayRequest(a)};x.prototype.prepareForPlay=function(){"use strict"};x.prototype.sendPlayRequest=function(a){"use strict";var b=!0;b=h.showPlayer(null,this.$MVideoPlayerController3,b,a);(!b||!m.mtouch_no_double_play)&&h.play(a)};x.prototype.pause=function(a){"use strict";this.emit("pauseRequested",a),h.pause(a)};x.prototype.isAutoplayable=function(){"use strict";return!1};x.prototype.getDOMPosition=function(){"use strict";return r(this.getRootNode())};x.prototype.setState=function(a){"use strict";this.$MVideoPlayerController4=a,this.emit("stateChange")};x.prototype.isState=function(a){"use strict";return this.$MVideoPlayerController4===a};x.prototype.getVideoNode=function(){"use strict";return this.$MVideoPlayerController3};x.prototype.getRootNode=function(){"use strict";return this.$MVideoPlayerController1};x.prototype.setLastActionReason=function(a){"use strict";this.$MVideoPlayerController5=a,a&&h.setLastActionReason(a)};x.prototype.getLastActionReason=function(){"use strict";return this.$MVideoPlayerController5};x.prototype.preload=function(){"use strict";if(m.do_not_prefetch_autoplay)return;var a=i.get(this.$MVideoPlayerController3),b=a&&a.src;b&&!s(a)&&o.loadVideo(b)};x.prototype.isPreloaded=function(){"use strict";var a=i.get(this.$MVideoPlayerController3);a=a&&a.src;return a&&o.isVideoPreloaded(a)};x.$MVideoPlayerController9=function(){"use strict";__p&&__p();if(v)return;v=[p.listen("m:video:player:play",null,function(a){a=x.$MVideoPlayerController10(a);x.handleApiBeginPlayback(a)}),p.listen("m:video:player:pause",null,function(a){var b=x.$MVideoPlayerController10(a);a=!!(a.getData()&&a.getData().destroyed);x.handleApiPausePlayback(b,a)}),p.listen("m:video:player:ended",null,function(a){a=x.$MVideoPlayerController10(a);x.handleApiFinishPlayback(a)}),p.listen("m:video:player:volumechange",null,function(a){a=x.$MVideoPlayerController10(a);x.handleApiVolumeChange(a)}),p.listen("m:video:player:fullscreenchange",null,function(a){a=x.$MVideoPlayerController10(a);x.handleApiFullScreenChange(a)}),p.listen("m:video:player:prepare",null,function(a){a=x.$MVideoPlayerController10(a);x.handleApiPrepare(a)}),p.listen("m:video:player:destroy",null,function(a){a=x.$MVideoPlayerController10(a);x.handleApiDestroyed(a)})];q(function(){v&&(v.forEach(function(a){return a.remove()}),v=null)})};x.handleApiBeginPlayback=function(a){"use strict";a=i.get(a)[u];a&&a.$MVideoPlayerController11()};x.handleApiPausePlayback=function(a,b){"use strict";a=i.get(a)[u];a&&a.$MVideoPlayerController12(b)};x.handleApiFinishPlayback=function(a){"use strict";a=i.get(a)[u];a&&a.$MVideoPlayerController13()};x.handleApiVolumeChange=function(a){"use strict";a=i.get(a)[u];a&&a.$MVideoPlayerController14()};x.handleApiFullScreenChange=function(a){"use strict";a=i.get(a)[u];a&&a.$MVideoPlayerController15()};x.handleApiDestroyed=function(a){"use strict";a=i.get(a)[u];a&&a.$MVideoPlayerController16()};x.handleApiPrepare=function(a){"use strict";a=i.get(a)[u];a&&a.$MVideoPlayerController17()};x.prototype.$MVideoPlayerController11=function(){"use strict";this.setState("playing")};x.prototype.$MVideoPlayerController12=function(a){"use strict";!this.isState("finished")&&!this.isState("ready")&&(!a?this.setState("paused"):this.setState("ready"))};x.prototype.$MVideoPlayerController13=function(){"use strict";this.setState("finished")};x.prototype.$MVideoPlayerController14=function(){"use strict";this.emit("volumeChange")};x.prototype.$MVideoPlayerController15=function(){"use strict";this.emit("fullscreenChange")};x.prototype.$MVideoPlayerController16=function(){"use strict";this.setState("ready"),this.emit("destroyed")};x.prototype.$MVideoPlayerController17=function(){"use strict";this.emit("prepare")};x.prototype.$MVideoPlayerController8=function(a){"use strict";var b={};b[u]=this;i.set(a,b)};x.$MVideoPlayerController10=function(a){"use strict";a=a.getData();return a&&a.videoElement};x.isBrowserAutoplayEnabled=function(){"use strict";if(w===null){var a=document.createElement("video");a.muted=!0;a.play();w=!a.paused;a.pause()}return w};e.exports=x}),null);
__d("VideoAutoplayValues",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ON:"on",OFF:"off",DOWNLOADED_ONLY:"downloaded_only",WIFI_ONLY:"wifi_only",DEFAULT_AUTOPLAY:"default_autoplay"})}),null);
__d("MFeedVideoPlayerController",["KaiOSAutoplayModule","KaiOSLogger","MFullScreen","MOzExperiments","MVideoAutoplayConfig","MVideoAutoplayPlayerBase","MVideoCache","MVideoDownloadState","MVideoDownloadStateHandler","MVideoExperiments","MVideoPlayerApiEvents","MVideoPlayerController","MVideoUtils","VideoAutoplayValues","VideoPlayerReason","destroyOnUnload","getViewportDimensions"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){__p&&__p();var x,y=.5;c=babelHelpers.inherits(b,l);x=c&&c.prototype;function b(a,b){"use strict";__p&&__p();x.constructor.call(this);this.$MFeedVideoPlayerController1=b;this.$MFeedVideoPlayerController2=a;this.$MFeedVideoPlayerController3=b.controller;this.$MFeedVideoPlayerController5=!1;this.$MFeedVideoPlayerController4=[];v(function(){this.$MFeedVideoPlayerController4.forEach(function(a){return a.remove()}),this.$MFeedVideoPlayerController4=[]}.bind(this));this.$MFeedVideoPlayerController6();if(j.no_prefetch_for_ctp||j.no_quickstarter_for_ctp){a=this.isAutoplayable();(!j.no_prefetch_for_ctp||j.no_prefetch_for_ctp&&a)&&this.$MFeedVideoPlayerController3.prefetch();this.$MFeedVideoPlayerController3.prepareMVideoPlayerApi(this)}this.$MFeedVideoPlayerController1.should_autoplay&&this.$MFeedVideoPlayerController7()}b.prototype.$MFeedVideoPlayerController7=function(){"use strict";r.isBrowserAutoplayEnabled()&&!m.isVideoDownloaded(this.getVideoID())&&this.$MFeedVideoPlayerController8()&&k.autoplay_prefetch_enabled&&(this.$MFeedVideoPlayerController3.preload&&this.$MFeedVideoPlayerController3.preload())};b.prototype.$MFeedVideoPlayerController8=function(){"use strict";__p&&__p();var a=this.$MFeedVideoPlayerController1.autoplay_setting;if(a===t.OFF)return!1;else if(m.isVideoDownloaded(this.getVideoID()))return!1;else if(a===t.WIFI_ONLY&&this.$MFeedVideoPlayerController9("WIFI"))return!0;else if(a===t.ON&&this.$MFeedVideoPlayerController9())return!0;return!1};b.prototype.$MFeedVideoPlayerController9=function(b){"use strict";__p&&__p();var c=s.getNetworkBandwidth();if(!c)if(p.desktop_no_bandwidthmax)return!0;else c=0;var d=s.getConnectivityType(),e=this.$MFeedVideoPlayerController1.autoplay_bandwidth_threshold_mbps!=null?this.$MFeedVideoPlayerController1.autoplay_bandwidth_threshold_mbps:k.autoplay_bandwidth_threshold_mbps;g.gkResult&&c===0&&(c=s.calculateBandwidth(),h.logAutoplay({bandwidth:c.toFixed(2),threshold:e.toFixed(2),detectedConnectivityType:a.navigator.connection?a.navigator.connection.type===undefined?"undefined":a.navigator.connection.type:"missing connection"}));d=(!b||d===b)&&c>=e;return d};b.prototype.isVisible=function(){"use strict";return this.$MFeedVideoPlayerController3.isFullscreen()||i.isFullScreen()?!0:s.isVisible(this.getDOMPosition())};b.prototype.getDistanceToViewport=function(){"use strict";if(this.$MFeedVideoPlayerController3.isFullscreen())return 0;var a=w().height,b=this.getDOMPosition();if(b.height===0)return-Infinity;b=b.y+(1-y)*b.height;return b-a/2};b.prototype.playWithoutUnmute=function(a){"use strict";this.$MFeedVideoPlayerController3.play(a)};b.prototype.prepareForPlay=function(){"use strict";!m.isVideoDownloaded(this.getVideoID())&&k.autoplay_prefetch_enabled&&k.autoplay_prepare_next_video_enabled&&this.$MFeedVideoPlayerController3.prepareForPlay()};b.prototype.pause=function(a){"use strict";this.$MFeedVideoPlayerController3.pause(a)};b.prototype.isAutoplayable=function(){"use strict";var a=!1,b=this.getVideoID();r.isBrowserAutoplayEnabled()&&!this.$MFeedVideoPlayerController5&&(this.$MFeedVideoPlayerController1.should_autoplay&&(m.isVideoDownloaded(b)?a=!1:this.$MFeedVideoPlayerController8()&&(k.autoplay_prefetch_required_for_playback?a=this.$MFeedVideoPlayerController3.isPreloaded():a=!0)));return a};b.prototype.getDOMPosition=function(){"use strict";return this.$MFeedVideoPlayerController3.getDOMPosition()};b.prototype.isLooping=function(){"use strict";return!1};b.prototype.getVideoID=function(){"use strict";return this.$MFeedVideoPlayerController3.getVideoID()};b.prototype.$MFeedVideoPlayerController6=function(){"use strict";var a=[["stateChange",function(a){return this.$MFeedVideoPlayerController10(a)}.bind(this)]],b=function(event){return this.emit.bind(this,event)}.bind(this);this.$MFeedVideoPlayerController4=a.map(function(a){return this.$MFeedVideoPlayerController3.addListener(a[0],a[1])}.bind(this)).concat(q.map(function(a){return this.$MFeedVideoPlayerController3.addListener(a,b(a))}.bind(this)));o.listen(this.getVideoID(),function(a){return this.$MFeedVideoPlayerController11(a)}.bind(this))};b.prototype.$MFeedVideoPlayerController10=function(){"use strict";this.$MFeedVideoPlayerController12()};b.prototype.$MFeedVideoPlayerController12=function(){"use strict";(!this.isState("playing")&&this.getLastActionReason()===u.USER||this.isState("finished"))&&(this.$MFeedVideoPlayerController5=!0,this.emit("autoplayableChange"))};b.prototype.$MFeedVideoPlayerController11=function(a){"use strict";a.state===n.DOWNLOADED&&(this.$MFeedVideoPlayerController5=!1,this.setLastActionReason(null),this.emit("autoplayableChange"))};b.prototype.isState=function(a){"use strict";return this.$MFeedVideoPlayerController3.isState(a)};b.prototype.getLastActionReason=function(){"use strict";return this.$MFeedVideoPlayerController3.getLastActionReason()};b.prototype.setLastActionReason=function(a){"use strict";this.$MFeedVideoPlayerController3.setLastActionReason(a),this.$MFeedVideoPlayerController12()};e.exports=b}),null);
__d("MVideoAutoplayControllerBase",["Stratcom","SubscriptionsHandler","VideoPlayerReason","Visibility","destroyOnUnload","throttle"],(function(a,b,c,d,e,f,g,h,i,j,k,l){__p&&__p();function a(a){"use strict";this.$3=null,this.$2=null,this.$6=[],this.$1=a,this.$4=null,this.$5=new h(),k(function(){this.$6=[],this.$3=null,this.$4&&(this.$4.remove(),this.$4=null),this.$5.release()}.bind(this))}a.prototype.getVideoUnits=function(){"use strict";return this.$6};a.prototype.addVideoUnit=function(a){"use strict";this.$6.push(a)};a.prototype.getPlayingVideoUnit=function(){"use strict";return this.$3};a.prototype.setPlayingVideoUnit=function(a){"use strict";this.$3=a};a.prototype.playVideo=function(a,b){"use strict";this.setPlayingVideoUnit(a),this.$3&&this.$3.playWithoutUnmute(b)};a.prototype.addSubscriberVideoUnit=function(){"use strict";this.getVideoUnits().length||(this.$5.addSubscriptions(g.listen("resize",null,this.updateAutoplay.bind(this)),g.listen("blur",null,this.$8.bind(this)),g.listen("focus",null,this.$9.bind(this)),j.addListener(j.HIDDEN,this.$8.bind(this)),j.addListener(j.VISIBLE,this.$9.bind(this)),g.listen("MScrollArea:scrollend",null,l(this.updateAutoplay.bind(this),this.$1)),g.listen("MScrollArea:scroll",null,l(this.updateAutoplay.bind(this),this.$1)),g.listen("MScrollArea:create",null,l(this.updateAutoplay.bind(this),this.$1)),g.listen("MScrollArea:reflow",null,l(this.updateAutoplay.bind(this),this.$1))),this.$10()||this.$11())};a.prototype.$8=function(){"use strict";this.autoplayActive()&&!this.$2&&(this.$2=this.getPlayingVideoUnit(),this.pausePlayingVideo(i.PAGE_VISIBILITY))};a.prototype.$9=function(){"use strict";this.autoplayActive()&&this.$2&&(this.playVideo(this.$2,i.PAGE_VISIBILITY),this.$2=null)};a.prototype.$11=function(){"use strict";this.$4&&(this.$4.remove(),this.$4=null),this.$7=l(this.updateAutoplay.bind(this),this.$1),this.$4=g.listen("scroll",null,this.$12.bind(this))};a.prototype.$12=function(){"use strict";this.$7()};a.prototype.$10=function(){"use strict";return!!this.$4};a.prototype.getClosestVideoUnits=function(a,b){"use strict";return this.$6.filter(function(a){return a.getDistanceToViewport()>=0&&(!b||b&&a.isAutoplayable())}).sort(function(a,b){return a.getDistanceToViewport()-b.getDistanceToViewport()}).slice(0,a)};a.prototype.getVisibleUnits=function(){"use strict";var a=[];this.$6.forEach(function(b){b.isVisible()?(a.push(b),b.wasVisible||(b.wasVisible=!0)):b.wasVisible=!1});return a};a.prototype.pausePlayingVideo=function(a){"use strict";var b=this.$3;b&&(b.pause(a),this.$3=null)};a.prototype.updateAutoplay=function(){"use strict";throw new Error("Should be overridden")};a.prototype.autoplayActive=function(){"use strict";throw new Error("Should be overridden")};e.exports=a}),null);
__d("MVideoAutoplayControllerX",["MVideoAutoplayControllerBase","SubscriptionsHandler","VideoPlayerReason","destroyOnUnload","getViewportDimensions","setImmediate"],(function(a,b,c,d,e,f,g,h,i,j,k,l){__p&&__p();var m,n=null,o=500;a=babelHelpers.inherits(p,g);m=a&&a.prototype;function p(){"use strict";m.constructor.call(this,o),this.$MVideoAutoplayControllerX1=!0,this.$MVideoAutoplayControllerX2=new h(),this.$MVideoAutoplayControllerX3=null,j(function(){this.$MVideoAutoplayControllerX4(),this===n&&(n=null)}.bind(this))}p.registerVideoUnit=function(a){"use strict";n==null&&(n=new p()),n.addSubscriberVideoUnit(),n.addVideoUnit(a),n.$MVideoAutoplayControllerX5(a),a.isVisible()&&n.updateAutoplay()};p.setShouldAutoplay=function(a){"use strict";n==null&&(n=new p()),n.$MVideoAutoplayControllerX1=a,n.updateAutoplay()};p.prototype.$MVideoAutoplayControllerX4=function(){"use strict";this.$MVideoAutoplayControllerX2.release()};p.prototype.$MVideoAutoplayControllerX6=function(a){"use strict";a&&(a.setLastActionReason(i.USER),this.getPlayingVideoUnit()&&this.setPlayingVideoUnit(null)),this.$MVideoAutoplayControllerX3=a,this.updateAutoplay()};p.prototype.$MVideoAutoplayControllerX5=function(a){"use strict";__p&&__p();if(!a.addListener)return;var b=function(){this.getPlayingVideoUnit()==a&&a.isState("paused")||this.getPlayingVideoUnit()!=a&&a.isState("playing")?this.$MVideoAutoplayControllerX6(a):a==this.$MVideoAutoplayControllerX3&&a.isState("finished")&&this.$MVideoAutoplayControllerX6(null)}.bind(this),c=function(){(a.isState("playing")||a.isState("paused"))&&this.$MVideoAutoplayControllerX6(a)}.bind(this),d=function(){this.getPlayingVideoUnit()!=a&&this.$MVideoAutoplayControllerX6(a)}.bind(this),e=function(){this.updateAutoplay()}.bind(this),f=function(){this.$MVideoAutoplayControllerX3&&this.$MVideoAutoplayControllerX3==a&&this.$MVideoAutoplayControllerX6(null)}.bind(this);this.$MVideoAutoplayControllerX2.addSubscriptions(this.$MVideoAutoplayControllerX7(a,"stateChange",b),this.$MVideoAutoplayControllerX7(a,"prepare",d),this.$MVideoAutoplayControllerX7(a,"volumeChange",c),this.$MVideoAutoplayControllerX7(a,"fullscreenChange",c),this.$MVideoAutoplayControllerX7(a,"autoplayableChange",e),this.$MVideoAutoplayControllerX7(a,"destroyed",f))};p.prototype.$MVideoAutoplayControllerX7=function(a,event,b){"use strict";a=a.addListener(event,function(){l(function(){b()})});return a};p.prototype.autoplayActive=function(){"use strict";this.$MVideoAutoplayControllerX3&&!this.$MVideoAutoplayControllerX3.isVisible()&&!this.$MVideoAutoplayControllerX3.isState("playing")&&(this.$MVideoAutoplayControllerX3=null);return this.$MVideoAutoplayControllerX3==null};p.prototype.updateAutoplay=function(){"use strict";__p&&__p();if(!this.autoplayActive())return;if(!this.$MVideoAutoplayControllerX1){this.pausePlayingVideo(i.AUTOPLAY);return}var a=this.getVisibleUnits(),b=a.length,c=null;if(b==1)c=a[0],c=c.isAutoplayable()?c:null;else if(b>1){var d=k().height/2;a.forEach(function(a){if(!a.isAutoplayable())return;var b=a.getDOMPosition();b=b.y+b.height/2;b=Math.abs(b-d);a.playPriority=b;(!c||typeof c.playPriority==="number"&&a.playPriority<c.playPriority)&&(c=a)})}this.getPlayingVideoUnit()?c!=this.getPlayingVideoUnit()&&(this.pausePlayingVideo(i.AUTOPLAY),this.playVideo(c,i.AUTOPLAY)):c&&this.playVideo(c,i.AUTOPLAY);b=this.getClosestVideoUnits(2,!0);a=b.length;var e=null;for(var f=0;f<a;f++)if(b[f]!==c){e=b[f];break}e&&e.prepareForPlay()};e.exports=p}),null);
__d("MVideoFeedRegister",["MFeedVideoPlayerController","MVideoAutoplayControllerX"],(function(a,b,c,d,e,f,g,h){a={registerVideoUnit:function(a,b){a=new g(a,b);h.registerVideoUnit(a)}};e.exports=a}),null);